module.exports=[82063,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(36305),e=a.i(91894),f=a.i(34763),g=a.i(9635),h=a.i(54593),i=a.i(64725),j=a.i(30647),k=a.i(29162),l=a.i(92687),m=a.i(51710),n=a.i(58287),o=a.i(94123),p=a.i(96988),q=a.i(22697),r=a.i(92402),s=a.i(59489),t=a.i(90186),u=a.i(4393);a.i(84332);var v=a.i(14059),w=a.i(52170),x=a.i(10192);let y=g.z.object({vehicleId:g.z.coerce.number().min(1,"Vehiculul este obligatoriu"),driverId:g.z.coerce.number().optional().nullable(),fuelTypeId:g.z.coerce.number().min(1,"Tipul de combustibil este obligatoriu"),fuelStationId:g.z.coerce.number().optional().nullable(),quantity:g.z.coerce.number().min(.01,"Cantitatea trebuie să fie mai mare decât 0"),pricePerUnit:g.z.coerce.number().optional().nullable(),totalCost:g.z.coerce.number().optional().nullable(),odometer:g.z.coerce.number().optional().nullable(),transactionDate:g.z.string().min(1,"Data tranzacției este obligatorie"),deliveryDate:g.z.string().optional().nullable(),invoiceDate:g.z.string().optional().nullable(),invoiceNumber:g.z.string().optional().nullable(),cardNumber:g.z.string().optional().nullable(),costCenter:g.z.string().optional().nullable(),notes:g.z.string().optional().nullable()});function z({transaction:a,isLoading:g=!1}){let o=(0,d.useRouter)(),z=!!a,B=(0,v.useCreateFuelTransaction)(),C=(0,v.useUpdateFuelTransaction)(),{data:D,isLoading:E}=(0,w.useVehicles)({pageSize:1e3}),{data:F,isLoading:G}=(0,x.useDrivers)({pageSize:1e3}),{data:H,isLoading:I}=(0,v.useFuelTypes)(),{data:J,isLoading:K}=(0,v.useFuelStations)(),L=D?.data||[],M=F?.data||[],N=(0,e.useForm)({resolver:(0,f.zodResolver)(y),defaultValues:{vehicleId:a?.vehicleId||0,driverId:a?.driverId||null,fuelTypeId:a?.fuelTypeId||0,fuelStationId:a?.fuelStationId||null,quantity:a?.quantity||0,pricePerUnit:a?.pricePerUnit||null,totalCost:a?.totalCost||null,odometer:a?.odometer||null,transactionDate:a?.transactionDate?.split("T")[0]||new Date().toISOString().split("T")[0],deliveryDate:a?.deliveryDate?.split("T")[0]||null,invoiceDate:a?.invoiceDate?.split("T")[0]||null,invoiceNumber:a?.invoiceNumber||null,cardNumber:a?.cardNumber||null,costCenter:a?.costCenter||null,notes:a?.notes||null}}),O=N.watch("quantity"),P=N.watch("pricePerUnit");c.useEffect(()=>{if(O&&P){let a=O*P;N.setValue("totalCost",Math.round(100*a)/100)}},[O,P,N]);let Q=async b=>{let c={vehicleId:b.vehicleId,driverId:b.driverId||null,fuelTypeId:b.fuelTypeId,fuelStationId:b.fuelStationId||null,quantity:b.quantity,pricePerUnit:b.pricePerUnit||null,totalCost:b.totalCost||null,odometer:b.odometer||null,transactionDate:b.transactionDate,deliveryDate:b.deliveryDate||null,invoiceDate:b.invoiceDate||null,invoiceNumber:b.invoiceNumber||null,cardNumber:b.cardNumber||null,costCenter:b.costCenter||null,notes:b.notes||null};if(z&&a)await C.mutateAsync({id:a.id,data:c}),o.push(`/fuel/${a.id}`);else{let a=await B.mutateAsync(c);o.push(`/fuel/${a.id}`)}},R=B.isPending||C.isPending;return g?(0,b.jsx)(A,{}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>o.back(),children:(0,b.jsx)(p.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:z?"Editează alimentare":"Alimentare nouă"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:z?`Modifică datele alimentării #${a?.id}`:"Înregistrează o alimentare nouă"})]})]}),(0,b.jsx)(k.Form,{...N,children:(0,b.jsxs)("form",{onSubmit:N.handleSubmit(Q),className:"space-y-6",children:[(0,b.jsxs)(n.Tabs,{defaultValue:"general",className:"space-y-4",children:[(0,b.jsxs)(n.TabsList,{children:[(0,b.jsxs)(n.TabsTrigger,{value:"general",children:[(0,b.jsx)(s.Fuel,{className:"mr-2 h-4 w-4"}),"Informații generale"]}),(0,b.jsxs)(n.TabsTrigger,{value:"cost",children:[(0,b.jsx)(t.Receipt,{className:"mr-2 h-4 w-4"}),"Cost și plată"]}),(0,b.jsxs)(n.TabsTrigger,{value:"invoice",children:[(0,b.jsx)(u.FileText,{className:"mr-2 h-4 w-4"}),"Facturare"]})]}),(0,b.jsxs)(n.TabsContent,{value:"general",className:"space-y-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Detalii alimentare"}),(0,b.jsx)(m.CardDescription,{children:"Informații de bază despre alimentare"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"transactionDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data tranzacției *"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"deliveryDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data livrării"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"vehicleId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Vehicul *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value?.toString()||"",disabled:E,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează vehiculul"})})}),(0,b.jsx)(l.SelectContent,{children:L.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id.toString(),children:[a.licensePlate," - ",a.vehicleCode]},a.id))})]}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"driverId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Șofer"}),(0,b.jsxs)(l.Select,{onValueChange:b=>a.onChange("__none__"===b?null:parseInt(b)),value:a.value?.toString()||"__none__",disabled:G,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează șoferul"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"__none__",children:"Niciun șofer"}),M.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id.toString(),children:[a.firstName," ",a.lastName]},a.id))]})]}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"fuelTypeId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Tip combustibil *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value?.toString()||"",disabled:I,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează tipul"})})}),(0,b.jsx)(l.SelectContent,{children:H?.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"fuelStationId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Stație alimentare"}),(0,b.jsxs)(l.Select,{onValueChange:b=>a.onChange("__none__"===b?null:parseInt(b)),value:a.value?.toString()||"__none__",disabled:K,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează stația"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"__none__",children:"Nicio stație"}),J?.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"quantity",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cantitate (litri) *"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 50.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):0)})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"odometer",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Kilometraj"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",placeholder:"ex: 50000",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseInt(b.target.value):null)})}),(0,b.jsx)(k.FormDescription,{children:"Kilometrajul vehiculului la alimentare"}),(0,b.jsx)(k.FormMessage,{})]})})]})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Notițe"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(k.FormField,{control:N.control,name:"notes",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(j.Textarea,{placeholder:"Adaugă notițe sau observații...",className:"min-h-[100px]",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})})]})]}),(0,b.jsx)(n.TabsContent,{value:"cost",className:"space-y-4",children:(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Cost și plată"}),(0,b.jsx)(m.CardDescription,{children:"Informații despre cost și modalitatea de plată"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"pricePerUnit",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Preț per litru (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 7.50",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"totalCost",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cost total (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 375.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormDescription,{children:"Se calculează automat"}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"cardNumber",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Nr. card"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"ex: 1234-5678",...a,value:a.value??""})}),(0,b.jsx)(k.FormDescription,{children:"Numărul cardului de alimentare"}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsx)(k.FormField,{control:N.control,name:"costCenter",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Centru de cost"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"ex: CC-001",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})]})]})}),(0,b.jsx)(n.TabsContent,{value:"invoice",className:"space-y-4",children:(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Informații facturare"}),(0,b.jsx)(m.CardDescription,{children:"Detalii despre factura asociată"})]}),(0,b.jsx)(m.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:N.control,name:"invoiceNumber",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Nr. factură"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{placeholder:"ex: FV-2024-001",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:N.control,name:"invoiceDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data facturii"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})]})})]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>o.back(),children:"Anulează"}),(0,b.jsxs)(h.Button,{type:"submit",disabled:R,children:[R&&(0,b.jsx)(r.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(q.Save,{className:"mr-2 h-4 w-4"}),z?"Salvează modificările":"Înregistrează alimentarea"]})]})]})})]})}function A(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.Skeleton,{className:"h-10 w-10"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(o.Skeleton,{className:"h-4 w-64"})]})]}),(0,b.jsx)(o.Skeleton,{className:"h-10 w-full max-w-md"}),(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(o.Skeleton,{className:"h-6 w-40"}),(0,b.jsx)(o.Skeleton,{className:"h-4 w-60"})]}),(0,b.jsx)(m.CardContent,{className:"space-y-4",children:(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(o.Skeleton,{className:"h-10 w-full"})]},c))})})]})]})}a.s(["FuelForm",()=>z])}];

//# sourceMappingURL=app_frontend-next_src_components_fuel_fuel-form_tsx_9e9e8bbc._.js.map