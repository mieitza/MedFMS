module.exports=[96988,a=>{"use strict";let b=(0,a.i(82530).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],96988)},9307,a=>{"use strict";var b=a.i(3236),c=a.i(91485);a.i(19232);var d=a.i(30833),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(92729);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],9307)},26528,a=>{"use strict";var b=a.i(3236),c=a.i(92729);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},90654,a=>{"use strict";let b=(0,a.i(82530).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],90654)},90308,a=>{"use strict";let b=(0,a.i(82530).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],90308)},23617,a=>{"use strict";let b=(0,a.i(82530).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);a.s(["TrendingDown",()=>b],23617)},72438,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(98544),f=a.i(51710),g=a.i(54593),h=a.i(94123),i=a.i(64725),j=a.i(9307),k=a.i(26528),l=a.i(96988),m=a.i(90654),n=a.i(90308),o=a.i(23617),p=a.i(30067),q=a.i(4393),r=a.i(25181);function s({title:a,value:c,suffix:d="",icon:e,color:g,loading:i=!1}){return(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-full ${g}`,children:(0,b.jsx)(e,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a}),i?(0,b.jsx)(h.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["number"==typeof c?c.toLocaleString("ro-RO",{maximumFractionDigits:2}):c,d&&(0,b.jsx)("span",{className:"text-sm font-normal text-slate-500 ml-1",children:d})]})]})]})})})}function t(){let a,t,u=((t=new Date(a=new Date)).setMonth(t.getMonth()-6),{start:t.toISOString().split("T")[0],end:a.toISOString().split("T")[0]}),[v,w]=(0,c.useState)(u.start),[x,y]=(0,c.useState)(u.end),{data:z,isLoading:A}=(0,e.useQuery)({queryKey:["warehouse","reports","pricing",v,x],queryFn:()=>r.warehouseApi.getPricingReport({startDate:v,endDate:x}),enabled:!!v&&!!x});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/warehouse/reports",children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Rapoarte"]})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Raport Prețuri"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Evoluția prețurilor materialelor și statistici"})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>{if(!z?.data||0===z.data.length)return void alert("Nu există date pentru export");let a=new Blob(["\uFEFF"+["Cod Material,Denumire,Preț Minim,Preț Maxim,Preț Mediu,Variație",...z.data.map(a=>[a.material.materialCode,a.material.materialName,a.statistics.min.toFixed(2),a.statistics.max.toFixed(2),a.statistics.avg.toFixed(2),a.statistics.variance.toFixed(2)]).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=URL.createObjectURL(a),b.download=`raport-preturi-${new Date().toISOString().split("T")[0]}.csv`,b.click()},disabled:!z?.data||0===z.data.length,children:[(0,b.jsx)(m.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Filtre"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Data început"}),(0,b.jsx)(i.Input,{type:"date",value:v,onChange:a=>w(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Data sfârșit"}),(0,b.jsx)(i.Input,{type:"date",value:x,onChange:a=>y(a.target.value)})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(s,{title:"Total Materiale Analizate",value:z?.summary?.totalMaterials||0,icon:p.Package,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-600",loading:A}),(0,b.jsx)(s,{title:"Variație Medie Prețuri",value:z?.summary?.averagePriceChange||0,suffix:"%",icon:z?.summary?.averagePriceChange&&z.summary.averagePriceChange>0?n.TrendingUp:o.TrendingDown,color:z?.summary?.averagePriceChange&&z.summary.averagePriceChange>0?"bg-red-100 dark:bg-red-900/30 text-red-600":"bg-green-100 dark:bg-green-900/30 text-green-600",loading:A})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Evoluția Prețurilor"}),(0,b.jsxs)(f.CardDescription,{children:[z?.data?.length||0," materiale cu istoric de prețuri"]})]}),(0,b.jsx)(f.CardContent,{children:A?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"})]}):z?.data&&0!==z.data.length?(0,b.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Cod Material"}),(0,b.jsx)(k.TableHead,{children:"Denumire"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Preț Minim"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Preț Maxim"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Preț Mediu"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Variație"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Nr. Intrări"})]})}),(0,b.jsx)(k.TableBody,{children:z.data.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.material.materialCode}),(0,b.jsx)(k.TableCell,{children:a.material.materialName}),(0,b.jsxs)(k.TableCell,{className:"text-right",children:[a.statistics.min.toFixed(2)," RON"]}),(0,b.jsxs)(k.TableCell,{className:"text-right",children:[a.statistics.max.toFixed(2)," RON"]}),(0,b.jsxs)(k.TableCell,{className:"text-right font-medium",children:[a.statistics.avg.toFixed(2)," RON"]}),(0,b.jsx)(k.TableCell,{className:"text-right",children:(0,b.jsxs)("span",{className:a.statistics.variance>10?"text-red-600":a.statistics.variance>5?"text-amber-600":"text-green-600",children:[a.statistics.variance.toFixed(2),"%"]})}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.priceHistory.length})]},a.material.id))})]})}):(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)(q.FileText,{className:"h-12 w-12 mx-auto text-slate-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nu există date"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nu au fost găsite date de prețuri pentru perioada selectată."})]})})]}),z?.data&&z.data.length>0&&(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Detalii Istoric Prețuri"}),(0,b.jsx)(f.CardDescription,{children:"Ultimele modificări de prețuri pentru fiecare material"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:z.data.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"border-b pb-4 last:border-b-0",children:[(0,b.jsxs)("h4",{className:"font-medium mb-2",children:[a.material.materialCode," - ",a.material.materialName]}),a.priceHistory.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-slate-500",children:[(0,b.jsx)("th",{className:"text-left py-1",children:"Data"}),(0,b.jsx)("th",{className:"text-right py-1",children:"Preț"}),(0,b.jsx)("th",{className:"text-left py-1 pl-4",children:"Furnizor"})]})}),(0,b.jsx)("tbody",{children:a.priceHistory.slice(0,5).map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-1",children:new Date(a.date).toLocaleDateString("ro-RO")}),(0,b.jsxs)("td",{className:"text-right py-1",children:[a.price.toFixed(2)," RON"]}),(0,b.jsx)("td",{className:"py-1 pl-4",children:a.supplier})]},c))})]})}):(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nu există istoric de prețuri"})]},a.material.id))})})]})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=app_frontend-next_680cc11b._.js.map