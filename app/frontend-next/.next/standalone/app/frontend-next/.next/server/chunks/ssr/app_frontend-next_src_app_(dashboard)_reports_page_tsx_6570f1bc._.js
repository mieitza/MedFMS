module.exports=[54917,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(98544),f=a.i(51710),g=a.i(94123),h=a.i(21944),i=a.i(9307),j=a.i(64725),k=a.i(92687),l=a.i(26528),m=a.i(14874),n=a.i(89403),o=a.i(59489),p=a.i(55665),q=a.i(30067),r=a.i(90308),s=a.i(23617),t=a.i(52472),u=a.i(93473),v=a.i(46811),w=a.i(30444);a.i(50582);var x=a.i(62416),y=a.i(94807),z=a.i(65442),A=a.i(41992);a.i(84332);var B=a.i(53048);let C=[{value:"7",label:"Ultimele 7 zile"},{value:"30",label:"Ultimele 30 zile"},{value:"90",label:"Ultimele 90 zile"},{value:"365",label:"Ultimul an"},{value:"custom",label:"Perioadă personalizată"}];function D({title:a,value:c,suffix:d="",icon:e,color:h,loading:i=!1,trend:j,trendLabel:k}){return(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-full ${h}`,children:(0,b.jsx)(e,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a}),i?(0,b.jsx)(g.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["number"==typeof c?c.toLocaleString("ro-RO",{maximumFractionDigits:2}):c,d&&(0,b.jsx)("span",{className:"text-sm font-normal text-slate-500 ml-1",children:d})]})]})]}),void 0!==j&&(0,b.jsxs)("div",{className:`flex items-center gap-1 text-sm ${j>=0?"text-green-600":"text-red-600"}`,children:[j>=0?(0,b.jsx)(r.TrendingUp,{className:"h-4 w-4"}):(0,b.jsx)(s.TrendingDown,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[Math.abs(j).toFixed(1),"%"]}),k&&(0,b.jsx)("span",{className:"text-slate-500 text-xs",children:k})]})]})})})}function E({value:a,max:c,color:d}){return(0,b.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-full rounded-full ${d}`,style:{width:`${Math.min(c>0?a/c*100:0,100)}%`}})})}function F({title:a,description:c,href:e,icon:f}){return(0,b.jsx)(d.default,{href:e,className:"block group",children:(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f,{className:"h-5 w-5 text-slate-500 group-hover:text-primary transition-colors"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium group-hover:text-primary transition-colors",children:a}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:c})]})]}),(0,b.jsx)(w.ChevronRight,{className:"h-5 w-5 text-slate-400 group-hover:text-primary transition-colors"})]})})}function G(){let[a,d]=(0,c.useState)("30"),[r,s]=(0,c.useState)(""),[w,G]=(0,c.useState)(""),H=(0,c.useMemo)(()=>{if("custom"===a&&r&&w)return{startDate:r,endDate:w};if("custom"!==a){let b=parseInt(a),c=new Date,d=new Date;return d.setDate(c.getDate()-b),{startDate:d.toISOString().split("T")[0],endDate:c.toISOString().split("T")[0]}}return{}},[a,r,w]),{data:I,isLoading:J}=(0,e.useQuery)({queryKey:["vehicles","overview"],queryFn:()=>x.vehiclesApi.getAll({pageSize:1})}),{data:K,isLoading:L}=(0,e.useQuery)({queryKey:["drivers","overview"],queryFn:()=>y.driversApi.getAll({pageSize:1})}),{data:M,isLoading:N}=(0,e.useQuery)({queryKey:["fuel","overview",H],queryFn:()=>z.fuelApi.getAll({dateFrom:H.startDate,dateTo:H.endDate,pageSize:1e4}),enabled:!!H.startDate&&!!H.endDate}),{data:O,isLoading:P}=(0,e.useQuery)({queryKey:["maintenance","overview",H],queryFn:()=>A.maintenanceApi.getAll({dateFrom:H.startDate,dateTo:H.endDate,pageSize:1e3}),enabled:!!H.startDate&&!!H.endDate}),{data:Q,isLoading:R}=(0,B.useLowStockMaterials)(),S=(0,c.useMemo)(()=>{let a=M?.data||[],b=a.reduce((a,b)=>a+(parseFloat(String(b.totalCost))||0),0),c=a.reduce((a,b)=>a+(parseFloat(String(b.quantity))||0),0);return{totalCost:b,totalQuantity:c,avgPricePerLiter:c>0?b/c:0,count:a.length}},[M]),T=(0,c.useMemo)(()=>{let a=O?.data||[],b=a.filter(a=>"pending"===a.status).length,c=a.filter(a=>"in_progress"===a.status).length,d=a.filter(a=>"completed"===a.status).length,e=a.reduce((a,b)=>a+(parseFloat(String(b.actualCost))||0),0);return{total:a.length,pending:b,inProgress:c,completed:d,totalCost:e}},[O]),U=(0,c.useMemo)(()=>{let a=M?.data||[],b={};return a.forEach(a=>{let c=a.vehicle?.licensePlate||"Unknown";b[c]||(b[c]={licensePlate:c,totalCost:0,quantity:0}),b[c].totalCost+=parseFloat(String(a.totalCost))||0,b[c].quantity+=parseFloat(String(a.quantity))||0}),Object.values(b).sort((a,b)=>b.totalCost-a.totalCost).slice(0,5)},[M]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Rapoarte și Analize"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Prezentare generală a performanței flotei"})]})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Perioada de Analiză"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Perioadă"}),(0,b.jsxs)(k.Select,{value:a,onValueChange:d,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Selectează perioada"})}),(0,b.jsx)(k.SelectContent,{children:C.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),"custom"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"De la"}),(0,b.jsx)(j.Input,{type:"date",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Până la"}),(0,b.jsx)(j.Input,{type:"date",value:w,onChange:a=>G(a.target.value)})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(D,{title:"Total Vehicule",value:I?.pagination.totalItems||0,icon:m.Car,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-600",loading:J}),(0,b.jsx)(D,{title:"Total Șoferi",value:K?.pagination.totalItems||0,icon:n.Users,color:"bg-green-100 dark:bg-green-900/30 text-green-600",loading:L}),(0,b.jsx)(D,{title:"Cost Combustibil",value:S.totalCost,suffix:"RON",icon:o.Fuel,color:"bg-amber-100 dark:bg-amber-900/30 text-amber-600",loading:N}),(0,b.jsx)(D,{title:"Comenzi Mentenanță",value:T.total,icon:p.Wrench,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-600",loading:P})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(D,{title:"Combustibil Consumat",value:S.totalQuantity,suffix:"L",icon:o.Fuel,color:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600",loading:N}),(0,b.jsx)(D,{title:"Preț Mediu/L",value:S.avgPricePerLiter,suffix:"RON",icon:t.DollarSign,color:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600",loading:N}),(0,b.jsx)(D,{title:"Mentenanță În Așteptare",value:T.pending,icon:u.AlertTriangle,color:"bg-orange-100 dark:bg-orange-900/30 text-orange-600",loading:P}),(0,b.jsx)(D,{title:"Stoc Critic",value:Q?.length||0,icon:q.Package,color:"bg-red-100 dark:bg-red-900/30 text-red-600",loading:R})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Top Vehicule după Cost Combustibil"}),(0,b.jsx)(f.CardDescription,{children:"Vehiculele cu cel mai mare consum în perioada selectată"})]}),(0,b.jsx)(f.CardContent,{children:N?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"})]}):U.length>0?(0,b.jsx)("div",{className:"space-y-4",children:U.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Badge,{variant:"outline",className:"w-6 h-6 p-0 justify-center",children:c+1}),(0,b.jsx)("span",{className:"font-medium",children:a.licensePlate})]}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.totalCost.toFixed(2)," RON"]})]}),(0,b.jsx)(E,{value:a.totalCost,max:U[0]?.totalCost||1,color:"bg-blue-600"}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[a.quantity.toFixed(2)," L"]})]},a.licensePlate))}):(0,b.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există date pentru perioada selectată"})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Status Mentenanță"}),(0,b.jsx)(f.CardDescription,{children:"Distribuția comenzilor de lucru"})]}),(0,b.jsx)(f.CardContent,{children:P?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),(0,b.jsx)("span",{children:"În Așteptare"})]}),(0,b.jsx)("span",{className:"font-bold",children:T.pending})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,b.jsx)("span",{children:"În Progres"})]}),(0,b.jsx)("span",{className:"font-bold",children:T.inProgress})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,b.jsx)("span",{children:"Finalizate"})]}),(0,b.jsx)("span",{className:"font-bold",children:T.completed})]}),(0,b.jsx)("div",{className:"pt-2 border-t",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Cost Total Mentenanță"}),(0,b.jsxs)("span",{className:"font-bold",children:[T.totalCost.toFixed(2)," RON"]})]})})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Materiale Stoc Critic"}),(0,b.jsx)(f.CardDescription,{children:"Materialele care necesită reaprovizionare"})]}),(0,b.jsx)(f.CardContent,{children:R?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"}),(0,b.jsx)(g.Skeleton,{className:"h-8 w-full"})]}):Q&&Q.length>0?(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Material"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Stoc"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Critic"})]})}),(0,b.jsx)(l.TableBody,{children:Q.slice(0,5).map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.materialCode})]})}),(0,b.jsx)(l.TableCell,{className:"text-right",children:(0,b.jsx)(h.Badge,{variant:0===a.currentStock?"destructive":"secondary",children:a.currentStock})}),(0,b.jsx)(l.TableCell,{className:"text-right text-slate-500",children:a.criticalLevel})]},a.materialCode))})]}):(0,b.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există materiale sub nivel critic"})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Rapoarte Detaliate"}),(0,b.jsx)(f.CardDescription,{children:"Accesează rapoarte specifice pentru analize aprofundate"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-2",children:[(0,b.jsx)(F,{title:"Rapoarte Combustibil",description:"Analiză detaliată a consumului și costurilor",href:"/fuel/reports",icon:o.Fuel}),(0,b.jsx)(F,{title:"Rapoarte Depozit",description:"Stocuri, prețuri, transferuri și expirări",href:"/warehouse/reports",icon:q.Package}),(0,b.jsx)(F,{title:"Alimentări Duminică",description:"Raport alimentări efectuate duminica",href:"/fuel/reports/sunday-fueling",icon:v.Calendar}),(0,b.jsx)(F,{title:"Raport Zilnic Vehicule",description:"Consum zilnic pe fiecare vehicul",href:"/fuel/reports/daily-vehicle",icon:m.Car})]})]})]})]})}a.s(["default",()=>G])}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_reports_page_tsx_6570f1bc._.js.map