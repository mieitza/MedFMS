module.exports=[26528,a=>{"use strict";var b=a.i(3236),c=a.i(92729);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},90654,a=>{"use strict";let b=(0,a.i(82530).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],90654)},52472,a=>{"use strict";let b=(0,a.i(82530).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],52472)},14874,a=>{"use strict";let b=(0,a.i(82530).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);a.s(["Car",()=>b],14874)},46811,a=>{"use strict";let b=(0,a.i(82530).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],46811)},6388,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(98544),f=a.i(51710),g=a.i(54593),h=a.i(94123),i=a.i(92687),j=a.i(64725),k=a.i(9307),l=a.i(26528),m=a.i(96988),n=a.i(90654),o=a.i(46811),p=a.i(14874),q=a.i(59489),r=a.i(52472),s=a.i(4393);a.i(50582);var t=a.i(65442),u=a.i(62416);function v({title:a,value:c,suffix:d="",icon:e,color:g,loading:i=!1}){return(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-full ${g}`,children:(0,b.jsx)(e,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a}),i?(0,b.jsx)(h.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["number"==typeof c?c.toLocaleString("ro-RO",{maximumFractionDigits:2}):c,d&&(0,b.jsx)("span",{className:"text-sm font-normal text-slate-500 ml-1",children:d})]})]})]})})})}function w(){let a,w,x=((w=new Date(a=new Date)).setMonth(w.getMonth()-3),{start:w.toISOString().split("T")[0],end:a.toISOString().split("T")[0]}),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)("_all"),[C,D]=(0,c.useState)(x.start),[E,F]=(0,c.useState)(x.end),{data:G}=(0,e.useQuery)({queryKey:["vehicles","all"],queryFn:()=>u.vehiclesApi.getAll({pageSize:1e3})}),H=G?.data||[],{data:I,isLoading:J}=(0,e.useQuery)({queryKey:["fuel","transactions","sunday",C,E],queryFn:()=>t.fuelApi.getAll({dateFrom:C,dateTo:E,pageSize:1e4}),enabled:!!C&&!!E}),K=(0,c.useMemo)(()=>(I?.data||[]).filter(a=>0===new Date(a.transactionDate).getDay()),[I]),L=(0,c.useMemo)(()=>K.filter(a=>("all"===y||a.vehicleId===parseInt(y))&&(!A||"_all"===A||new Date(a.transactionDate).toISOString().substring(0,7)===A)&&!0),[K,y,A]),M=(0,c.useMemo)(()=>({totalTransactions:L.length,uniqueVehicles:new Set(L.map(a=>a.vehicleId)).size,totalFuelVolume:L.reduce((a,b)=>a+(parseFloat(String(b.quantity))||0),0),totalFuelCost:L.reduce((a,b)=>a+(parseFloat(String(b.totalCost))||0),0)}),[L]),N=(0,c.useMemo)(()=>[...new Set(K.map(a=>new Date(a.transactionDate).toISOString().substring(0,7)))].sort().reverse(),[K]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/fuel/reports",children:[(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Rapoarte"]})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Alimentări Duminică"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Raport cu toate alimentările efectuate în zilele de duminică"})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>{if(0===L.length)return void alert("Nu există date pentru export");let a=new Blob(["\uFEFF"+["Data,Vehicul,Cod Vehicul,Șofer,Stație,Tip Combustibil,Cantitate (L),Preț Total (RON),KM",...L.map(a=>{let b=new Date(a.transactionDate),c=String(b.getDate()).padStart(2,"0"),d=String(b.getMonth()+1).padStart(2,"0"),e=b.getFullYear(),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0");return[`${c}/${d}/${e} ${f}:${g}`,a.vehicle?.licensePlate||"N/A",a.vehicle?.vehicleCode||"N/A",a.driver?`${a.driver.firstName} ${a.driver.lastName}`:"N/A",a.fuelStation?.name||"N/A",a.fuelType?.name||"N/A",parseFloat(String(a.quantity)||"0").toFixed(2),parseFloat(String(a.totalCost)||"0").toFixed(2),a.odometer||"N/A"]}).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=URL.createObjectURL(a),b.download=`alimentari-duminica-${new Date().toISOString().split("T")[0]}.csv`,b.click()},disabled:0===L.length,children:[(0,b.jsx)(n.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Filtre"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Data început"}),(0,b.jsx)(j.Input,{type:"date",value:C,onChange:a=>D(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Data sfârșit"}),(0,b.jsx)(j.Input,{type:"date",value:E,onChange:a=>F(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Vehicul"}),(0,b.jsxs)(i.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Selectează vehiculul"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Toate vehiculele"}),H.map(a=>(0,b.jsxs)(i.SelectItem,{value:String(a.id),children:[a.licensePlate," - ",a.vehicleCode]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Luna"}),(0,b.jsxs)(i.Select,{value:A,onValueChange:B,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Toate lunile"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"_all",children:"Toate lunile"}),N.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:new Date(a+"-01").toLocaleDateString("ro-RO",{year:"numeric",month:"long"})},a))]})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(v,{title:"Total Tranzacții",value:M.totalTransactions,icon:o.Calendar,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-600",loading:J}),(0,b.jsx)(v,{title:"Vehicule Unice",value:M.uniqueVehicles,icon:p.Car,color:"bg-green-100 dark:bg-green-900/30 text-green-600",loading:J}),(0,b.jsx)(v,{title:"Combustibil Total",value:M.totalFuelVolume.toFixed(2),suffix:"L",icon:q.Fuel,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-600",loading:J}),(0,b.jsx)(v,{title:"Cost Total",value:M.totalFuelCost.toFixed(2),suffix:"RON",icon:r.DollarSign,color:"bg-red-100 dark:bg-red-900/30 text-red-600",loading:J})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Tranzacții Duminică"}),(0,b.jsxs)(f.CardDescription,{children:[L.length," alimentări găsite"]})]}),(0,b.jsx)(f.CardContent,{children:J?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"})]}):0===L.length?(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)(s.FileText,{className:"h-12 w-12 mx-auto text-slate-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nu există alimentări duminică"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nu au fost găsite tranzacții pentru zilele de duminică în perioada selectată."})]}):(0,b.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Data"}),(0,b.jsx)(l.TableHead,{children:"Vehicul"}),(0,b.jsx)(l.TableHead,{children:"Cod Vehicul"}),(0,b.jsx)(l.TableHead,{children:"Șofer"}),(0,b.jsx)(l.TableHead,{children:"Stație"}),(0,b.jsx)(l.TableHead,{children:"Tip Combustibil"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Cantitate"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Valoare"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"KM"})]})}),(0,b.jsx)(l.TableBody,{children:L.map(a=>{let c=new Date(a.transactionDate),d=`${String(c.getDate()).padStart(2,"0")}/${String(c.getMonth()+1).padStart(2,"0")}/${c.getFullYear()} ${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}`;return(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-medium",children:d}),(0,b.jsx)(l.TableCell,{children:a.vehicle?.licensePlate||"N/A"}),(0,b.jsx)(l.TableCell,{children:a.vehicle?.vehicleCode||"N/A"}),(0,b.jsx)(l.TableCell,{children:a.driver?`${a.driver.firstName} ${a.driver.lastName}`:"N/A"}),(0,b.jsx)(l.TableCell,{children:a.fuelStation?.name||"N/A"}),(0,b.jsx)(l.TableCell,{children:a.fuelType?.name||"N/A"}),(0,b.jsxs)(l.TableCell,{className:"text-right",children:[parseFloat(String(a.quantity)||"0").toFixed(2)," L"]}),(0,b.jsxs)(l.TableCell,{className:"text-right",children:[parseFloat(String(a.totalCost)||"0").toFixed(2)," RON"]}),(0,b.jsx)(l.TableCell,{className:"text-right",children:a.odometer?`${parseInt(String(a.odometer)).toLocaleString()} km`:"N/A"})]},a.id)})})]})})})]})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=app_frontend-next_26e9fc63._.js.map