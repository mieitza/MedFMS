module.exports=[96988,a=>{"use strict";let b=(0,a.i(82530).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],96988)},9307,a=>{"use strict";var b=a.i(3236),c=a.i(91485);a.i(19232);var d=a.i(30833),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(92729);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],9307)},26528,a=>{"use strict";var b=a.i(3236),c=a.i(92729);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},90654,a=>{"use strict";let b=(0,a.i(82530).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],90654)},52472,a=>{"use strict";let b=(0,a.i(82530).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],52472)},40079,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(98544),f=a.i(51710),g=a.i(54593),h=a.i(94123),i=a.i(9307),j=a.i(92687),k=a.i(26528),l=a.i(96988),m=a.i(90654),n=a.i(4631),o=a.i(30067),p=a.i(52472);let q=(0,a.i(82530).default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var r=a.i(4393),s=a.i(25181);function t({title:a,value:c,suffix:d="",icon:e,color:g,loading:i=!1}){return(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-full ${g}`,children:(0,b.jsx)(e,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a}),i?(0,b.jsx)(h.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["number"==typeof c?c.toLocaleString("ro-RO",{maximumFractionDigits:2}):c,d&&(0,b.jsx)("span",{className:"text-sm font-normal text-slate-500 ml-1",children:d})]})]})]})})})}function u({value:a,max:c,color:d}){return(0,b.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,b.jsx)("div",{className:`h-full rounded-full ${d}`,style:{width:`${c>0?a/c*100:0}%`}})})}function v(){let a,v=(()=>{let a=[],b=new Date;for(let c=0;c<12;c++){let d=new Date(b.getFullYear(),b.getMonth()-c,1);a.push({value:`${d.getFullYear()}-${d.getMonth()+1}`,label:d.toLocaleDateString("ro-RO",{year:"numeric",month:"long"}),month:d.getMonth()+1,year:d.getFullYear()})}return a})(),[w,x]=(0,c.useState)(v[0].value),[y,z]=(0,c.useState)("all"),{data:A=[]}=(0,e.useQuery)({queryKey:["warehouses"],queryFn:()=>s.warehouseApi.getWarehouses()}),{month:B,year:C}=(a=v.find(a=>a.value===w))?{month:a.month,year:a.year}:{month:new Date().getMonth()+1,year:new Date().getFullYear()},{data:D,isLoading:E}=(0,e.useQuery)({queryKey:["warehouse","reports","usage",y,B,C],queryFn:()=>s.warehouseApi.getUsageReport({..."all"!==y?{warehouseId:parseInt(y)}:{},month:B,year:C})}),F=D?.data?.categoryBreakdown?Math.max(...D.data.categoryBreakdown.map(a=>a.totalConsumption)):0,G=D?.data?.topUsedMaterials?Math.max(...D.data.topUsedMaterials.map(a=>a.totalConsumption)):0;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/warehouse/reports",children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Rapoarte"]})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Raport Utilizare"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Analiza consumului de materiale pe categorii"})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>{if(!D?.data?.topUsedMaterials||0===D.data.topUsedMaterials.length)return void alert("Nu există date pentru export");let a=new Blob(["\uFEFF"+["Cod Material,Denumire,Categorie,Consum Total,Valoare Totală,Consum Mediu",...D.data.topUsedMaterials.map(a=>[a.materialCode,a.materialName,a.category,a.totalConsumption.toFixed(2),a.totalValue.toFixed(2),a.averageConsumption.toFixed(2)]).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=URL.createObjectURL(a),b.download=`raport-utilizare-${C}-${B.toString().padStart(2,"0")}.csv`,b.click()},disabled:!D?.data?.topUsedMaterials||0===D.data.topUsedMaterials.length,children:[(0,b.jsx)(m.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Filtre"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Luna"}),(0,b.jsxs)(j.Select,{value:w,onValueChange:x,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selectează luna"})}),(0,b.jsx)(j.SelectContent,{children:v.map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Depozit"}),(0,b.jsxs)(j.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selectează depozitul"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate depozitele"}),A.map(a=>(0,b.jsx)(j.SelectItem,{value:String(a.id),children:a.name},a.id))]})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(t,{title:"Categorii Active",value:D?.summary?.totalCategories||0,icon:q,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-600",loading:E}),(0,b.jsx)(t,{title:"Materiale Utilizate",value:D?.summary?.totalMaterialsUsed||0,icon:o.Package,color:"bg-green-100 dark:bg-green-900/30 text-green-600",loading:E}),(0,b.jsx)(t,{title:"Consum Total",value:D?.summary?.totalConsumption||0,suffix:"unit.",icon:n.BarChart3,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-600",loading:E}),(0,b.jsx)(t,{title:"Valoare Totală",value:D?.summary?.totalValue||0,suffix:"RON",icon:p.DollarSign,color:"bg-amber-100 dark:bg-amber-900/30 text-amber-600",loading:E})]}),D?.summary?.period&&(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["Perioadă analizată: ",new Date(D.summary.period.start).toLocaleDateString("ro-RO")," - ",new Date(D.summary.period.end).toLocaleDateString("ro-RO")]})})}),E?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-[200px] w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-[400px] w-full"})]}):D?.data?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Consum pe Categorii"}),(0,b.jsx)(f.CardDescription,{children:"Distribuția consumului pe categorii de materiale"})]}),(0,b.jsx)(f.CardContent,{children:D.data.categoryBreakdown&&D.data.categoryBreakdown.length>0?(0,b.jsx)("div",{className:"space-y-4",children:D.data.categoryBreakdown.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:a.category}),(0,b.jsxs)("span",{className:"text-sm text-slate-500 ml-2",children:["(",a.itemCount," articole)"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"font-medium",children:a.totalConsumption.toFixed(2)}),(0,b.jsxs)("span",{className:"text-sm text-slate-500 ml-2",children:["(",a.percentOfTotal.toFixed(1),"%)"]})]})]}),(0,b.jsx)(u,{value:a.totalConsumption,max:F,color:"bg-blue-600"}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:["Valoare: ",a.totalValue.toFixed(2)," RON"]})]},a.category))}):(0,b.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există date pe categorii"})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Top Materiale Utilizate"}),(0,b.jsx)(f.CardDescription,{children:"Materialele cu cel mai mare consum"})]}),(0,b.jsx)(f.CardContent,{children:D.data.topUsedMaterials&&D.data.topUsedMaterials.length>0?(0,b.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{className:"w-12",children:"#"}),(0,b.jsx)(k.TableHead,{children:"Cod Material"}),(0,b.jsx)(k.TableHead,{children:"Denumire"}),(0,b.jsx)(k.TableHead,{children:"Categorie"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Consum Total"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Valoare"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Consum Mediu"}),(0,b.jsx)(k.TableHead,{className:"w-32",children:"Grafic"})]})}),(0,b.jsx)(k.TableBody,{children:D.data.topUsedMaterials.map((a,c)=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{children:c+1}),(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.materialCode}),(0,b.jsx)(k.TableCell,{children:a.materialName}),(0,b.jsx)(k.TableCell,{children:a.category}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.totalConsumption.toFixed(2)}),(0,b.jsxs)(k.TableCell,{className:"text-right",children:[a.totalValue.toFixed(2)," RON"]}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.averageConsumption.toFixed(2)}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(u,{value:a.totalConsumption,max:G,color:"bg-green-600"})})]},a.materialCode))})]})}):(0,b.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există date de utilizare"})})]})]}):(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(r.FileText,{className:"h-12 w-12 mx-auto text-slate-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nu există date"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nu au fost găsite date de utilizare pentru perioada selectată."})]})})]})}a.s(["default",()=>v],40079)}];

//# sourceMappingURL=app_frontend-next_2e5fb7b2._.js.map