module.exports=[74808,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(36305),f=a.i(54593),g=a.i(64725),h=a.i(21944),i=a.i(51710),j=a.i(92687),k=a.i(58287),l=a.i(46863),m=a.i(87561),n=a.i(62158),o=a.i(68886),p=a.i(42391),q=a.i(33836),r=a.i(1656),s=a.i(35168),t=a.i(85866),u=a.i(80049),v=a.i(30067),w=a.i(93473),x=a.i(52472),y=a.i(19787),z=a.i(19061),A=a.i(62186),B=a.i(38121);a.i(84332);var C=a.i(53048),D=a.i(87244),E=a.i(18187);let F={pending:{label:"În așteptare",variant:"secondary",icon:z.Clock},approved:{label:"Aprobat",variant:"outline",icon:A.CheckCircle},rejected:{label:"Respins",variant:"destructive",icon:B.XCircle},completed:{label:"Finalizat",variant:"default",icon:A.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:B.XCircle}};function G(){let a=(0,e.useRouter)(),z=(0,e.useSearchParams)(),G=z.get("tab"),[H,I]=c.useState("transfers"===G?"transfers":"materials");c.useEffect(()=>{let a=z.get("tab");("transfers"===a||"materials"===a)&&I(a)},[z]);let[J,K]=c.useState({page:1,pageSize:10,sortBy:"name",sortOrder:"asc"}),[L,M]=c.useState(""),[N,O]=c.useState(!1),[P,Q]=c.useState(null),[R,S]=c.useState({page:1,pageSize:10,sortBy:"requestedAt",sortOrder:"desc"}),{data:T,isLoading:U}=(0,C.useMaterials)(J),{data:V,isLoading:W}=(0,C.useTransferRequests)(R),{data:X}=(0,C.useLowStockMaterials)(),{data:Y}=(0,C.useWarehouses)(),Z=(0,C.useDeleteMaterial)(),$=(0,C.useUpdateTransferStatus)(),_=c.useMemo(()=>V?.data?V.data.map(a=>"transferRequest"in a?{...a.transferRequest,sourceWarehouse:a.sourceWarehouse,destinationWarehouse:a.destinationWarehouse,destinationVehicle:a.destinationVehicle}:a):[],[V]),aa=()=>{K(a=>({...a,search:L,page:1}))},ab=(a,b)=>{K(c=>({...c,[a]:b,page:1}))},ac=async()=>{P&&(await Z.mutateAsync(P),Q(null))},ad=async(a,b)=>{await $.mutateAsync({id:a,status:b})},ae=a=>null===a?"-":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON",maximumFractionDigits:0}).format(a),af=[{accessorKey:"materialCode",header:"Cod",cell:({row:a})=>(0,b.jsx)(d.default,{href:`/warehouse/materials/${a.original.id}`,className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:a.original.materialCode})},{accessorKey:"name",header:"Denumire",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.original.name}),a.original.description&&(0,b.jsx)("span",{className:"text-xs text-slate-500 truncate max-w-[200px]",children:a.original.description})]})},{accessorKey:"warehouse",header:"Depozit",cell:({row:a})=>a.original.warehouse?.name||"-"},{accessorKey:"currentStock",header:"Stoc",cell:({row:a})=>{let c=a.original.criticalLevel&&a.original.currentStock<=a.original.criticalLevel;return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:c?"text-red-600 font-medium":"",children:[a.original.currentStock," ",a.original.unit?.abbreviation||"buc"]}),c&&(0,b.jsx)(w.AlertTriangle,{className:"h-4 w-4 text-red-600"})]})}},{accessorKey:"standardPrice",header:"Preț",cell:({row:a})=>ae(a.original.standardPrice)},{accessorKey:"isActive",header:"Status",cell:({row:a})=>(0,b.jsx)(h.Badge,{variant:a.original.isActive?"default":"secondary",children:a.original.isActive?"Activ":"Inactiv"})},{id:"actions",cell:({row:c})=>(0,b.jsxs)(m.DropdownMenu,{children:[(0,b.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(m.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(m.DropdownMenuLabel,{children:"Acțiuni"}),(0,b.jsx)(m.DropdownMenuSeparator,{}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>a.push(`/warehouse/materials/${c.original.id}`),children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizează"]}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>a.push(`/warehouse/materials/${c.original.id}/edit`),children:[(0,b.jsx)(t.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]}),(0,b.jsx)(m.DropdownMenuSeparator,{}),(0,b.jsxs)(m.DropdownMenuItem,{className:"text-red-600",onClick:()=>Q(c.original.id),children:[(0,b.jsx)(u.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}],ag=[{accessorKey:"requestNumber",header:"Nr. cerere",cell:({row:a})=>(0,b.jsx)(d.default,{href:`/warehouse/transfers/${a.original.id}`,className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:a.original.requestNumber})},{accessorKey:"sourceWarehouse",header:"De la",cell:({row:a})=>a.original.sourceWarehouse?.name||"-"},{accessorKey:"destination",header:"Către",cell:({row:a})=>a.original.destinationWarehouse?.name||a.original.destinationVehicle?.licensePlate||"-"},{accessorKey:"status",header:"Status",cell:({row:a})=>{let c=F[a.original.status]||F.pending,d=c.icon;return(0,b.jsxs)(h.Badge,{variant:c.variant,className:"gap-1",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),c.label]})}},{accessorKey:"requestedAt",header:"Data cererii",cell:({row:a})=>a.original.requestedAt?(0,D.format)(new Date(a.original.requestedAt),"dd MMM yyyy",{locale:E.ro}):"-"},{id:"actions",cell:({row:c})=>(0,b.jsxs)(m.DropdownMenu,{children:[(0,b.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(m.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(m.DropdownMenuLabel,{children:"Acțiuni"}),(0,b.jsx)(m.DropdownMenuSeparator,{}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>a.push(`/warehouse/transfers/${c.original.id}`),children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizează"]}),"pending"===c.original.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.DropdownMenuSeparator,{}),(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>ad(c.original.id,"approved"),children:[(0,b.jsx)(A.CheckCircle,{className:"mr-2 h-4 w-4 text-green-600"}),"Aprobă"]}),(0,b.jsxs)(m.DropdownMenuItem,{className:"text-red-600",onClick:()=>ad(c.original.id,"rejected"),children:[(0,b.jsx)(B.XCircle,{className:"mr-2 h-4 w-4"}),"Respinge"]})]})]})]})}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Gestiune depozit"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează materialele și cererile de transfer"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/warehouse/transfers/new",children:[(0,b.jsx)(y.ArrowRightLeft,{className:"mr-2 h-4 w-4"}),"Cerere transfer"]})}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(d.default,{href:"/warehouse/materials/new",children:[(0,b.jsx)(o.Plus,{className:"mr-2 h-4 w-4"}),"Material nou"]})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,b.jsx)(v.Package,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Total materiale"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:T?.pagination?.totalItems||0})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-red-100 p-3 dark:bg-red-900/30",children:(0,b.jsx)(w.AlertTriangle,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Stoc critic"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:X?.length||0})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,b.jsx)(x.DollarSign,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Valoare totală"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:ae(T?.data?.reduce((a,b)=>a+(b.currentStock||0)*(b.standardPrice||0),0)||0)})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,b.jsx)(y.ArrowRightLeft,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Transferuri în așteptare"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:_.filter(a=>"pending"===a.status).length||0})]})]})})})]}),(0,b.jsxs)(k.Tabs,{value:H,onValueChange:b=>{I(b),a.push(`/warehouse?tab=${b}`,{scroll:!1})},children:[(0,b.jsxs)(k.TabsList,{children:[(0,b.jsxs)(k.TabsTrigger,{value:"materials",children:[(0,b.jsx)(v.Package,{className:"mr-2 h-4 w-4"}),"Materiale"]}),(0,b.jsxs)(k.TabsTrigger,{value:"transfers",children:[(0,b.jsx)(y.ArrowRightLeft,{className:"mr-2 h-4 w-4"}),"Transferuri"]})]}),(0,b.jsxs)(k.TabsContent,{value:"materials",className:"space-y-4",children:[(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Caută după cod, denumire...",value:L,onChange:a=>M(a.target.value),onKeyDown:a=>"Enter"===a.key&&aa(),className:"pl-10"})]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>O(!N),children:[(0,b.jsx)(q.Filter,{className:"mr-2 h-4 w-4"}),"Filtre"]}),(0,b.jsx)(f.Button,{onClick:aa,children:"Caută"})]}),N&&(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)(j.Select,{value:J.warehouseId?.toString()||"_all",onValueChange:a=>ab("warehouseId","_all"!==a?parseInt(a):void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate depozitele"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"_all",children:"Toate depozitele"}),Y?.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsxs)(j.Select,{value:J.lowStock?.toString()||"_all",onValueChange:a=>ab("lowStock","true"===a||void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate stocurile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"_all",children:"Toate stocurile"}),(0,b.jsx)(j.SelectItem,{value:"true",children:"Doar stoc critic"})]})]})]})]})})}),(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Lista materiale"}),(0,b.jsxs)(i.CardDescription,{children:[T?.pagination.totalItems||0," materiale înregistrate"]})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(n.DataTable,{columns:af,data:T?.data||[],loading:U,searchPlaceholder:"Caută după cod, denumire...",serverSide:!0,totalItems:T?.pagination.totalItems,currentPage:J.page||1,pageSize:J.pageSize||10,onPageChange:a=>K(b=>({...b,page:a})),onPageSizeChange:a=>K(b=>({...b,pageSize:a,page:1})),onSearchChange:a=>K(b=>({...b,search:a,page:1})),onSortChange:(a,b)=>K(c=>({...c,sortBy:a,sortOrder:b}))})})]})]}),(0,b.jsx)(k.TabsContent,{value:"transfers",className:"space-y-4",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Cereri de transfer"}),(0,b.jsxs)(i.CardDescription,{children:[V?.pagination.totalItems||0," cereri înregistrate"]})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(n.DataTable,{columns:ag,data:_,loading:W,searchPlaceholder:"Caută după nr. cerere...",serverSide:!0,totalItems:V?.pagination.totalItems,currentPage:R.page||1,pageSize:R.pageSize||10,onPageChange:a=>S(b=>({...b,page:a})),onPageSizeChange:a=>S(b=>({...b,pageSize:a,page:1})),onSearchChange:a=>S(b=>({...b,search:a,page:1})),onSortChange:(a,b)=>S(c=>({...c,sortBy:a,sortOrder:b}))})})]})})]}),(0,b.jsx)(l.AlertDialog,{open:!!P,onOpenChange:()=>Q(null),children:(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsx)(l.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi acest material?"}),(0,b.jsx)(l.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Materialul va fi marcat ca inactiv."})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Anulează"}),(0,b.jsx)(l.AlertDialogAction,{onClick:ac,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}a.s(["default",()=>G])}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_warehouse_page_tsx_3faf8bbb._.js.map