module.exports=[70991,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(36305),f=a.i(54593),g=a.i(64725),h=a.i(21944),i=a.i(51710),j=a.i(92687),k=a.i(46863),l=a.i(87561),m=a.i(62158),n=a.i(68886),o=a.i(42391),p=a.i(33836),q=a.i(1656),r=a.i(35168),s=a.i(85866),t=a.i(80049),u=a.i(55665),v=a.i(19061),w=a.i(62186),x=a.i(38121),y=a.i(46811),z=a.i(52472);a.i(84332);var A=a.i(54092),B=a.i(52170),C=a.i(87244),D=a.i(18187);let E={pending:{label:"În așteptare",variant:"secondary",icon:v.Clock},scheduled:{label:"Programat",variant:"outline",icon:y.Calendar},in_progress:{label:"În lucru",variant:"default",icon:u.Wrench},completed:{label:"Finalizat",variant:"default",icon:w.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:x.XCircle}},F={1:{label:"Scăzută",color:"text-slate-500"},2:{label:"Normală",color:"text-blue-500"},3:{label:"Ridicată",color:"text-amber-500"},4:{label:"Urgentă",color:"text-red-500"}};function G(){let a=(0,e.useRouter)(),[x,y]=c.useState({page:1,pageSize:10,sortBy:"scheduledDate",sortOrder:"desc"}),[G,H]=c.useState(""),[I,J]=c.useState(!1),[K,L]=c.useState(null),{data:M,isLoading:N}=(0,A.useMaintenanceWorkOrders)(x),{data:O}=(0,A.useMaintenanceStats)(),{data:P}=(0,B.useVehicles)({pageSize:1e3}),{data:Q}=(0,A.useMaintenanceTypes)(),R=(0,A.useDeleteMaintenanceWorkOrder)(),S=P?.data||[],T=()=>{y(a=>({...a,search:G,page:1}))},U=(a,b)=>{y(c=>({...c,[a]:b||void 0,page:1}))},V=async()=>{K&&(await R.mutateAsync(K),L(null))},W=a=>null===a?"-":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON",maximumFractionDigits:0}).format(a),X=[{accessorKey:"workOrderNumber",header:"Nr. comandă",cell:({row:a})=>(0,b.jsx)(d.default,{href:`/maintenance/${a.original.id}`,className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:a.original.workOrderNumber})},{accessorKey:"vehicle",header:"Vehicul",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.original.vehicle?.licensePlate}),(0,b.jsx)("span",{className:"text-xs text-slate-500",children:a.original.vehicle?.vehicleCode})]})},{accessorKey:"maintenanceType",header:"Tip mentenanță",cell:({row:a})=>a.original.maintenanceType?.name||"-"},{accessorKey:"status",header:"Status",cell:({row:a})=>{let c=E[a.original.status]||E.pending,d=c.icon;return(0,b.jsxs)(h.Badge,{variant:c.variant,className:"gap-1",children:[(0,b.jsx)(d,{className:"h-3 w-3"}),c.label]})}},{accessorKey:"priority",header:"Prioritate",cell:({row:a})=>{let c=F[a.original.priority]||F[2];return(0,b.jsx)("span",{className:`font-medium ${c.color}`,children:c.label})}},{accessorKey:"scheduledDate",header:"Data programată",cell:({row:a})=>a.original.scheduledDate?(0,C.format)(new Date(a.original.scheduledDate),"dd MMM yyyy",{locale:D.ro}):"-"},{accessorKey:"estimatedCost",header:"Cost estimat",cell:({row:a})=>W(a.original.estimatedCost)},{accessorKey:"actualCost",header:"Cost real",cell:({row:a})=>W(a.original.actualCost)},{id:"actions",cell:({row:c})=>(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(q.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(l.DropdownMenuLabel,{children:"Acțiuni"}),(0,b.jsx)(l.DropdownMenuSeparator,{}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>a.push(`/maintenance/${c.original.id}`),children:[(0,b.jsx)(r.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizează"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>a.push(`/maintenance/${c.original.id}/edit`),children:[(0,b.jsx)(s.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]}),(0,b.jsx)(l.DropdownMenuSeparator,{}),(0,b.jsxs)(l.DropdownMenuItem,{className:"text-red-600",onClick:()=>L(c.original.id),children:[(0,b.jsx)(t.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Mentenanță"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează comenzile de lucru și istoricul mentenanței"})]}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(d.default,{href:"/maintenance/new",children:[(0,b.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"Comandă nouă"]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,b.jsx)(u.Wrench,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Total comenzi"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:O?.totalWorkOrders||0})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,b.jsx)(v.Clock,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"În așteptare"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:O?.pendingWorkOrders||0})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,b.jsx)(w.CheckCircle,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Finalizate"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:O?.completedWorkOrders||0})]})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-purple-100 p-3 dark:bg-purple-900/30",children:(0,b.jsx)(z.DollarSign,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Cost total"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:W(O?.totalCost||0)})]})]})})})]}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Caută după nr. comandă, vehicul...",value:G,onChange:a=>H(a.target.value),onKeyDown:a=>"Enter"===a.key&&T(),className:"pl-10"})]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>J(!I),children:[(0,b.jsx)(p.Filter,{className:"mr-2 h-4 w-4"}),"Filtre"]}),(0,b.jsx)(f.Button,{onClick:T,children:"Caută"})]}),I&&(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(j.Select,{value:x.vehicleId?.toString()||"all",onValueChange:a=>U("vehicleId","all"!==a?parseInt(a):void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate vehiculele"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate vehiculele"}),S.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.licensePlate},a.id))]})]}),(0,b.jsxs)(j.Select,{value:x.maintenanceTypeId?.toString()||"all",onValueChange:a=>U("maintenanceTypeId","all"!==a?parseInt(a):void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate tipurile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate tipurile"}),Q?.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsxs)(j.Select,{value:x.status||"all",onValueChange:a=>U("status","all"!==a?a:void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate statusurile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate statusurile"}),(0,b.jsx)(j.SelectItem,{value:"pending",children:"În așteptare"}),(0,b.jsx)(j.SelectItem,{value:"scheduled",children:"Programat"}),(0,b.jsx)(j.SelectItem,{value:"in_progress",children:"În lucru"}),(0,b.jsx)(j.SelectItem,{value:"completed",children:"Finalizat"}),(0,b.jsx)(j.SelectItem,{value:"cancelled",children:"Anulat"})]})]}),(0,b.jsxs)(j.Select,{value:x.priority?.toString()||"all",onValueChange:a=>U("priority","all"!==a?parseInt(a):void 0),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate prioritățile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate prioritățile"}),(0,b.jsx)(j.SelectItem,{value:"1",children:"Scăzută"}),(0,b.jsx)(j.SelectItem,{value:"2",children:"Normală"}),(0,b.jsx)(j.SelectItem,{value:"3",children:"Ridicată"}),(0,b.jsx)(j.SelectItem,{value:"4",children:"Urgentă"})]})]})]})]})})}),(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Lista comenzilor de lucru"}),(0,b.jsxs)(i.CardDescription,{children:[M?.pagination.totalItems||0," comenzi înregistrate"]})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(m.DataTable,{columns:X,data:M?.data||[],loading:N,searchPlaceholder:"Caută după nr. comandă, vehicul...",serverSide:!0,totalItems:M?.pagination.totalItems,currentPage:x.page||1,pageSize:x.pageSize||10,onPageChange:a=>y(b=>({...b,page:a})),onPageSizeChange:a=>y(b=>({...b,pageSize:a,page:1})),onSearchChange:a=>y(b=>({...b,search:a,page:1})),onSortChange:(a,b)=>y(c=>({...c,sortBy:a,sortOrder:b}))})})]}),(0,b.jsx)(k.AlertDialog,{open:!!K,onOpenChange:()=>L(null),children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi această comandă?"}),(0,b.jsx)(k.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Comanda de lucru va fi ștearsă definitiv."})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"Anulează"}),(0,b.jsx)(k.AlertDialogAction,{onClick:V,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}a.s(["default",()=>G])}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_maintenance_page_tsx_1accd096._.js.map