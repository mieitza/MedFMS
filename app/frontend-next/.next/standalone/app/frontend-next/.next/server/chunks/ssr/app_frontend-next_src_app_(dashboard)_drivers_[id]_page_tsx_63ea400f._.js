module.exports=[87090,a=>{"use strict";var b=a.i(3236),c=a.i(36305),d=a.i(52790),e=a.i(98544),f=a.i(54593),g=a.i(21944),h=a.i(51710),i=a.i(58287),j=a.i(94123),k=a.i(26528),l=a.i(46863),m=a.i(96988),n=a.i(85866),o=a.i(80049),p=a.i(15505),q=a.i(46811),r=a.i(31450),s=a.i(25035),t=a.i(32363),u=a.i(89719),v=a.i(4393),w=a.i(14874),x=a.i(59489),y=a.i(77701),z=a.i(93473),A=a.i(27686),B=a.i(42822);a.i(84332);var C=a.i(10192);a.i(50582);var D=a.i(65442),E=a.i(62416),F=a.i(16486),G=a.i(37071),H=a.i(87244),I=a.i(78505),J=a.i(18187),K=a.i(92729);function L(){let a=(0,c.useParams)(),j=(0,c.useRouter)(),L=a.id?parseInt(a.id):null,{data:O,isLoading:P,isError:Q}=(0,C.useDriver)(L),R=(0,C.useDeleteDriver)(),{data:S}=(0,e.useQuery)({queryKey:["fuel","driver",L],queryFn:()=>D.fuelApi.getAll({driverId:L,pageSize:10}),enabled:!!L}),{data:T}=(0,e.useQuery)({queryKey:["vehicles","driver",L],queryFn:()=>E.vehiclesApi.getAll({pageSize:100}),enabled:!!L}),U=async()=>{L&&(await R.mutateAsync(L),j.push("/drivers"))};if(P)return(0,b.jsx)(N,{});if(Q||!O)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(p.User,{className:"mb-4 h-12 w-12 text-slate-400"}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Șoferul nu a fost găsit"}),(0,b.jsx)("p",{className:"mb-4 text-sm text-slate-500",children:"Este posibil ca șoferul să fi fost șters sau să nu aveți acces."}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>j.push("/drivers"),children:[(0,b.jsx)(m.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Înapoi la listă"]})]});let V=a=>a?(0,H.format)(new Date(a),"dd MMMM yyyy",{locale:J.ro}):"-",W=O.licenseExpiryDate?(0,I.differenceInDays)(new Date(O.licenseExpiryDate),new Date):null,X=null!==W&&W<=30&&W>0,Y=null!==W&&W<0,Z=S?.data||[],$=new Set(Z.map(a=>a.vehicleId).filter(Boolean)),_=T?.data.filter(a=>$.has(a.id))||[];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>j.back(),children:(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:(0,b.jsx)(p.User,{className:"h-8 w-8 text-slate-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:[O.lastName," ",O.firstName]}),(0,b.jsx)(g.Badge,{variant:O.isActive?"default":"secondary",children:O.isActive?"Activ":"Inactiv"})]}),(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["Permis: ",O.licenseNumber," ",O.licenseType&&`(${O.licenseType})`]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)(d.default,{href:`/drivers/${O.id}/edit`,children:[(0,b.jsx)(n.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]})}),(0,b.jsxs)(l.AlertDialog,{children:[(0,b.jsx)(l.AlertDialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",className:"text-red-600 hover:text-red-700",children:[(0,b.jsx)(o.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})}),(0,b.jsxs)(l.AlertDialogContent,{children:[(0,b.jsxs)(l.AlertDialogHeader,{children:[(0,b.jsx)(l.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi acest șofer?"}),(0,b.jsx)(l.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Șoferul va fi marcat ca inactiv."})]}),(0,b.jsxs)(l.AlertDialogFooter,{children:[(0,b.jsx)(l.AlertDialogCancel,{children:"Anulează"}),(0,b.jsx)(l.AlertDialogAction,{onClick:U,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})]})]})]}),(X||Y)&&(0,b.jsx)(h.Card,{className:(0,K.cn)("border-2",Y?"border-red-200 bg-red-50 dark:border-red-900/50 dark:bg-red-900/20":"border-amber-200 bg-amber-50 dark:border-amber-900/50 dark:bg-amber-900/20"),children:(0,b.jsxs)(h.CardContent,{className:"flex items-center gap-4 pt-6",children:[(0,b.jsx)(z.AlertTriangle,{className:(0,K.cn)("h-8 w-8",Y?"text-red-600":"text-amber-600")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,K.cn)("font-semibold",Y?"text-red-800 dark:text-red-200":"text-amber-800 dark:text-amber-200"),children:Y?"Permisul de conducere a expirat!":`Permisul de conducere expiră \xeen ${W} zile`}),(0,b.jsxs)("p",{className:(0,K.cn)("text-sm",Y?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300"),children:["Data expirării: ",V(O.licenseExpiryDate)]})]})]})}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,b.jsx)(y.CreditCard,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nr. permis"}),(0,b.jsx)("p",{className:"text-lg font-semibold font-mono",children:O.licenseNumber})]})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Angajat din"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:V(O.hireDate)})]})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-purple-100 p-3 dark:bg-purple-900/30",children:(0,b.jsx)(u.Building,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Departament"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:O.department?.name||"-"})]})]})})}),(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,b.jsx)(t.MapPin,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Oraș"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:O.city?.name||"-"})]})]})})})]}),(0,b.jsxs)(i.Tabs,{defaultValue:"details",className:"space-y-4",children:[(0,b.jsxs)(i.TabsList,{children:[(0,b.jsxs)(i.TabsTrigger,{value:"details",children:[(0,b.jsx)(p.User,{className:"mr-2 h-4 w-4"}),"Detalii"]}),(0,b.jsxs)(i.TabsTrigger,{value:"documents",children:[(0,b.jsx)(v.FileText,{className:"mr-2 h-4 w-4"}),"Documente"]}),(0,b.jsxs)(i.TabsTrigger,{value:"photos",children:[(0,b.jsx)(A.ImageIcon,{className:"mr-2 h-4 w-4"}),"Fotografii"]}),(0,b.jsxs)(i.TabsTrigger,{value:"vehicles",children:[(0,b.jsx)(w.Car,{className:"mr-2 h-4 w-4"}),"Vehicule"]}),(0,b.jsxs)(i.TabsTrigger,{value:"fuel",children:[(0,b.jsx)(x.Fuel,{className:"mr-2 h-4 w-4"}),"Alimentări"]})]}),(0,b.jsxs)(i.TabsContent,{value:"details",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Informații personale"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsx)(M,{label:"Nume",value:O.lastName}),(0,b.jsx)(M,{label:"Prenume",value:O.firstName}),(0,b.jsx)(M,{label:"CNP",value:O.idNumber}),(0,b.jsx)(M,{label:"Data nașterii",value:V(O.dateOfBirth)}),(0,b.jsx)(M,{label:"Oraș",value:O.city?.name}),(0,b.jsx)(M,{label:"Adresă",value:O.address})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Contact"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsx)(M,{label:"Telefon fix",value:O.phoneNumber,icon:(0,b.jsx)(r.Phone,{className:"h-4 w-4"})}),(0,b.jsx)(M,{label:"Mobil",value:O.mobileNumber,icon:(0,b.jsx)(r.Phone,{className:"h-4 w-4"})}),(0,b.jsx)(M,{label:"Email",value:O.email,icon:(0,b.jsx)(s.Mail,{className:"h-4 w-4"})}),(0,b.jsx)(M,{label:"Contact urgență",value:O.emergencyContactName}),(0,b.jsx)(M,{label:"Tel. urgență",value:O.emergencyContactPhone})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Permis de conducere"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsx)(M,{label:"Nr. permis",value:O.licenseNumber}),(0,b.jsx)(M,{label:"Categorie",value:O.licenseType}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-slate-500",children:"Data expirării"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:(0,K.cn)("text-sm font-medium",Y&&"text-red-600",X&&"text-amber-600"),children:V(O.licenseExpiryDate)}),Y&&(0,b.jsx)(g.Badge,{variant:"destructive",className:"text-xs",children:"Expirat"}),X&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"border-amber-500 text-amber-600 text-xs",children:[W," zile"]})]})]})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Informații angajare"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsx)(M,{label:"Data angajării",value:V(O.hireDate)}),(0,b.jsx)(M,{label:"Data încetării",value:V(O.terminationDate)}),(0,b.jsx)(M,{label:"Departament",value:O.department?.name})]})]})]}),O.notes&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Notițe"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:O.notes})})]})]}),(0,b.jsx)(i.TabsContent,{value:"documents",children:(0,b.jsx)(F.DocumentManager,{entityType:"driver",entityId:O.id,title:"Documente șofer",description:"Documente asociate acestui șofer (Permis, Carte identitate, Atestate, etc.)"})}),(0,b.jsx)(i.TabsContent,{value:"photos",children:(0,b.jsx)(G.PhotoManager,{entityType:"driver",entityId:O.id,title:"Fotografii șofer",description:"Fotografii ale șoferului"})}),(0,b.jsx)(i.TabsContent,{value:"vehicles",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Vehicule conduse"}),(0,b.jsx)(h.CardDescription,{children:"Vehicule pe care acest șofer le-a condus (bazat pe alimentări)"})]}),(0,b.jsx)(h.CardContent,{children:0===_.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-500",children:[(0,b.jsx)(w.Car,{className:"mb-2 h-8 w-8"}),(0,b.jsx)("p",{children:"Nu există vehicule asociate"})]}):(0,b.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Nr. înmatriculare"}),(0,b.jsx)(k.TableHead,{children:"Marca"}),(0,b.jsx)(k.TableHead,{children:"Model"}),(0,b.jsx)(k.TableHead,{children:"Status"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Acțiuni"})]})}),(0,b.jsx)(k.TableBody,{children:_.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.licensePlate}),(0,b.jsx)(k.TableCell,{children:a.brand?.name||"-"}),(0,b.jsx)(k.TableCell,{children:a.model?.name||"-"}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(g.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Activ":"Inactiv"})}),(0,b.jsx)(k.TableCell,{className:"text-right",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(d.default,{href:`/vehicles/${a.id}`,children:(0,b.jsx)(B.ExternalLink,{className:"h-4 w-4"})})})})]},a.id))})]})})})]})}),(0,b.jsx)(i.TabsContent,{value:"fuel",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Istoric alimentări"}),(0,b.jsx)(h.CardDescription,{children:"Tranzacții de alimentare efectuate de acest șofer"})]}),(0,b.jsxs)(h.CardContent,{children:[0===Z.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-500",children:[(0,b.jsx)(x.Fuel,{className:"mb-2 h-8 w-8"}),(0,b.jsx)("p",{children:"Nu există înregistrări de alimentări"})]}):(0,b.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Data"}),(0,b.jsx)(k.TableHead,{children:"Vehicul"}),(0,b.jsx)(k.TableHead,{children:"Tip combustibil"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Cantitate (L)"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Cost (RON)"})]})}),(0,b.jsx)(k.TableBody,{children:Z.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{children:(0,H.format)(new Date(a.transactionDate),"dd MMM yyyy",{locale:J.ro})}),(0,b.jsx)(k.TableCell,{children:a.vehicle?.licensePlate||"-"}),(0,b.jsx)(k.TableCell,{children:a.fuelType?.name||"-"}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.quantity.toFixed(2)}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.totalCost?.toFixed(2)||"-"})]},a.id))})]})}),Z.length>0&&(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)(f.Button,{variant:"link",asChild:!0,children:(0,b.jsx)(d.default,{href:`/fuel?driverId=${O.id}`,children:"Vezi toate tranzacțiile"})})})]})]})})]})]})}function M({label:a,value:c,icon:d}){return(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d,a]}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:c||"-"})]})}function N(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-10 w-10"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-16 w-16 rounded-full"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-32"})]})]})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-12 w-12 rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(j.Skeleton,{className:"h-6 w-24"})]})]})})},c))}),(0,b.jsx)(j.Skeleton,{className:"h-10 w-full max-w-md"}),(0,b.jsx)("div",{className:"grid gap-4 lg:grid-cols-2",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(j.Skeleton,{className:"h-6 w-40"})}),(0,b.jsx)(h.CardContent,{className:"space-y-4",children:Array.from({length:5}).map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-32"})]},c))})]},c))})]})}a.s(["default",()=>L])}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_drivers_%5Bid%5D_page_tsx_63ea400f._.js.map