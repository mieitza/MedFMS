module.exports=[53048,a=>{"use strict";var b=a.i(98544),c=a.i(73248),d=a.i(13942),e=a.i(25181),f=a.i(61335);let g={all:["warehouse"],materials:()=>[...g.all,"materials"],materialsList:a=>[...g.materials(),"list",a],materialDetail:a=>[...g.materials(),"detail",a],transfers:()=>[...g.all,"transfers"],transfersList:a=>[...g.transfers(),"list",a],transferDetail:a=>[...g.transfers(),"detail",a],stats:()=>[...g.all,"stats"],warehouses:["warehouses"],warehouseDetail:a=>["warehouses","detail",a],materialUnits:["materialUnits"],materialCategories:["materialCategories"]};function h(a={}){return(0,b.useQuery)({queryKey:g.materialsList(a),queryFn:()=>e.warehouseApi.getMaterials(a),placeholderData:a=>a})}function i(a){return(0,b.useQuery)({queryKey:g.materialDetail(a),queryFn:()=>e.warehouseApi.getMaterialById(a),enabled:!!a})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.warehouseApi.createMaterial(a),onSuccess:()=>{a.invalidateQueries({queryKey:g.materials()}),a.invalidateQueries({queryKey:g.stats()}),f.toast.success("Materialul a fost creat cu succes")},onError:a=>{f.toast.error(`Eroare la crearea materialului: ${a.message}`)}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.warehouseApi.updateMaterial(a,b),onSuccess:b=>{a.invalidateQueries({queryKey:g.materials()}),a.invalidateQueries({queryKey:g.materialDetail(b.id)}),a.invalidateQueries({queryKey:g.stats()}),f.toast.success("Materialul a fost actualizat cu succes")},onError:a=>{f.toast.error(`Eroare la actualizarea materialului: ${a.message}`)}})}function l(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.warehouseApi.deleteMaterial(a),onSuccess:()=>{a.invalidateQueries({queryKey:g.materials()}),a.invalidateQueries({queryKey:g.stats()}),f.toast.success("Materialul a fost șters cu succes")},onError:a=>{f.toast.error(`Eroare la ștergerea materialului: ${a.message}`)}})}function m(a={}){return(0,b.useQuery)({queryKey:g.transfersList(a),queryFn:()=>e.warehouseApi.getTransferRequests(a),placeholderData:a=>a})}function n(a){return(0,b.useQuery)({queryKey:g.transferDetail(a),queryFn:()=>e.warehouseApi.getTransferRequestById(a),enabled:!!a})}function o(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.warehouseApi.createTransferRequest(a),onSuccess:()=>{a.invalidateQueries({queryKey:g.transfers()}),a.invalidateQueries({queryKey:g.stats()}),f.toast.success("Cererea de transfer a fost creată cu succes")},onError:a=>{f.toast.error(`Eroare la crearea cererii: ${a.message}`)}})}function p(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,status:b})=>e.warehouseApi.updateTransferStatus(a,b),onSuccess:b=>{a.invalidateQueries({queryKey:g.transfers()}),a.invalidateQueries({queryKey:g.transferDetail(b.id)}),a.invalidateQueries({queryKey:g.stats()}),a.invalidateQueries({queryKey:g.materials()}),f.toast.success("Statusul cererii a fost actualizat")},onError:a=>{f.toast.error(`Eroare la actualizarea statusului: ${a.message}`)}})}function q(){return(0,b.useQuery)({queryKey:[...g.all,"lowStock"],queryFn:()=>e.warehouseApi.getLowStockMaterials()})}function r(){return(0,b.useQuery)({queryKey:g.warehouses,queryFn:()=>e.warehouseApi.getWarehouses(),staleTime:6e5})}function s(a){return(0,b.useQuery)({queryKey:g.warehouseDetail(a),queryFn:()=>e.warehouseApi.getWarehouseById(a),enabled:!!a})}function t(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.warehouseApi.updateWarehouse(a,b),onSuccess:b=>{a.invalidateQueries({queryKey:g.warehouses}),a.invalidateQueries({queryKey:g.warehouseDetail(b.id)}),f.toast.success("Depozitul a fost actualizat cu succes")},onError:a=>{f.toast.error(`Eroare la actualizarea depozitului: ${a.message}`)}})}function u(){return(0,b.useQuery)({queryKey:g.materialUnits,queryFn:()=>e.warehouseApi.getMaterialUnits(),staleTime:6e5})}a.s(["useCreateMaterial",()=>j,"useCreateTransferRequest",()=>o,"useDeleteMaterial",()=>l,"useLowStockMaterials",()=>q,"useMaterial",()=>i,"useMaterialUnits",()=>u,"useMaterials",()=>h,"useTransferRequest",()=>n,"useTransferRequests",()=>m,"useUpdateMaterial",()=>k,"useUpdateTransferStatus",()=>p,"useUpdateWarehouse",()=>t,"useWarehouse",()=>s,"useWarehouses",()=>r])},80049,a=>{"use strict";let b=(0,a.i(82530).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],80049)},22697,a=>{"use strict";let b=(0,a.i(82530).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],22697)},96988,a=>{"use strict";let b=(0,a.i(82530).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],96988)},9307,a=>{"use strict";var b=a.i(3236),c=a.i(91485);a.i(19232);var d=a.i(30833),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(92729);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],9307)},30647,a=>{"use strict";var b=a.i(3236),c=a.i(92729);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},93631,a=>{"use strict";var b=a.i(3236),c=a.i(36305),d=a.i(91894),e=a.i(34763),f=a.i(9635),g=a.i(54593),h=a.i(64725),i=a.i(30647),j=a.i(29162),k=a.i(92687),l=a.i(51710),m=a.i(96988),n=a.i(22697),o=a.i(92402),p=a.i(68886),q=a.i(80049);a.i(84332);var r=a.i(53048),s=a.i(52170);let t=f.z.object({sourceWarehouseId:f.z.coerce.number().optional().nullable(),destinationWarehouseId:f.z.coerce.number().optional().nullable(),destinationVehicleId:f.z.coerce.number().optional().nullable(),notes:f.z.string().optional().nullable(),items:f.z.array(f.z.object({materialId:f.z.coerce.number().min(1,"Materialul este obligatoriu"),quantity:f.z.coerce.number().min(.01,"Cantitatea trebuie să fie mai mare decât 0")})).min(1,"Trebuie să adăugați cel puțin un material")});function u(){let a=(0,c.useRouter)(),f=(0,r.useCreateTransferRequest)(),{data:u,isLoading:v}=(0,r.useWarehouses)(),{data:w,isLoading:x}=(0,r.useMaterials)({pageSize:1e3}),{data:y,isLoading:z}=(0,s.useVehicles)({pageSize:1e3}),A=w?.data||[],B=y?.data||[],C=(0,d.useForm)({resolver:(0,e.zodResolver)(t),defaultValues:{sourceWarehouseId:null,destinationWarehouseId:null,destinationVehicleId:null,notes:null,items:[{materialId:0,quantity:1}]}}),{fields:D,append:E,remove:F}=(0,d.useFieldArray)({control:C.control,name:"items"}),G=async b=>{await f.mutateAsync({sourceWarehouseId:b.sourceWarehouseId||null,destinationWarehouseId:b.destinationWarehouseId||null,destinationVehicleId:b.destinationVehicleId||null,notes:b.notes||null,items:b.items}),a.push("/warehouse?tab=transfers")},H=f.isPending;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>a.back(),children:(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Cerere de transfer nouă"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Creează o cerere pentru transferul materialelor"})]})]}),(0,b.jsx)(j.Form,{...C,children:(0,b.jsxs)("form",{onSubmit:C.handleSubmit(G),className:"space-y-6",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Detalii transfer"}),(0,b.jsx)(l.CardDescription,{children:"Specificați sursa și destinația transferului"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(j.FormField,{control:C.control,name:"sourceWarehouseId",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Depozit sursă"}),(0,b.jsxs)(k.Select,{onValueChange:b=>a.onChange("none"===b?null:parseInt(b)),value:a.value?.toString()||"none",disabled:v,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selectează depozitul sursă"})})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"Niciun depozit"}),u?.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:C.control,name:"destinationWarehouseId",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Depozit destinație"}),(0,b.jsxs)(k.Select,{onValueChange:b=>a.onChange("none"===b?null:parseInt(b)),value:a.value?.toString()||"none",disabled:v,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selectează depozitul destinație"})})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"Niciun depozit"}),u?.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsx)(j.FormDescription,{children:"Sau selectați un vehicul mai jos"}),(0,b.jsx)(j.FormMessage,{})]})})]}),(0,b.jsx)(j.FormField,{control:C.control,name:"destinationVehicleId",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Vehicul destinație (alternativ)"}),(0,b.jsxs)(k.Select,{onValueChange:b=>a.onChange("none"===b?null:parseInt(b)),value:a.value?.toString()||"none",disabled:z,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selectează vehiculul"})})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"Niciun vehicul"}),B.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id.toString(),children:[a.licensePlate," - ",a.vehicleCode]},a.id))]})]}),(0,b.jsx)(j.FormDescription,{children:"Transfer către vehicul în loc de depozit"}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:C.control,name:"notes",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Notițe"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(i.Textarea,{placeholder:"Observații despre transfer...",className:"min-h-[80px]",...a,value:a.value??""})}),(0,b.jsx)(j.FormMessage,{})]})})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.CardTitle,{children:"Materiale de transferat"}),(0,b.jsx)(l.CardDescription,{children:"Adăugați materialele și cantitățile dorite"})]}),(0,b.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>E({materialId:0,quantity:1}),children:[(0,b.jsx)(p.Plus,{className:"mr-2 h-4 w-4"}),"Adaugă material"]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[D.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,b.jsx)(j.FormField,{control:C.control,name:`items.${c}.materialId`,render:({field:a})=>(0,b.jsxs)(j.FormItem,{className:"flex-1",children:[(0,b.jsx)(j.FormLabel,{children:"Material"}),(0,b.jsxs)(k.Select,{onValueChange:a.onChange,value:a.value?.toString()||"",disabled:x,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selectează materialul"})})}),(0,b.jsx)(k.SelectContent,{children:A.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id.toString(),children:[a.materialCode," - ",a.name]},a.id))})]}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:C.control,name:`items.${c}.quantity`,render:({field:a})=>(0,b.jsxs)(j.FormItem,{className:"w-32",children:[(0,b.jsx)(j.FormLabel,{children:"Cantitate"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(h.Input,{type:"number",step:"0.01",min:"0.01",...a,onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):1)})}),(0,b.jsx)(j.FormMessage,{})]})}),D.length>1&&(0,b.jsx)(g.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>F(c),className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(q.Trash2,{className:"h-4 w-4"})})]},a.id)),C.formState.errors.items?.root&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:C.formState.errors.items.root.message})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Anulează"}),(0,b.jsxs)(g.Button,{type:"submit",disabled:H,children:[H&&(0,b.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(n.Save,{className:"mr-2 h-4 w-4"}),"Creează cererea"]})]})]})})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=app_frontend-next_dcce9e68._.js.map