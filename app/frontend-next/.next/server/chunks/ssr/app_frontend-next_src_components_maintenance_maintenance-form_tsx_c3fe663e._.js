module.exports=[10551,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(36305),e=a.i(91894),f=a.i(34763),g=a.i(9635),h=a.i(54593),i=a.i(64725),j=a.i(30647),k=a.i(29162),l=a.i(92687),m=a.i(51710),n=a.i(58287),o=a.i(94123),p=a.i(96988),q=a.i(22697),r=a.i(92402),s=a.i(55665),t=a.i(52472),u=a.i(4393);a.i(84332);var v=a.i(54092),w=a.i(52170);let x=g.z.object({vehicleId:g.z.coerce.number().min(1,"Vehiculul este obligatoriu"),maintenanceTypeId:g.z.coerce.number().min(1,"Tipul de mentenanță este obligatoriu"),status:g.z.enum(["pending","scheduled","in_progress","completed","cancelled"]).default("pending"),priority:g.z.coerce.number().min(1).max(4).default(2),scheduledDate:g.z.string().optional().nullable(),startDate:g.z.string().optional().nullable(),completionDate:g.z.string().optional().nullable(),odometer:g.z.coerce.number().optional().nullable(),description:g.z.string().optional().nullable(),diagnosis:g.z.string().optional().nullable(),workPerformed:g.z.string().optional().nullable(),technicianNotes:g.z.string().optional().nullable(),estimatedCost:g.z.coerce.number().optional().nullable(),actualCost:g.z.coerce.number().optional().nullable(),partsCost:g.z.coerce.number().optional().nullable(),laborCost:g.z.coerce.number().optional().nullable()});function y({workOrder:a,isLoading:g=!1}){let o=(0,d.useRouter)(),y=!!a,A=(0,v.useCreateMaintenanceWorkOrder)(),B=(0,v.useUpdateMaintenanceWorkOrder)(),{data:C,isLoading:D}=(0,w.useVehicles)({pageSize:1e3}),{data:E,isLoading:F}=(0,v.useMaintenanceTypes)(),G=C?.data||[],H=(0,e.useForm)({resolver:(0,f.zodResolver)(x),defaultValues:{vehicleId:a?.vehicleId||0,maintenanceTypeId:a?.maintenanceTypeId||0,status:a?.status||"pending",priority:a?.priority||2,scheduledDate:a?.scheduledDate?.split("T")[0]||null,startDate:a?.startDate?.split("T")[0]||null,completionDate:a?.completionDate?.split("T")[0]||null,odometer:a?.odometer||null,description:a?.description||null,diagnosis:a?.diagnosis||null,workPerformed:a?.workPerformed||null,technicianNotes:a?.technicianNotes||null,estimatedCost:a?.estimatedCost||null,actualCost:a?.actualCost||null,partsCost:a?.partsCost||null,laborCost:a?.laborCost||null}}),I=H.watch("partsCost"),J=H.watch("laborCost");c.useEffect(()=>{if(null!==I||null!==J){let a=(I||0)+(J||0);a>0&&H.setValue("actualCost",a)}},[I,J,H]);let K=async b=>{let c={vehicleId:b.vehicleId,maintenanceTypeId:b.maintenanceTypeId,status:b.status,priority:b.priority,scheduledDate:b.scheduledDate||null,startDate:b.startDate||null,completionDate:b.completionDate||null,odometer:b.odometer||null,description:b.description||null,diagnosis:b.diagnosis||null,workPerformed:b.workPerformed||null,technicianNotes:b.technicianNotes||null,estimatedCost:b.estimatedCost||null,actualCost:b.actualCost||null,partsCost:b.partsCost||null,laborCost:b.laborCost||null};if(y&&a)await B.mutateAsync({id:a.id,data:c}),o.push(`/maintenance/${a.id}`);else{let a=await A.mutateAsync(c);o.push(`/maintenance/${a.id}`)}},L=A.isPending||B.isPending;return g?(0,b.jsx)(z,{}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>o.back(),children:(0,b.jsx)(p.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:y?"Editează comandă de lucru":"Comandă nouă"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:y?`Modifică datele comenzii ${a?.workOrderNumber}`:"Creează o comandă de lucru nouă"})]})]}),(0,b.jsx)(k.Form,{...H,children:(0,b.jsxs)("form",{onSubmit:H.handleSubmit(K),className:"space-y-6",children:[(0,b.jsxs)(n.Tabs,{defaultValue:"general",className:"space-y-4",children:[(0,b.jsxs)(n.TabsList,{children:[(0,b.jsxs)(n.TabsTrigger,{value:"general",children:[(0,b.jsx)(s.Wrench,{className:"mr-2 h-4 w-4"}),"Informații generale"]}),(0,b.jsxs)(n.TabsTrigger,{value:"cost",children:[(0,b.jsx)(t.DollarSign,{className:"mr-2 h-4 w-4"}),"Costuri"]}),(0,b.jsxs)(n.TabsTrigger,{value:"details",children:[(0,b.jsx)(u.FileText,{className:"mr-2 h-4 w-4"}),"Detalii lucrare"]})]}),(0,b.jsxs)(n.TabsContent,{value:"general",className:"space-y-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Detalii comandă"}),(0,b.jsx)(m.CardDescription,{children:"Informații de bază despre comanda de lucru"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:H.control,name:"vehicleId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Vehicul *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value?.toString()||"",disabled:D,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează vehiculul"})})}),(0,b.jsx)(l.SelectContent,{children:G.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id.toString(),children:[a.licensePlate," - ",a.vehicleCode]},a.id))})]}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"maintenanceTypeId",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Tip mentenanță *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value?.toString()||"",disabled:F,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează tipul"})})}),(0,b.jsx)(l.SelectContent,{children:E?.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:H.control,name:"status",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Status"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează statusul"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"pending",children:"În așteptare"}),(0,b.jsx)(l.SelectItem,{value:"scheduled",children:"Programat"}),(0,b.jsx)(l.SelectItem,{value:"in_progress",children:"În lucru"}),(0,b.jsx)(l.SelectItem,{value:"completed",children:"Finalizat"}),(0,b.jsx)(l.SelectItem,{value:"cancelled",children:"Anulat"})]})]}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"priority",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Prioritate"}),(0,b.jsxs)(l.Select,{onValueChange:b=>a.onChange(parseInt(b)),value:a.value?.toString(),children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Selectează prioritatea"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"1",children:"Scăzută"}),(0,b.jsx)(l.SelectItem,{value:"2",children:"Normală"}),(0,b.jsx)(l.SelectItem,{value:"3",children:"Ridicată"}),(0,b.jsx)(l.SelectItem,{value:"4",children:"Urgentă"})]})]}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,b.jsx)(k.FormField,{control:H.control,name:"scheduledDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data programată"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"startDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data începerii"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"completionDate",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Data finalizării"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"date",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsx)(k.FormField,{control:H.control,name:"odometer",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Kilometraj"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",placeholder:"ex: 50000",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseInt(b.target.value):null)})}),(0,b.jsx)(k.FormDescription,{children:"Kilometrajul vehiculului la intervenție"}),(0,b.jsx)(k.FormMessage,{})]})})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Descriere"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(k.FormField,{control:H.control,name:"description",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(j.Textarea,{placeholder:"Descrierea problemei sau a lucrării...",className:"min-h-[100px]",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})})]})]}),(0,b.jsx)(n.TabsContent,{value:"cost",className:"space-y-4",children:(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Costuri"}),(0,b.jsx)(m.CardDescription,{children:"Informații despre costurile comenzii"})]}),(0,b.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:H.control,name:"estimatedCost",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cost estimat (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 500.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"actualCost",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cost real (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 450.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormDescription,{children:"Se calculează automat din piese + manoperă"}),(0,b.jsx)(k.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)(k.FormField,{control:H.control,name:"partsCost",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cost piese (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 300.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormMessage,{})]})}),(0,b.jsx)(k.FormField,{control:H.control,name:"laborCost",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormLabel,{children:"Cost manoperă (RON)"}),(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(i.Input,{type:"number",step:"0.01",placeholder:"ex: 150.00",...a,value:a.value??"",onChange:b=>a.onChange(b.target.value?parseFloat(b.target.value):null)})}),(0,b.jsx)(k.FormMessage,{})]})})]})]})]})}),(0,b.jsxs)(n.TabsContent,{value:"details",className:"space-y-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Diagnostic"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(k.FormField,{control:H.control,name:"diagnosis",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(j.Textarea,{placeholder:"Diagnosticul problemei...",className:"min-h-[100px]",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Lucrări efectuate"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(k.FormField,{control:H.control,name:"workPerformed",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(j.Textarea,{placeholder:"Descrierea lucrărilor efectuate...",className:"min-h-[100px]",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Notițe tehnician"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(k.FormField,{control:H.control,name:"technicianNotes",render:({field:a})=>(0,b.jsxs)(k.FormItem,{children:[(0,b.jsx)(k.FormControl,{children:(0,b.jsx)(j.Textarea,{placeholder:"Observații sau recomandări...",className:"min-h-[100px]",...a,value:a.value??""})}),(0,b.jsx)(k.FormMessage,{})]})})})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>o.back(),children:"Anulează"}),(0,b.jsxs)(h.Button,{type:"submit",disabled:L,children:[L&&(0,b.jsx)(r.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(q.Save,{className:"mr-2 h-4 w-4"}),y?"Salvează modificările":"Creează comanda"]})]})]})})]})}function z(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.Skeleton,{className:"h-10 w-10"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(o.Skeleton,{className:"h-4 w-64"})]})]}),(0,b.jsx)(o.Skeleton,{className:"h-10 w-full max-w-md"}),(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(o.Skeleton,{className:"h-6 w-40"}),(0,b.jsx)(o.Skeleton,{className:"h-4 w-60"})]}),(0,b.jsx)(m.CardContent,{className:"space-y-4",children:(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(o.Skeleton,{className:"h-10 w-full"})]},c))})})]})]})}a.s(["MaintenanceForm",()=>y])}];

//# sourceMappingURL=app_frontend-next_src_components_maintenance_maintenance-form_tsx_c3fe663e._.js.map