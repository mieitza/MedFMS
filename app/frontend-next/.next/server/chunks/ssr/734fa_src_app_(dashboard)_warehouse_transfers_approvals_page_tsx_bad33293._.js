module.exports=[76026,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(52790),e=a.i(51710),f=a.i(54593),g=a.i(21944),h=a.i(26528),i=a.i(92687),j=a.i(46863),k=a.i(94123),l=a.i(64725),m=a.i(61335),n=a.i(96988),o=a.i(19787),p=a.i(42391),q=a.i(62186),r=a.i(38121),s=a.i(19061),t=a.i(47282),u=a.i(14874),v=a.i(35168),w=a.i(8611),x=a.i(75859),y=a.i(51289);a.i(84332);var z=a.i(53048),A=a.i(87244),B=a.i(18187);let C={pending:{label:"În așteptare",variant:"secondary",icon:s.Clock},approved:{label:"Aprobat",variant:"outline",icon:q.CheckCircle},rejected:{label:"Respins",variant:"destructive",icon:r.XCircle},completed:{label:"Finalizat",variant:"default",icon:q.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:r.XCircle}};function D(){let[a,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("pending"),[G,H]=(0,c.useState)("all"),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),{data:M,isLoading:N}=(0,z.useTransferRequests)({search:a||void 0,status:"all"!==E?E:void 0,sourceWarehouseId:"all"!==G?parseInt(G):void 0,sortBy:"requestedAt",sortOrder:"desc",pageSize:50}),{data:O}=(0,z.useWarehouses)(),P=(0,z.useUpdateTransferStatus)(),Q=M?.data||[],R=Q.filter(a=>"pending"===a.status).length,S=async()=>{if(I){try{await P.mutateAsync({id:I.id,status:"approved"}),m.toast.success("Cererea a fost aprobată")}catch{m.toast.error("Eroare la aprobarea cererii")}J(null),L(null)}},T=async()=>{if(I){try{await P.mutateAsync({id:I.id,status:"rejected"}),m.toast.success("Cererea a fost respinsă")}catch{m.toast.error("Eroare la respingerea cererii")}J(null),L(null)}},U=async a=>{try{await P.mutateAsync({id:a.id,status:"completed"}),m.toast.success("Transferul a fost finalizat")}catch{m.toast.error("Eroare la finalizarea transferului")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsxs)(d.default,{href:"/warehouse",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Depozit"]})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Aprobări Transfer"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Gestionează și aprobă cererile de transfer de materiale"})]}),R>0&&(0,b.jsxs)(g.Badge,{variant:"secondary",className:"text-lg px-4 py-2",children:[(0,b.jsx)(s.Clock,{className:"h-4 w-4 mr-2"}),R," în așteptare"]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-yellow-100 p-3 dark:bg-yellow-900/30",children:(0,b.jsx)(s.Clock,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"În așteptare"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.filter(a=>"pending"===a.status).length})]})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,b.jsx)(q.CheckCircle,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Aprobate"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.filter(a=>"approved"===a.status).length})]})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,b.jsx)(o.ArrowRightLeft,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Finalizate"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.filter(a=>"completed"===a.status).length})]})]})})}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-red-100 p-3 dark:bg-red-900/30",children:(0,b.jsx)(r.XCircle,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Respinse"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Q.filter(a=>"rejected"===a.status).length})]})]})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Cereri de Transfer"}),(0,b.jsx)(e.CardDescription,{children:"Lista cererilor de transfer pentru aprobare"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,b.jsx)(l.Input,{placeholder:"Caută după număr cerere...",value:a,onChange:a=>D(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(i.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Toate statusurile"}),(0,b.jsx)(i.SelectItem,{value:"pending",children:"În așteptare"}),(0,b.jsx)(i.SelectItem,{value:"approved",children:"Aprobate"}),(0,b.jsx)(i.SelectItem,{value:"rejected",children:"Respinse"}),(0,b.jsx)(i.SelectItem,{value:"completed",children:"Finalizate"}),(0,b.jsx)(i.SelectItem,{value:"cancelled",children:"Anulate"})]})]}),(0,b.jsxs)(i.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Depozit sursă"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Toate depozitele"}),O?.map(a=>(0,b.jsx)(i.SelectItem,{value:String(a.id),children:a.name},a.id))]})]})]}),N?(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-16 w-full"},c))}):0===Q.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.ArrowRightLeft,{className:"mx-auto h-12 w-12 text-slate-400"}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Nu există cereri"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Nu au fost găsite cereri de transfer cu filtrele selectate."})]}):(0,b.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Nr. Cerere"}),(0,b.jsx)(h.TableHead,{children:"De la"}),(0,b.jsx)(h.TableHead,{children:"Către"}),(0,b.jsx)(h.TableHead,{children:"Data"}),(0,b.jsx)(h.TableHead,{children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Acțiuni"})]})}),(0,b.jsx)(h.TableBody,{children:Q.map(a=>{let c=C[a.status]||C.pending,e=c.icon;return(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.requestNumber}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.Warehouse,{className:"h-4 w-4 text-slate-400"}),a.sourceWarehouse?.name||"-"]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.destinationWarehouse?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Warehouse,{className:"h-4 w-4 text-slate-400"}),a.destinationWarehouse.name]}):a.destinationVehicle?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Car,{className:"h-4 w-4 text-slate-400"}),a.destinationVehicle.licensePlate]}):"-"})}),(0,b.jsx)(h.TableCell,{children:(0,A.format)(new Date(a.requestedAt),"dd MMM yyyy",{locale:B.ro})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(g.Badge,{variant:c.variant,className:"gap-1",children:[(0,b.jsx)(e,{className:"h-3 w-3"}),c.label]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(d.default,{href:`/warehouse/transfers/${a.id}`,children:(0,b.jsx)(v.Eye,{className:"h-4 w-4"})})}),"pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>{J(a),L("approve")},children:(0,b.jsx)(w.Check,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{J(a),L("reject")},children:(0,b.jsx)(x.X,{className:"h-4 w-4"})})]}),"approved"===a.status&&(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>U(a),disabled:P.isPending,children:(0,b.jsx)(y.RefreshCw,{className:"h-4 w-4"})})]})})]},a.id)})})]})})]})]}),(0,b.jsx)(j.AlertDialog,{open:"approve"===K,onOpenChange:()=>L(null),children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Aprobă cererea de transfer"}),(0,b.jsxs)(j.AlertDialogDescription,{children:["Ești sigur că dorești să aprobi cererea ",I?.requestNumber,"? Materialele vor putea fi transferate după aprobare."]})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Anulează"}),(0,b.jsxs)(j.AlertDialogAction,{onClick:S,className:"bg-green-600 hover:bg-green-700",children:[(0,b.jsx)(w.Check,{className:"h-4 w-4 mr-2"}),"Aprobă"]})]})]})}),(0,b.jsx)(j.AlertDialog,{open:"reject"===K,onOpenChange:()=>L(null),children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Respinge cererea de transfer"}),(0,b.jsxs)(j.AlertDialogDescription,{children:["Ești sigur că dorești să respingi cererea ",I?.requestNumber,"? Această acțiune nu poate fi anulată."]})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Anulează"}),(0,b.jsxs)(j.AlertDialogAction,{onClick:T,className:"bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(x.X,{className:"h-4 w-4 mr-2"}),"Respinge"]})]})]})})]})}a.s(["default",()=>D])}];

//# sourceMappingURL=734fa_src_app_%28dashboard%29_warehouse_transfers_approvals_page_tsx_bad33293._.js.map