module.exports=[15357,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(36305),e=a.i(62158),f=a.i(54593),g=a.i(21944),h=a.i(87561),i=a.i(46863),j=a.i(92687),k=a.i(51710),l=a.i(64725),m=a.i(68886),n=a.i(1656),o=a.i(35168),p=a.i(85866),q=a.i(80049),r=a.i(59489),s=a.i(33836),t=a.i(75859),u=a.i(18176),v=a.i(10063),w=a.i(90654),x=a.i(90308),y=a.i(52472);let z=(0,a.i(82530).default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var A=a.i(46811);a.i(84332);var B=a.i(14059),C=a.i(52170),D=a.i(92729),E=a.i(87244),F=a.i(18187);function G(){let a=(0,d.useRouter)(),[G,H]=c.useState({page:1,pageSize:10}),[I,J]=c.useState(!1),[K,L]=c.useState(null),{data:M,isLoading:N}=(0,B.useFuelTransactions)(G),{data:O,isLoading:P}=(0,B.useFuelStats)(),{data:Q}=(0,B.useFuelTypes)(),{data:R}=(0,B.useFuelStations)(),{data:S}=(0,C.useVehicles)({pageSize:1e3}),T=(0,B.useDeleteFuelTransaction)(),U=c.useMemo(()=>[{accessorKey:"transactionDate",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"-ml-3 h-8",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Data",(0,b.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("transactionDate");return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Calendar,{className:"h-4 w-4 text-slate-400"}),(0,b.jsx)("span",{children:(0,E.format)(new Date(c),"dd.MM.yyyy",{locale:F.ro})})]})}},{accessorKey:"vehicle",header:"Vehicul",cell:({row:a})=>{let c=a.original;return c.vehicle?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:c.vehicle.licensePlate}),(0,b.jsx)("div",{className:"text-sm text-slate-500",children:c.vehicle.vehicleCode})]}):"-"}},{accessorKey:"driver",header:"Șofer",cell:({row:a})=>{let b=a.original;return b.driver?`${b.driver.lastName} ${b.driver.firstName}`:"-"}},{accessorKey:"fuelType",header:"Combustibil",cell:({row:a})=>{let c=a.original;return c.fuelType?(0,b.jsx)(g.Badge,{variant:"outline",children:c.fuelType.name}):"-"}},{accessorKey:"quantity",header:"Cantitate",cell:({row:a})=>{let c=a.getValue("quantity");return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(z,{className:"h-4 w-4 text-blue-500"}),(0,b.jsxs)("span",{className:"font-medium",children:[c.toFixed(2)," L"]})]})}},{accessorKey:"pricePerUnit",header:"Preț/L",cell:({row:a})=>{let b=a.getValue("pricePerUnit");return b?`${b.toFixed(2)} RON`:"-"}},{accessorKey:"totalCost",header:"Total",cell:({row:a})=>{let c=a.getValue("totalCost");return c?(0,b.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,b.jsx)(y.DollarSign,{className:"h-4 w-4 text-green-500"}),c.toFixed(2)," RON"]}):"-"}},{accessorKey:"odometer",header:"Kilometraj",cell:({row:a})=>{let b=a.getValue("odometer");return b?`${b.toLocaleString("ro-RO")} km`:"-"}},{accessorKey:"fuelStation",header:"Stație",cell:({row:a})=>{let b=a.original;return b.fuelStation?.name||"-"}},{id:"actions",header:"",cell:({row:c})=>{let d=c.original;return(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,b.jsx)(n.MoreHorizontal,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Deschide meniu"})]})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(h.DropdownMenuLabel,{children:"Acțiuni"}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>a.push(`/fuel/${d.id}`),children:[(0,b.jsx)(o.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizare"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>a.push(`/fuel/${d.id}/edit`),children:[(0,b.jsx)(p.Pencil,{className:"mr-2 h-4 w-4"}),"Editare"]}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>L(d.id),className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(q.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}}],[a]),V=(a,b)=>{H(c=>({...c,[a]:"all"===b?void 0:b,page:1}))},W=G.vehicleId||G.fuelTypeId||G.fuelStationId||G.dateFrom||G.dateTo,X=async()=>{K&&(await T.mutateAsync(K),L(null))};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Alimentări"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează tranzacțiile de combustibil"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(v.Upload,{className:"mr-2 h-4 w-4"}),"Import CSV"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(w.Download,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>J(!I),className:(0,D.cn)(W&&"border-blue-500 text-blue-600"),children:[(0,b.jsx)(s.Filter,{className:"mr-2 h-4 w-4"}),"Filtre"]}),(0,b.jsxs)(f.Button,{onClick:()=>a.push("/fuel/new"),children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Alimentare nouă"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,b.jsx)(r.Fuel,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Total tranzacții"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:P?"-":O?.totalTransactions||0})]})]})})}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-cyan-100 p-3 dark:bg-cyan-900/30",children:(0,b.jsx)(z,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Cantitate totală"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:P?"-":`${(O?.totalQuantity||0).toLocaleString("ro-RO")} L`})]})]})})}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,b.jsx)(y.DollarSign,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Cost total"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:P?"-":`${(O?.totalCost||0).toLocaleString("ro-RO")} RON`})]})]})})}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,b.jsx)(x.TrendingUp,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Preț mediu/L"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:P?"-":`${(O?.averagePricePerLiter||0).toFixed(2)} RON`})]})]})})})]}),I&&(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:"Filtre"}),W&&(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{H({page:1,pageSize:G.pageSize})},children:[(0,b.jsx)(t.X,{className:"mr-2 h-4 w-4"}),"Resetează"]})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Vehicul"}),(0,b.jsxs)(j.Select,{value:G.vehicleId?.toString()||"all",onValueChange:a=>V("vehicleId","all"===a?void 0:parseInt(a)),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate vehiculele"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate vehiculele"}),S?.data.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.licensePlate},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tip combustibil"}),(0,b.jsxs)(j.Select,{value:G.fuelTypeId?.toString()||"all",onValueChange:a=>V("fuelTypeId","all"===a?void 0:parseInt(a)),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate tipurile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate tipurile"}),Q?.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stație"}),(0,b.jsxs)(j.Select,{value:G.fuelStationId?.toString()||"all",onValueChange:a=>V("fuelStationId","all"===a?void 0:parseInt(a)),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Toate stațiile"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"Toate stațiile"}),R?.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"De la"}),(0,b.jsx)(l.Input,{type:"date",value:G.dateFrom||"",onChange:a=>V("dateFrom",a.target.value||void 0)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Până la"}),(0,b.jsx)(l.Input,{type:"date",value:G.dateTo||"",onChange:a=>V("dateTo",a.target.value||void 0)})]})]})})]}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsx)(e.DataTable,{columns:U,data:M?.data||[],loading:N,searchPlaceholder:"Caută după vehicul, șofer, factură...",serverSide:!0,totalItems:M?.pagination.totalItems,currentPage:G.page||1,pageSize:G.pageSize||10,onPageChange:a=>H(b=>({...b,page:a})),onPageSizeChange:a=>H(b=>({...b,pageSize:a,page:1})),onSearchChange:a=>H(b=>({...b,search:a,page:1})),onSortChange:(a,b)=>H(c=>({...c,sortBy:a,sortOrder:b}))})})}),(0,b.jsx)(i.AlertDialog,{open:!!K,onOpenChange:a=>!a&&L(null),children:(0,b.jsxs)(i.AlertDialogContent,{children:[(0,b.jsxs)(i.AlertDialogHeader,{children:[(0,b.jsx)(i.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi această alimentare?"}),(0,b.jsx)(i.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Tranzacția va fi ștearsă definitiv."})]}),(0,b.jsxs)(i.AlertDialogFooter,{children:[(0,b.jsx)(i.AlertDialogCancel,{children:"Anulează"}),(0,b.jsx)(i.AlertDialogAction,{onClick:X,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}a.s(["default",()=>G],15357)}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_fuel_page_tsx_03fb18d4._.js.map