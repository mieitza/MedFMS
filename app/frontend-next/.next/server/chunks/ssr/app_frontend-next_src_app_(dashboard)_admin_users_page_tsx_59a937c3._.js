module.exports=[87404,a=>{"use strict";var b=a.i(3236),c=a.i(91485),d=a.i(36305),e=a.i(54593),f=a.i(21944),g=a.i(51710),h=a.i(64725),i=a.i(92687),j=a.i(40165),k=a.i(94123),l=a.i(69492),m=a.i(26528),n=a.i(87561),o=a.i(96988),p=a.i(89403),q=a.i(68886),r=a.i(85866),s=a.i(80049),t=a.i(1656),u=a.i(92402),v=a.i(82530);let w=(0,v.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),x=(0,v.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),y=(0,v.default)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var z=a.i(22697),A=a.i(74272);a.i(84332);var B=a.i(59462),C=a.i(87244),D=a.i(18187);let E={admin:{label:"Administrator",variant:"destructive"},manager:{label:"Manager",variant:"default"},operator:{label:"Operator",variant:"secondary"},viewer:{label:"Vizualizator",variant:"outline"}};function F(){let a=(0,d.useRouter)(),{data:k,isLoading:v}=(0,B.useUsers)(),{data:F}=(0,B.useAdminDepartments)(),I=(0,B.useCreateUser)(),J=(0,B.useUpdateUser)(),K=(0,B.useDeleteUser)(),L=(0,B.useActivateUser)(),M=(0,B.useDeactivateUser)(),N=(0,B.useResetUserPin)(),[O,P]=c.useState(!1),[Q,R]=c.useState(!1),[S,T]=c.useState(null),[U,V]=c.useState(null),[W,X]=c.useState(""),[Y,Z]=c.useState({username:"",fullName:"",email:null,pin:"",role:"viewer",departmentId:null,locationId:null,phoneNumber:null,isActive:!0}),$=async a=>{confirm(`Sigur doriți să ștergeți utilizatorul "${a.username}"?`)&&await K.mutateAsync(a.id)},_=async a=>{a.isActive?await M.mutateAsync(a.id):await L.mutateAsync(a.id)},aa=async()=>{U&&W.length>=4&&(await N.mutateAsync({id:U.id,pin:W}),R(!1),V(null),X(""))},ab=async()=>{let a={fullName:Y.fullName,email:Y.email,role:Y.role,departmentId:Y.departmentId,isActive:Y.isActive};S?await J.mutateAsync({id:S.id,data:a}):await I.mutateAsync({...Y,username:Y.username,pin:Y.pin}),P(!1)},ac=I.isPending||J.isPending;return v?(0,b.jsx)(H,{}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>a.push("/admin"),children:(0,b.jsx)(o.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"rounded-lg bg-blue-100 p-2 dark:bg-blue-900/30",children:(0,b.jsx)(p.Users,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Utilizatori"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionare conturi utilizatori"})]})]})]}),(0,b.jsxs)(e.Button,{onClick:()=>{T(null),Z({username:"",fullName:"",email:null,pin:"",role:"viewer",departmentId:null,locationId:null,phoneNumber:null,isActive:!0}),P(!0)},children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-4 w-4"}),"Adaugă utilizator"]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(G,{label:"Total utilizatori",value:k?.length||0,icon:p.Users}),(0,b.jsx)(G,{label:"Activi",value:k?.filter(a=>a.isActive).length||0,icon:w,variant:"success"}),(0,b.jsx)(G,{label:"Inactivi",value:k?.filter(a=>!a.isActive).length||0,icon:x,variant:"warning"}),(0,b.jsx)(G,{label:"Administratori",value:k?.filter(a=>"admin"===a.role).length||0,icon:A.Shield,variant:"info"})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Lista utilizatori"}),(0,b.jsxs)(g.CardDescription,{children:[k?.length||0," utilizatori înregistrați"]})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)(m.Table,{children:[(0,b.jsx)(m.TableHeader,{children:(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableHead,{children:"Utilizator"}),(0,b.jsx)(m.TableHead,{children:"Nume complet"}),(0,b.jsx)(m.TableHead,{children:"Email"}),(0,b.jsx)(m.TableHead,{children:"Rol"}),(0,b.jsx)(m.TableHead,{children:"Status"}),(0,b.jsx)(m.TableHead,{children:"Creat"}),(0,b.jsx)(m.TableHead,{className:"w-[80px]",children:"Acțiuni"})]})}),(0,b.jsxs)(m.TableBody,{children:[k?.map(a=>{let c=E[a.role]||E.viewer;return(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableCell,{className:"font-medium",children:a.username}),(0,b.jsx)(m.TableCell,{children:a.fullName}),(0,b.jsx)(m.TableCell,{className:"text-slate-500",children:a.email||"-"}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(f.Badge,{variant:c.variant,children:c.label})}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(f.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Activ":"Inactiv"})}),(0,b.jsx)(m.TableCell,{className:"text-slate-500",children:(0,C.format)(new Date(a.createdAt),"dd MMM yyyy",{locale:D.ro})}),(0,b.jsx)(m.TableCell,{children:(0,b.jsxs)(n.DropdownMenu,{children:[(0,b.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(t.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(n.DropdownMenuItem,{onClick:()=>{T(a),Z({username:a.username,fullName:a.fullName,email:a.email,role:a.role,departmentId:a.departmentId,locationId:null,phoneNumber:null,isActive:a.isActive}),P(!0)},children:[(0,b.jsx)(r.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]}),(0,b.jsxs)(n.DropdownMenuItem,{onClick:()=>{V(a),X(""),R(!0)},children:[(0,b.jsx)(y,{className:"mr-2 h-4 w-4"}),"Resetează PIN"]}),(0,b.jsx)(n.DropdownMenuItem,{onClick:()=>_(a),children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x,{className:"mr-2 h-4 w-4"}),"Dezactivează"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{className:"mr-2 h-4 w-4"}),"Activează"]})}),(0,b.jsx)(n.DropdownMenuSeparator,{}),(0,b.jsxs)(n.DropdownMenuItem,{onClick:()=>$(a),className:"text-red-600",children:[(0,b.jsx)(s.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})})]},a.id)}),(!k||0===k.length)&&(0,b.jsx)(m.TableRow,{children:(0,b.jsx)(m.TableCell,{colSpan:7,className:"text-center text-slate-500",children:"Nu există utilizatori înregistrați"})})]})]})})]}),(0,b.jsx)(l.Dialog,{open:O,onOpenChange:P,children:(0,b.jsxs)(l.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:S?"Editează utilizatorul":"Adaugă utilizator nou"}),(0,b.jsx)(l.DialogDescription,{children:S?"Modificați datele utilizatorului":"Completați datele noului utilizator"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Username *"}),(0,b.jsx)(h.Input,{value:Y.username,onChange:a=>Z({...Y,username:a.target.value}),placeholder:"ex: john.doe",disabled:!!S}),S&&(0,b.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Username-ul nu poate fi modificat"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Nume complet *"}),(0,b.jsx)(h.Input,{value:Y.fullName,onChange:a=>Z({...Y,fullName:a.target.value}),placeholder:"ex: John Doe"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,b.jsx)(h.Input,{type:"email",value:Y.email||"",onChange:a=>Z({...Y,email:a.target.value||null}),placeholder:"ex: john@example.com"})]}),!S&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"PIN *"}),(0,b.jsx)(h.Input,{type:"password",value:Y.pin||"",onChange:a=>Z({...Y,pin:a.target.value}),placeholder:"PIN (4-8 caractere)",minLength:4,maxLength:8})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Rol *"}),(0,b.jsxs)(i.Select,{value:Y.role,onValueChange:a=>Z({...Y,role:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"admin",children:"Administrator"}),(0,b.jsx)(i.SelectItem,{value:"manager",children:"Manager"}),(0,b.jsx)(i.SelectItem,{value:"operator",children:"Operator"}),(0,b.jsx)(i.SelectItem,{value:"viewer",children:"Vizualizator"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Departament"}),(0,b.jsxs)(i.Select,{value:Y.departmentId?.toString()||"none",onValueChange:a=>Z({...Y,departmentId:"none"===a?null:parseInt(a)}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Selectează departamentul"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"Niciun departament"}),F?.map(a=>(0,b.jsx)(i.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Checkbox,{id:"isActive",checked:Y.isActive,onCheckedChange:a=>Z({...Y,isActive:!!a})}),(0,b.jsx)("label",{htmlFor:"isActive",className:"text-sm",children:"Cont activ"})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>P(!1),children:"Anulează"}),(0,b.jsxs)(e.Button,{onClick:ab,disabled:ac||!Y.username||!Y.fullName||!S&&!Y.pin,children:[ac&&(0,b.jsx)(u.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(z.Save,{className:"mr-2 h-4 w-4"}),S?"Salvează":"Creează"]})]})]})}),(0,b.jsx)(l.Dialog,{open:Q,onOpenChange:R,children:(0,b.jsxs)(l.DialogContent,{className:"max-w-sm",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:"Resetează PIN"}),(0,b.jsxs)(l.DialogDescription,{children:['Introduceți noul PIN pentru utilizatorul "',U?.username,'"']})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"PIN nou *"}),(0,b.jsx)(h.Input,{type:"password",value:W,onChange:a=>X(a.target.value),placeholder:"PIN nou (4-8 caractere)",minLength:4,maxLength:8})]})}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>R(!1),children:"Anulează"}),(0,b.jsxs)(e.Button,{onClick:aa,disabled:N.isPending||W.length<4,children:[N.isPending&&(0,b.jsx)(u.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(y,{className:"mr-2 h-4 w-4"}),"Resetează"]})]})]})})]})}function G({label:a,value:c,icon:d,variant:e="default"}){return(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`rounded-lg p-3 ${{default:"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300",success:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",warning:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}[e]}`,children:(0,b.jsx)(d,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:c})]})]})})})}function H(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.Skeleton,{className:"h-10 w-10"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(k.Skeleton,{className:"h-4 w-32"})]})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.Skeleton,{className:"h-12 w-12 rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(k.Skeleton,{className:"h-6 w-12"})]})]})})},c))}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(k.Skeleton,{className:"h-6 w-40"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-12 w-full"},c))})})]})]})}a.s(["default",()=>F],87404)}];

//# sourceMappingURL=app_frontend-next_src_app_%28dashboard%29_admin_users_page_tsx_59a937c3._.js.map