(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71513,e=>{"use strict";var l=e.i(63461),a=e.i(84505);function t({className:e,...t}){return(0,l.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,l.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...t})})}function s({className:e,...t}){return(0,l.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...t})}function r({className:e,...t}){return(0,l.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...t})}function i({className:e,...t}){return(0,l.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function n({className:e,...t}){return(0,l.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function c({className:e,...t}){return(0,l.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}e.s(["Table",()=>t,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>i])},53502,e=>{"use strict";let l=(0,e.i(83775).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>l],53502)},91813,e=>{"use strict";let l=(0,e.i(83775).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>l],91813)},85483,e=>{"use strict";let l=(0,e.i(83775).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>l],85483)},94899,e=>{"use strict";let l=(0,e.i(83775).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>l],94899)},46992,e=>{"use strict";let l=(0,e.i(83775).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>l],46992)},62620,e=>{"use strict";let l=(0,e.i(83775).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>l],62620)},41952,e=>{"use strict";let l=(0,e.i(83775).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>l],41952)},94128,e=>{"use strict";var l=e.i(63461),a=e.i(96041),t=e.i(18587),s=e.i(18439),r=e.i(4770),i=e.i(34066),n=e.i(21592),c=e.i(7715),d=e.i(74533),o=e.i(46323),h=e.i(87334),x=e.i(27413),u=e.i(47131),m=e.i(63430),p=e.i(43013),g=e.i(50519),j=e.i(94899),v=e.i(57617),b=e.i(9533),C=e.i(44444),y=e.i(46992),N=e.i(41952),f=e.i(62620),S=e.i(85483),k=e.i(91813);e.i(66237);var w=e.i(76255),T=e.i(97376),D=e.i(58401),I=e.i(21982);let M={pending:{label:"În așteptare",variant:"secondary",icon:y.Clock},scheduled:{label:"Programat",variant:"outline",icon:S.Calendar},in_progress:{label:"În lucru",variant:"default",icon:C.Wrench},completed:{label:"Finalizat",variant:"default",icon:N.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:f.XCircle}},z={1:{label:"Scăzută",color:"text-slate-500"},2:{label:"Normală",color:"text-blue-500"},3:{label:"Ridicată",color:"text-amber-500"},4:{label:"Urgentă",color:"text-red-500"}};function A(){let e=(0,s.useRouter)(),[f,S]=a.useState({page:1,pageSize:10,sortBy:"scheduledDate",sortOrder:"desc"}),[A,O]=a.useState(""),[P,V]=a.useState(!1),[K,B]=a.useState(null),{data:F,isLoading:H}=(0,w.useMaintenanceWorkOrders)(f),{data:R}=(0,w.useMaintenanceStats)(),{data:W}=(0,T.useVehicles)({pageSize:1e3}),{data:E}=(0,w.useMaintenanceTypes)(),U=(0,w.useDeleteMaintenanceWorkOrder)(),$=W?.data||[],_=()=>{S(e=>({...e,search:A,page:1}))},q=(e,l)=>{S(a=>({...a,[e]:l||void 0,page:1}))},L=async()=>{K&&(await U.mutateAsync(K),B(null))},X=e=>null===e?"-":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON",maximumFractionDigits:0}).format(e),G=[{accessorKey:"workOrderNumber",header:"Nr. comandă",cell:({row:e})=>(0,l.jsx)(t.default,{href:`/maintenance/${e.original.id}`,className:"font-medium text-blue-600 hover:underline dark:text-blue-400",children:e.original.workOrderNumber})},{accessorKey:"vehicle",header:"Vehicul",cell:({row:e})=>(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium",children:e.original.vehicle?.licensePlate}),(0,l.jsx)("span",{className:"text-xs text-slate-500",children:e.original.vehicle?.vehicleCode})]})},{accessorKey:"maintenanceType",header:"Tip mentenanță",cell:({row:e})=>e.original.maintenanceType?.name||"-"},{accessorKey:"status",header:"Status",cell:({row:e})=>{let a=M[e.original.status]||M.pending,t=a.icon;return(0,l.jsxs)(n.Badge,{variant:a.variant,className:"gap-1",children:[(0,l.jsx)(t,{className:"h-3 w-3"}),a.label]})}},{accessorKey:"priority",header:"Prioritate",cell:({row:e})=>{let a=z[e.original.priority]||z[2];return(0,l.jsx)("span",{className:`font-medium ${a.color}`,children:a.label})}},{accessorKey:"scheduledDate",header:"Data programată",cell:({row:e})=>e.original.scheduledDate?(0,D.format)(new Date(e.original.scheduledDate),"dd MMM yyyy",{locale:I.ro}):"-"},{accessorKey:"estimatedCost",header:"Cost estimat",cell:({row:e})=>X(e.original.estimatedCost)},{accessorKey:"actualCost",header:"Cost real",cell:({row:e})=>X(e.original.actualCost)},{id:"actions",cell:({row:a})=>(0,l.jsxs)(h.DropdownMenu,{children:[(0,l.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,l.jsx)(g.MoreHorizontal,{className:"h-4 w-4"})})}),(0,l.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,l.jsx)(h.DropdownMenuLabel,{children:"Acțiuni"}),(0,l.jsx)(h.DropdownMenuSeparator,{}),(0,l.jsxs)(h.DropdownMenuItem,{onClick:()=>e.push(`/maintenance/${a.original.id}`),children:[(0,l.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizează"]}),(0,l.jsxs)(h.DropdownMenuItem,{onClick:()=>e.push(`/maintenance/${a.original.id}/edit`),children:[(0,l.jsx)(v.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]}),(0,l.jsx)(h.DropdownMenuSeparator,{}),(0,l.jsxs)(h.DropdownMenuItem,{className:"text-red-600",onClick:()=>B(a.original.id),children:[(0,l.jsx)(b.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Mentenanță"}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează comenzile de lucru și istoricul mentenanței"})]}),(0,l.jsx)(r.Button,{asChild:!0,children:(0,l.jsxs)(t.default,{href:"/maintenance/new",children:[(0,l.jsx)(u.Plus,{className:"mr-2 h-4 w-4"}),"Comandă nouă"]})})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsx)(c.Card,{children:(0,l.jsx)(c.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,l.jsx)(C.Wrench,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Total comenzi"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:R?.totalWorkOrders||0})]})]})})}),(0,l.jsx)(c.Card,{children:(0,l.jsx)(c.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,l.jsx)(y.Clock,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"În așteptare"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:R?.pendingWorkOrders||0})]})]})})}),(0,l.jsx)(c.Card,{children:(0,l.jsx)(c.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,l.jsx)(N.CheckCircle,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Finalizate"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:R?.completedWorkOrders||0})]})]})})}),(0,l.jsx)(c.Card,{children:(0,l.jsx)(c.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"rounded-lg bg-purple-100 p-3 dark:bg-purple-900/30",children:(0,l.jsx)(k.DollarSign,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Cost total"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:X(R?.totalCost||0)})]})]})})})]}),(0,l.jsx)(c.Card,{children:(0,l.jsx)(c.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(m.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,l.jsx)(i.Input,{placeholder:"Caută după nr. comandă, vehicul...",value:A,onChange:e=>O(e.target.value),onKeyDown:e=>"Enter"===e.key&&_(),className:"pl-10"})]}),(0,l.jsxs)(r.Button,{variant:"outline",onClick:()=>V(!P),children:[(0,l.jsx)(p.Filter,{className:"mr-2 h-4 w-4"}),"Filtre"]}),(0,l.jsx)(r.Button,{onClick:_,children:"Caută"})]}),P&&(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)(d.Select,{value:f.vehicleId?.toString()||"all",onValueChange:e=>q("vehicleId","all"!==e?parseInt(e):void 0),children:[(0,l.jsx)(d.SelectTrigger,{children:(0,l.jsx)(d.SelectValue,{placeholder:"Toate vehiculele"})}),(0,l.jsxs)(d.SelectContent,{children:[(0,l.jsx)(d.SelectItem,{value:"all",children:"Toate vehiculele"}),$.map(e=>(0,l.jsx)(d.SelectItem,{value:e.id.toString(),children:e.licensePlate},e.id))]})]}),(0,l.jsxs)(d.Select,{value:f.maintenanceTypeId?.toString()||"all",onValueChange:e=>q("maintenanceTypeId","all"!==e?parseInt(e):void 0),children:[(0,l.jsx)(d.SelectTrigger,{children:(0,l.jsx)(d.SelectValue,{placeholder:"Toate tipurile"})}),(0,l.jsxs)(d.SelectContent,{children:[(0,l.jsx)(d.SelectItem,{value:"all",children:"Toate tipurile"}),E?.map(e=>(0,l.jsx)(d.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,l.jsxs)(d.Select,{value:f.status||"all",onValueChange:e=>q("status","all"!==e?e:void 0),children:[(0,l.jsx)(d.SelectTrigger,{children:(0,l.jsx)(d.SelectValue,{placeholder:"Toate statusurile"})}),(0,l.jsxs)(d.SelectContent,{children:[(0,l.jsx)(d.SelectItem,{value:"all",children:"Toate statusurile"}),(0,l.jsx)(d.SelectItem,{value:"pending",children:"În așteptare"}),(0,l.jsx)(d.SelectItem,{value:"scheduled",children:"Programat"}),(0,l.jsx)(d.SelectItem,{value:"in_progress",children:"În lucru"}),(0,l.jsx)(d.SelectItem,{value:"completed",children:"Finalizat"}),(0,l.jsx)(d.SelectItem,{value:"cancelled",children:"Anulat"})]})]}),(0,l.jsxs)(d.Select,{value:f.priority?.toString()||"all",onValueChange:e=>q("priority","all"!==e?parseInt(e):void 0),children:[(0,l.jsx)(d.SelectTrigger,{children:(0,l.jsx)(d.SelectValue,{placeholder:"Toate prioritățile"})}),(0,l.jsxs)(d.SelectContent,{children:[(0,l.jsx)(d.SelectItem,{value:"all",children:"Toate prioritățile"}),(0,l.jsx)(d.SelectItem,{value:"1",children:"Scăzută"}),(0,l.jsx)(d.SelectItem,{value:"2",children:"Normală"}),(0,l.jsx)(d.SelectItem,{value:"3",children:"Ridicată"}),(0,l.jsx)(d.SelectItem,{value:"4",children:"Urgentă"})]})]})]})]})})}),(0,l.jsxs)(c.Card,{children:[(0,l.jsxs)(c.CardHeader,{children:[(0,l.jsx)(c.CardTitle,{children:"Lista comenzilor de lucru"}),(0,l.jsxs)(c.CardDescription,{children:[F?.pagination.totalItems||0," comenzi înregistrate"]})]}),(0,l.jsx)(c.CardContent,{children:(0,l.jsx)(x.DataTable,{columns:G,data:F?.data||[],loading:H,searchPlaceholder:"Caută după nr. comandă, vehicul...",serverSide:!0,totalItems:F?.pagination.totalItems,currentPage:f.page||1,pageSize:f.pageSize||10,onPageChange:e=>S(l=>({...l,page:e})),onPageSizeChange:e=>S(l=>({...l,pageSize:e,page:1})),onSearchChange:e=>S(l=>({...l,search:e,page:1})),onSortChange:(e,l)=>S(a=>({...a,sortBy:e,sortOrder:l}))})})]}),(0,l.jsx)(o.AlertDialog,{open:!!K,onOpenChange:()=>B(null),children:(0,l.jsxs)(o.AlertDialogContent,{children:[(0,l.jsxs)(o.AlertDialogHeader,{children:[(0,l.jsx)(o.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi această comandă?"}),(0,l.jsx)(o.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Comanda de lucru va fi ștearsă definitiv."})]}),(0,l.jsxs)(o.AlertDialogFooter,{children:[(0,l.jsx)(o.AlertDialogCancel,{children:"Anulează"}),(0,l.jsx)(o.AlertDialogAction,{onClick:L,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}e.s(["default",()=>A])}]);