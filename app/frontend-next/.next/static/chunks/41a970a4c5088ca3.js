(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76071,e=>{"use strict";let a=(0,e.i(83775).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],76071)},71513,e=>{"use strict";var a=e.i(63461),t=e.i(84505);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})})}function l({className:e,...s}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...s})}function r({className:e,...s}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function c({className:e,...s}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function n({className:e,...s}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>r,"TableCell",()=>n,"TableHead",()=>c,"TableHeader",()=>l,"TableRow",()=>i])},954,e=>{"use strict";let a=(0,e.i(83775).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>a],954)},94899,e=>{"use strict";let a=(0,e.i(83775).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],94899)},55608,e=>{"use strict";var a=e.i(99426);e.s(["X",()=>a.default])},46992,e=>{"use strict";let a=(0,e.i(83775).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],46992)},62620,e=>{"use strict";let a=(0,e.i(83775).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],62620)},41952,e=>{"use strict";let a=(0,e.i(83775).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],41952)},81702,e=>{"use strict";let a=(0,e.i(83775).default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);e.s(["ArrowRightLeft",()=>a],81702)},72774,e=>{"use strict";let a=(0,e.i(83775).default)("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);e.s(["Warehouse",()=>a],72774)},76194,e=>{"use strict";var a=e.i(62514);e.s(["Check",()=>a.default])},31934,e=>{"use strict";let a=(0,e.i(83775).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],31934)},39821,e=>{"use strict";var a=e.i(63461),t=e.i(96041),s=e.i(18587),l=e.i(7715),r=e.i(4770),i=e.i(21592),c=e.i(71513),n=e.i(74533),d=e.i(46323),o=e.i(4946),h=e.i(34066),x=e.i(47135),u=e.i(76071),m=e.i(81702),p=e.i(63430),j=e.i(41952),g=e.i(62620),b=e.i(46992),f=e.i(72774),v=e.i(954),N=e.i(94899),y=e.i(76194),C=e.i(55608),k=e.i(31934);e.i(66237);var w=e.i(9170),A=e.i(58401),T=e.i(21982);let S={pending:{label:"În așteptare",variant:"secondary",icon:b.Clock},approved:{label:"Aprobat",variant:"outline",icon:j.CheckCircle},rejected:{label:"Respins",variant:"destructive",icon:g.XCircle},completed:{label:"Finalizat",variant:"default",icon:j.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:g.XCircle}};function z(){let[e,z]=(0,t.useState)(""),[D,M]=(0,t.useState)("pending"),[H,R]=(0,t.useState)("all"),[B,I]=(0,t.useState)(null),[q,L]=(0,t.useState)(null),{data:F,isLoading:V}=(0,w.useTransferRequests)({search:e||void 0,status:"all"!==D?D:void 0,sourceWarehouseId:"all"!==H?parseInt(H):void 0,sortBy:"requestedAt",sortOrder:"desc",pageSize:50}),{data:W}=(0,w.useWarehouses)(),E=(0,w.useUpdateTransferStatus)(),X=F?.data||[],O=X.filter(e=>"pending"===e.status).length,P=async()=>{if(B){try{await E.mutateAsync({id:B.id,status:"approved"}),x.toast.success("Cererea a fost aprobată")}catch{x.toast.error("Eroare la aprobarea cererii")}I(null),L(null)}},U=async()=>{if(B){try{await E.mutateAsync({id:B.id,status:"rejected"}),x.toast.success("Cererea a fost respinsă")}catch{x.toast.error("Eroare la respingerea cererii")}I(null),L(null)}},K=async e=>{try{await E.mutateAsync({id:e.id,status:"completed"}),x.toast.success("Transferul a fost finalizat")}catch{x.toast.error("Eroare la finalizarea transferului")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(s.default,{href:"/warehouse",children:[(0,a.jsx)(u.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Depozit"]})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Aprobări Transfer"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Gestionează și aprobă cererile de transfer de materiale"})]}),O>0&&(0,a.jsxs)(i.Badge,{variant:"secondary",className:"text-lg px-4 py-2",children:[(0,a.jsx)(b.Clock,{className:"h-4 w-4 mr-2"}),O," în așteptare"]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-yellow-100 p-3 dark:bg-yellow-900/30",children:(0,a.jsx)(b.Clock,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"În așteptare"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:X.filter(e=>"pending"===e.status).length})]})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,a.jsx)(j.CheckCircle,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Aprobate"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:X.filter(e=>"approved"===e.status).length})]})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,a.jsx)(m.ArrowRightLeft,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Finalizate"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:X.filter(e=>"completed"===e.status).length})]})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-red-100 p-3 dark:bg-red-900/30",children:(0,a.jsx)(g.XCircle,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Respinse"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:X.filter(e=>"rejected"===e.status).length})]})]})})})]}),(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Cereri de Transfer"}),(0,a.jsx)(l.CardDescription,{children:"Lista cererilor de transfer pentru aprobare"})]}),(0,a.jsxs)(l.CardContent,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(p.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,a.jsx)(h.Input,{placeholder:"Caută după număr cerere...",value:e,onChange:e=>z(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(n.Select,{value:D,onValueChange:M,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(n.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"Toate statusurile"}),(0,a.jsx)(n.SelectItem,{value:"pending",children:"În așteptare"}),(0,a.jsx)(n.SelectItem,{value:"approved",children:"Aprobate"}),(0,a.jsx)(n.SelectItem,{value:"rejected",children:"Respinse"}),(0,a.jsx)(n.SelectItem,{value:"completed",children:"Finalizate"}),(0,a.jsx)(n.SelectItem,{value:"cancelled",children:"Anulate"})]})]}),(0,a.jsxs)(n.Select,{value:H,onValueChange:R,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[200px]",children:(0,a.jsx)(n.SelectValue,{placeholder:"Depozit sursă"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"Toate depozitele"}),W?.map(e=>(0,a.jsx)(n.SelectItem,{value:String(e.id),children:e.name},e.id))]})]})]}),V?(0,a.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,t)=>(0,a.jsx)(o.Skeleton,{className:"h-16 w-full"},t))}):0===X.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.ArrowRightLeft,{className:"mx-auto h-12 w-12 text-slate-400"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Nu există cereri"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Nu au fost găsite cereri de transfer cu filtrele selectate."})]}):(0,a.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{children:"Nr. Cerere"}),(0,a.jsx)(c.TableHead,{children:"De la"}),(0,a.jsx)(c.TableHead,{children:"Către"}),(0,a.jsx)(c.TableHead,{children:"Data"}),(0,a.jsx)(c.TableHead,{children:"Status"}),(0,a.jsx)(c.TableHead,{className:"text-right",children:"Acțiuni"})]})}),(0,a.jsx)(c.TableBody,{children:X.map(e=>{let t=S[e.status]||S.pending,l=t.icon;return(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableCell,{className:"font-medium",children:e.requestNumber}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Warehouse,{className:"h-4 w-4 text-slate-400"}),e.sourceWarehouse?.name||"-"]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.destinationWarehouse?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Warehouse,{className:"h-4 w-4 text-slate-400"}),e.destinationWarehouse.name]}):e.destinationVehicle?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Car,{className:"h-4 w-4 text-slate-400"}),e.destinationVehicle.licensePlate]}):"-"})}),(0,a.jsx)(c.TableCell,{children:(0,A.format)(new Date(e.requestedAt),"dd MMM yyyy",{locale:T.ro})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)(i.Badge,{variant:t.variant,className:"gap-1",children:[(0,a.jsx)(l,{className:"h-3 w-3"}),t.label]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(s.default,{href:`/warehouse/transfers/${e.id}`,children:(0,a.jsx)(N.Eye,{className:"h-4 w-4"})})}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Button,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>{I(e),L("approve")},children:(0,a.jsx)(y.Check,{className:"h-4 w-4"})}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{I(e),L("reject")},children:(0,a.jsx)(C.X,{className:"h-4 w-4"})})]}),"approved"===e.status&&(0,a.jsx)(r.Button,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>K(e),disabled:E.isPending,children:(0,a.jsx)(k.RefreshCw,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]}),(0,a.jsx)(d.AlertDialog,{open:"approve"===q,onOpenChange:()=>L(null),children:(0,a.jsxs)(d.AlertDialogContent,{children:[(0,a.jsxs)(d.AlertDialogHeader,{children:[(0,a.jsx)(d.AlertDialogTitle,{children:"Aprobă cererea de transfer"}),(0,a.jsxs)(d.AlertDialogDescription,{children:["Ești sigur că dorești să aprobi cererea ",B?.requestNumber,"? Materialele vor putea fi transferate după aprobare."]})]}),(0,a.jsxs)(d.AlertDialogFooter,{children:[(0,a.jsx)(d.AlertDialogCancel,{children:"Anulează"}),(0,a.jsxs)(d.AlertDialogAction,{onClick:P,className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(y.Check,{className:"h-4 w-4 mr-2"}),"Aprobă"]})]})]})}),(0,a.jsx)(d.AlertDialog,{open:"reject"===q,onOpenChange:()=>L(null),children:(0,a.jsxs)(d.AlertDialogContent,{children:[(0,a.jsxs)(d.AlertDialogHeader,{children:[(0,a.jsx)(d.AlertDialogTitle,{children:"Respinge cererea de transfer"}),(0,a.jsxs)(d.AlertDialogDescription,{children:["Ești sigur că dorești să respingi cererea ",B?.requestNumber,"? Această acțiune nu poate fi anulată."]})]}),(0,a.jsxs)(d.AlertDialogFooter,{children:[(0,a.jsx)(d.AlertDialogCancel,{children:"Anulează"}),(0,a.jsxs)(d.AlertDialogAction,{onClick:U,className:"bg-red-600 hover:bg-red-700",children:[(0,a.jsx)(C.X,{className:"h-4 w-4 mr-2"}),"Respinge"]})]})]})})]})}e.s(["default",()=>z])}]);