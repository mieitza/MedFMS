(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7715,e=>{"use strict";var t=e.i(63461),a=e.i(84505);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>s])},14251,e=>{"use strict";var t=e.i(63461),a=e.i(96041);e.i(54466);var r=e.i(56590),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,r.createSlot)(`Primitive.${i}`),l=a.forwardRef((e,a)=>{let{asChild:r,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:i,{...l,ref:a})});return l.displayName=`Primitive.${i}`,{...e,[i]:l}},{}),s=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=e.i(84505);function n({className:e,...a}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],14251)},46323,e=>{"use strict";let t;var a=e.i(63461),r=e.i(96041),i=e.i(80524),s=e.i(25546),l=e.i(38380),n=e.i(77361),o=Symbol("radix.slottable"),d="AlertDialog",[c,u]=(0,i.createContextScope)(d,[l.createDialogScope]),x=(0,l.createDialogScope)(),m=e=>{let{__scopeAlertDialog:t,...r}=e,i=x(t);return(0,a.jsx)(l.Root,{...i,...r,modal:!0})};m.displayName=d;var p=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=x(r);return(0,a.jsx)(l.Trigger,{...s,...i,ref:t})});p.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...r}=e,i=x(t);return(0,a.jsx)(l.Portal,{...i,...r})};h.displayName="AlertDialogPortal";var f=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=x(r);return(0,a.jsx)(l.Overlay,{...s,...i,ref:t})});f.displayName="AlertDialogOverlay";var g="AlertDialogContent",[j,v]=c(g),b=((t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=o,t),N=r.forwardRef((e,t)=>{let{__scopeAlertDialog:i,children:o,...d}=e,c=x(i),u=r.useRef(null),m=(0,s.useComposedRefs)(t,u),p=r.useRef(null);return(0,a.jsx)(l.WarningProvider,{contentName:g,titleName:y,docsSlug:"alert-dialog",children:(0,a.jsx)(j,{scope:i,cancelRef:p,children:(0,a.jsxs)(l.Content,{role:"alertdialog",...c,...d,ref:m,onOpenAutoFocus:(0,n.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(b,{children:o}),(0,a.jsx)(I,{contentRef:u})]})})})});N.displayName=g;var y="AlertDialogTitle",C=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=x(r);return(0,a.jsx)(l.Title,{...s,...i,ref:t})});C.displayName=y;var w="AlertDialogDescription",D=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=x(r);return(0,a.jsx)(l.Description,{...s,...i,ref:t})});D.displayName=w;var A=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=x(r);return(0,a.jsx)(l.Close,{...s,...i,ref:t})});A.displayName="AlertDialogAction";var P="AlertDialogCancel",k=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:n}=v(P,r),o=x(r),d=(0,s.useComposedRefs)(t,n);return(0,a.jsx)(l.Close,{...o,...i,ref:d})});k.displayName=P;var I=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},S=e.i(84505),z=e.i(4770);function R({...e}){return(0,a.jsx)(m,{"data-slot":"alert-dialog",...e})}function T({...e}){return(0,a.jsx)(p,{"data-slot":"alert-dialog-trigger",...e})}function M({...e}){return(0,a.jsx)(h,{"data-slot":"alert-dialog-portal",...e})}function B({className:e,...t}){return(0,a.jsx)(f,{"data-slot":"alert-dialog-overlay",className:(0,S.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function L({className:e,...t}){return(0,a.jsxs)(M,{children:[(0,a.jsx)(B,{}),(0,a.jsx)(N,{"data-slot":"alert-dialog-content",className:(0,S.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function O({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,S.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function F({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,S.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function H({className:e,...t}){return(0,a.jsx)(C,{"data-slot":"alert-dialog-title",className:(0,S.cn)("text-lg font-semibold",e),...t})}function V({className:e,...t}){return(0,a.jsx)(D,{"data-slot":"alert-dialog-description",className:(0,S.cn)("text-muted-foreground text-sm",e),...t})}function $({className:e,...t}){return(0,a.jsx)(A,{className:(0,S.cn)((0,z.buttonVariants)(),e),...t})}function E({className:e,...t}){return(0,a.jsx)(k,{className:(0,S.cn)((0,z.buttonVariants)({variant:"outline"}),e),...t})}e.s(["AlertDialog",()=>R,"AlertDialogAction",()=>$,"AlertDialogCancel",()=>E,"AlertDialogContent",()=>L,"AlertDialogDescription",()=>V,"AlertDialogFooter",()=>F,"AlertDialogHeader",()=>O,"AlertDialogTitle",()=>H,"AlertDialogTrigger",()=>T],46323)},85483,e=>{"use strict";let t=(0,e.i(83775).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],85483)},97213,e=>{"use strict";let t=(0,e.i(83775).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],97213)},83561,e=>{"use strict";let t=(0,e.i(83775).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],83561)},90211,e=>{"use strict";let t=(0,e.i(83775).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>t],90211)},87970,e=>{"use strict";var t=e.i(63461),a=e.i(96041),r=e.i(18439),i=e.i(7715),s=e.i(4770),l=e.i(34066),n=e.i(14251),o=e.i(21592),d=e.i(46323),c=e.i(47135),u=e.i(40498),x=e.i(97213),m=e.i(90211),p=e.i(83561),h=e.i(85483);let f=(0,e.i(83775).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var g=e.i(11836),j=e.i(25241),v=e.i(33885),b=e.i(32875);let N={admin:"Administrator",manager:"Manager",operator:"Operator",viewer:"Vizualizator"},y={admin:"bg-red-100 text-red-800 border-red-200",manager:"bg-blue-100 text-blue-800 border-blue-200",operator:"bg-green-100 text-green-800 border-green-200",viewer:"bg-slate-100 text-slate-800 border-slate-200"};function C({icon:e,label:a,value:r}){return(0,t.jsxs)("div",{className:"flex items-start gap-4 py-3 border-b last:border-b-0",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:(0,t.jsx)(e,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a}),(0,t.jsx)("div",{className:"text-base font-medium mt-0.5",children:r||"-"})]})]})}function w(){let e=(0,r.useRouter)(),w=(0,v.useUser)(),D=(0,v.useAuthStore)(e=>e.logout),[A,P]=(0,a.useState)(!1),[k,I]=(0,a.useState)(""),[S,z]=(0,a.useState)(""),[R,T]=(0,a.useState)(""),[M,B]=(0,a.useState)(""),[L,O]=(0,a.useState)(!1),F=async()=>{await D(),e.push("/login")},H=async()=>{if(B(""),!k||!S||!R)return void B("Toate câmpurile sunt obligatorii");if(S.length<4)return void B("PIN-ul nou trebuie să aibă minim 4 caractere");if(S!==R)return void B("PIN-urile nu coincid");O(!0);try{await b.authApi.changePin(k,S),c.toast.success("PIN-ul a fost schimbat cu succes"),P(!1),I(""),z(""),T("")}catch(e){B(e instanceof Error?e.message:"PIN-ul vechi este incorect")}finally{O(!1)}};return w?(0,t.jsxs)("div",{className:"space-y-6 max-w-3xl mx-auto",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Profilul Meu"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Vizualizează și gestionează informațiile contului tău"})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-2xl font-bold text-primary",children:w.fullName.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.CardTitle,{className:"text-xl",children:w.fullName}),(0,t.jsxs)(i.CardDescription,{children:["@",w.username]})]})]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-0",children:[(0,t.jsx)(C,{icon:u.User,label:"Nume utilizator",value:w.username}),(0,t.jsx)(C,{icon:x.Mail,label:"Email",value:w.email||"Neset"}),(0,t.jsx)(C,{icon:p.Shield,label:"Rol",value:(0,t.jsx)(o.Badge,{className:y[w.role]||y.viewer,children:N[w.role]||w.role})}),(0,t.jsx)(C,{icon:m.Building2,label:"Departament",value:w.departmentId?`ID: ${w.departmentId}`:"Neatribuit"}),(0,t.jsx)(C,{icon:h.Calendar,label:"Cont creat",value:new Date(w.createdAt).toLocaleDateString("ro-RO",{day:"numeric",month:"long",year:"numeric"})})]})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"h-5 w-5"}),"Securitate"]}),(0,t.jsx)(i.CardDescription,{children:"Gestionează setările de securitate ale contului"})]}),(0,t.jsx)(i.CardContent,{children:A?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"oldPin",children:"PIN actual"}),(0,t.jsx)(l.Input,{id:"oldPin",type:"password",placeholder:"Introdu PIN-ul actual",value:k,onChange:e=>I(e.target.value),disabled:L})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"newPin",children:"PIN nou"}),(0,t.jsx)(l.Input,{id:"newPin",type:"password",placeholder:"Introdu noul PIN",value:S,onChange:e=>z(e.target.value),disabled:L})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"confirmPin",children:"Confirmă PIN nou"}),(0,t.jsx)(l.Input,{id:"confirmPin",type:"password",placeholder:"Confirmă noul PIN",value:R,onChange:e=>T(e.target.value),disabled:L})]}),M&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:M}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(s.Button,{onClick:H,disabled:L,children:[L&&(0,t.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvează"]}),(0,t.jsx)(s.Button,{variant:"outline",onClick:()=>{I(""),z(""),T(""),B(""),P(!1)},disabled:L,children:"Anulează"})]})]}):(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"PIN de acces"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Schimbă PIN-ul folosit pentru autentificare"})]}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>P(!0),children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4"}),"Schimbă PIN"]})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Acțiuni Cont"})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Deconectare"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Ieși din contul curent pe acest dispozitiv"})]}),(0,t.jsxs)(d.AlertDialog,{children:[(0,t.jsx)(d.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"destructive",children:[(0,t.jsx)(g.LogOut,{className:"mr-2 h-4 w-4"}),"Deconectare"]})}),(0,t.jsxs)(d.AlertDialogContent,{children:[(0,t.jsxs)(d.AlertDialogHeader,{children:[(0,t.jsx)(d.AlertDialogTitle,{children:"Confirmare deconectare"}),(0,t.jsx)(d.AlertDialogDescription,{children:"Ești sigur că dorești să te deconectezi? Va trebui să introduci PIN-ul din nou pentru a te autentifica."})]}),(0,t.jsxs)(d.AlertDialogFooter,{children:[(0,t.jsx)(d.AlertDialogCancel,{children:"Anulează"}),(0,t.jsx)(d.AlertDialogAction,{onClick:F,children:"Deconectează-mă"})]})]})]})]})})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(o.Badge,{variant:w.isActive?"default":"destructive",className:"text-sm",children:w.isActive?"Cont Activ":"Cont Inactiv"})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-slate-400"})})}e.s(["default",()=>w],87970)}]);