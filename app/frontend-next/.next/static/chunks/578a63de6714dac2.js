(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35558,e=>{"use strict";var t=e.i(96041),a=e.i(30291),s=e.i(8132),i=e.i(4200),r=e.i(98939),n=class extends i.Subscribable{#e;#t=void 0;#a;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,r.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,r.hashKey)(t.mutationKey)!==(0,r.hashKey)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#i(),this.#r()}mutate(e,t){return this.#s=t,this.#a?.removeObserver(this),this.#a=this.#e.getMutationCache().build(this.#e,this.options),this.#a.addObserver(this),this.#a.execute(e)}#i(){let e=this.#a?.state??(0,a.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,a,s),this.#s.onSettled?.(e.data,null,t,a,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,a,s),this.#s.onSettled?.(void 0,e.error,t,a,s))}this.listeners.forEach(e=>{e(this.#t)})})}},l=e.i(21734);function c(e,a){let i=(0,l.useQueryClient)(a),[c]=t.useState(()=>new n(i,e));t.useEffect(()=>{c.setOptions(e)},[c,e]);let o=t.useSyncExternalStore(t.useCallback(e=>c.subscribe(s.notifyManager.batchCalls(e)),[c]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d=t.useCallback((e,t)=>{c.mutate(e,t).catch(r.noop)},[c]);if(o.error&&(0,r.shouldThrowError)(c.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}e.s(["useMutation",()=>c],35558)},29021,e=>{"use strict";var t=e.i(50404);e.s(["dashboardApi",0,{getStats:async()=>t.api.get("/dashboard/stats"),getRecentActivity:async(e=10)=>t.api.get("/dashboard/activity",{limit:e}),getAlerts:async()=>t.api.get("/dashboard/alerts"),getFuelSummary:async(e="month")=>t.api.get("/dashboard/fuel-summary",{period:e}),getMaintenanceSummary:async()=>t.api.get("/dashboard/maintenance-summary"),getVehicleStatusDistribution:async()=>t.api.get("/dashboard/vehicle-status-distribution")}])},88026,e=>{"use strict";var t=e.i(50404);e.s(["chatApi",0,{getHealth:async()=>t.api.get("/chat/health"),getConfig:async()=>t.api.get("/chat/config"),sendMessage:async e=>t.api.post("/chat",{messages:e,stream:!1}),getTools:async()=>t.api.get("/chat/tools"),testTool:async(e,a)=>t.api.post(`/chat/tools/${e}/test`,a),streamMessage:async(e,t,a)=>{let s=localStorage.getItem("auth_token");try{let a=await fetch("http://localhost:3000/api/chat",{method:"POST",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify({messages:e,stream:!0})});if(!a.ok){let e=await a.json().catch(()=>({error:{message:"Unknown error"}}));throw Error(e.error?.message||`HTTP error ${a.status}`)}let i=a.body?.getReader();if(!i)throw Error("No response body");let r=new TextDecoder,n="";for(;;){let{done:e,value:a}=await i.read();if(e)break;let s=(n+=r.decode(a,{stream:!0})).split("\n");for(let e of(n=s.pop()||"",s)){if(!e.startsWith("data: "))continue;let a=e.slice(6);try{let e=JSON.parse(a);t(e)}catch{}}}}catch(e){a(e instanceof Error?e:Error("Unknown error"))}}}])},56851,1975,88621,20234,26909,85702,e=>{"use strict";var t=e.i(50404);e.i(32875),e.s(["vehiclesApi",0,{getAll:async(e={})=>t.api.get("/vehicles",e),getById:async e=>t.api.get(`/vehicles/${e}`),create:async e=>t.api.post("/vehicles",e),update:async(e,a)=>t.api.put(`/vehicles/${e}`,a),delete:async e=>t.api.delete(`/vehicles/${e}`),uploadAnmdmDocument:async(e,a)=>{let s=new FormData;return s.append("document",a),t.api.upload(`/vehicles/${e}/anmdm-document`,s)},uploadPhotos:async(e,a)=>{let s=new FormData;return a.forEach(e=>s.append("photos",e)),t.api.upload(`/vehicles/${e}/photos`,s)},deletePhoto:async(e,a)=>t.api.delete(`/vehicles/${e}/photos/${a}`),getDocuments:async e=>t.api.get(`/vehicles/${e}/documents`),uploadDocument:async(e,a,s)=>{let i=new FormData;return i.append("document",a),s&&i.append("documentType",s),t.api.upload(`/vehicles/${e}/documents`,i)},getBrands:async()=>t.api.get("/system/brands"),getModels:async e=>t.api.get("/system/models",e?{brandId:e}:{}),getVehicleTypes:async()=>t.api.get("/system/vehicle-types"),getVehicleStatuses:async()=>t.api.get("/system/vehicle-statuses")}],1975),e.s(["driversApi",0,{getAll:async(e={})=>t.api.get("/drivers",e),getById:async e=>t.api.get(`/drivers/${e}`),create:async e=>t.api.post("/drivers",e),update:async(e,a)=>t.api.put(`/drivers/${e}`,a),delete:async e=>t.api.delete(`/drivers/${e}`),getDocuments:async e=>t.api.get(`/drivers/${e}/documents`),uploadDocument:async(e,a,s)=>{let i=new FormData;return i.append("document",a),s&&i.append("documentType",s),t.api.upload(`/drivers/${e}/documents`,i)},getExpiringLicenses:async(e=30)=>t.api.get("/drivers/expiring-licenses",{daysAhead:e})}],88621),e.i(29021),e.i(18837),e.s(["fuelApi",0,{getAll:async(e={})=>t.api.get("/fuel/transactions",e),getById:async e=>t.api.get(`/fuel/transactions/${e}`),create:async e=>t.api.post("/fuel/transactions",e),update:async(e,a)=>t.api.put(`/fuel/transactions/${e}`,a),delete:async e=>t.api.delete(`/fuel/transactions/${e}`),getStats:async e=>t.api.get("/fuel/transactions/stats",e),importCsv:async e=>{let a=new FormData;return a.append("file",e),t.api.upload("/fuel/transactions/import",a)},exportCsv:async e=>{let t=new URLSearchParams;return e&&Object.entries(e).forEach(([e,a])=>{void 0!==a&&t.append(e,String(a))}),(await fetch(`http://localhost:3000/api/fuel/transactions/export?${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).blob()},getFuelTypes:async()=>t.api.get("/fuel/types"),getFuelStations:async()=>t.api.get("/fuel/stations")}],20234),e.s(["maintenanceApi",0,{getAll:async(e={})=>t.api.get("/maintenance/work-orders",e),getById:async e=>t.api.get(`/maintenance/work-orders/${e}`),create:async e=>t.api.post("/maintenance/work-orders",e),update:async(e,a)=>t.api.put(`/maintenance/work-orders/${e}`,a),delete:async e=>t.api.delete(`/maintenance/work-orders/${e}`),getStats:async e=>t.api.get("/maintenance/work-orders/stats",e),updateStatus:async(e,a)=>t.api.put(`/maintenance/work-orders/${e}/status`,{status:a}),getMaintenanceTypes:async()=>t.api.get("/maintenance/types"),getPendingApproval:async(e={})=>t.api.get("/maintenance/work-orders/pending-approval",e),approve:async(e,a)=>t.api.put(`/maintenance/work-orders/${e}/status`,{status:"approved",notes:a}),reject:async(e,a)=>t.api.put(`/maintenance/work-orders/${e}/status`,{status:"cancelled",notes:a})}],26909),e.i(49113),e.s(["adminApi",0,{getUsers:async()=>(await t.api.get("/users")).data,getUser:async e=>t.api.get(`/users/${e}`),createUser:async e=>t.api.post("/users",e),updateUser:async(e,a)=>t.api.patch(`/users/${e}`,a),deleteUser:async e=>t.api.delete(`/users/${e}`),activateUser:async e=>t.api.post(`/users/${e}/activate`,{}),deactivateUser:async e=>t.api.post(`/users/${e}/deactivate`,{}),resetUserPin:async(e,a)=>t.api.post(`/users/${e}/reset-pin`,{pin:a}),getReferenceData:async e=>t.api.get(`/system/${e}`),getReferenceDataItem:async(e,a)=>t.api.get(`/system/${e}/${a}`),createReferenceData:async(e,a)=>t.api.post(`/system/${e}`,a),updateReferenceData:async(e,a,s)=>t.api.patch(`/system/${e}/${a}`,s),deleteReferenceData:async(e,a)=>t.api.delete(`/system/${e}/${a}`),getBrands:async()=>t.api.get("/system/brands"),createBrand:async e=>t.api.post("/system/brands",e),updateBrand:async(e,a)=>t.api.patch(`/system/brands/${e}`,a),deleteBrand:async e=>t.api.delete(`/system/brands/${e}`),getModels:async e=>t.api.get("/system/models",e?{brandId:e}:{}),createModel:async e=>t.api.post("/system/models",e),updateModel:async(e,a)=>t.api.patch(`/system/models/${e}`,a),deleteModel:async e=>t.api.delete(`/system/models/${e}`),getVehicleTypes:async()=>t.api.get("/system/vehicle-types"),createVehicleType:async e=>t.api.post("/system/vehicle-types",e),updateVehicleType:async(e,a)=>t.api.patch(`/system/vehicle-types/${e}`,a),deleteVehicleType:async e=>t.api.delete(`/system/vehicle-types/${e}`),getVehicleStatuses:async()=>t.api.get("/system/vehicle-statuses"),createVehicleStatus:async e=>t.api.post("/system/vehicle-statuses",e),updateVehicleStatus:async(e,a)=>t.api.patch(`/system/vehicle-statuses/${e}`,a),deleteVehicleStatus:async e=>t.api.delete(`/system/vehicle-statuses/${e}`),getFuelTypes:async()=>t.api.get("/system/fuel-types"),createFuelType:async e=>t.api.post("/system/fuel-types",e),updateFuelType:async(e,a)=>t.api.patch(`/system/fuel-types/${e}`,a),deleteFuelType:async e=>t.api.delete(`/system/fuel-types/${e}`),getFuelStations:async()=>t.api.get("/system/fuel-stations"),createFuelStation:async e=>t.api.post("/system/fuel-stations",e),updateFuelStation:async(e,a)=>t.api.patch(`/system/fuel-stations/${e}`,a),deleteFuelStation:async e=>t.api.delete(`/system/fuel-stations/${e}`),getMaintenanceTypes:async()=>t.api.get("/system/maintenance-types"),createMaintenanceType:async e=>t.api.post("/system/maintenance-types",e),updateMaintenanceType:async(e,a)=>t.api.patch(`/system/maintenance-types/${e}`,a),deleteMaintenanceType:async e=>t.api.delete(`/system/maintenance-types/${e}`),getDepartments:async()=>t.api.get("/system/departments"),createDepartment:async e=>t.api.post("/system/departments",e),updateDepartment:async(e,a)=>t.api.patch(`/system/departments/${e}`,a),deleteDepartment:async e=>t.api.delete(`/system/departments/${e}`),getLocations:async()=>t.api.get("/system/locations"),createLocation:async e=>t.api.post("/system/locations",e),updateLocation:async(e,a)=>t.api.patch(`/system/locations/${e}`,a),deleteLocation:async e=>t.api.delete(`/system/locations/${e}`),getCities:async()=>t.api.get("/system/cities"),createCity:async e=>t.api.post("/system/cities",e),updateCity:async(e,a)=>t.api.patch(`/system/cities/${e}`,a),deleteCity:async e=>t.api.delete(`/system/cities/${e}`),getSuppliers:async()=>t.api.get("/system/suppliers"),createSupplier:async e=>t.api.post("/system/suppliers",e),updateSupplier:async(e,a)=>t.api.patch(`/system/suppliers/${e}`,a),deleteSupplier:async e=>t.api.delete(`/system/suppliers/${e}`),getMaterialUnits:async()=>t.api.get("/system/material-units"),createMaterialUnit:async e=>t.api.post("/system/material-units",e),updateMaterialUnit:async(e,a)=>t.api.patch(`/system/material-units/${e}`,a),deleteMaterialUnit:async e=>t.api.delete(`/system/material-units/${e}`),getMaterialCategories:async()=>t.api.get("/system/material-categories"),createMaterialCategory:async e=>t.api.post("/system/material-categories",e),updateMaterialCategory:async(e,a)=>t.api.patch(`/system/material-categories/${e}`,a),deleteMaterialCategory:async e=>t.api.delete(`/system/material-categories/${e}`),getPositions:async()=>t.api.get("/system/positions"),createPosition:async e=>t.api.post("/system/positions",e),updatePosition:async(e,a)=>t.api.patch(`/system/positions/${e}`,a),deletePosition:async e=>t.api.delete(`/system/positions/${e}`),getLicenseTypes:async()=>t.api.get("/system/license-types"),createLicenseType:async e=>t.api.post("/system/license-types",e),updateLicenseType:async(e,a)=>t.api.patch(`/system/license-types/${e}`,a),deleteLicenseType:async e=>t.api.delete(`/system/license-types/${e}`),getInspectionTypes:async()=>t.api.get("/system/inspection-types"),createInspectionType:async e=>t.api.post("/system/inspection-types",e),updateInspectionType:async(e,a)=>t.api.patch(`/system/inspection-types/${e}`,a),deleteInspectionType:async e=>t.api.delete(`/system/inspection-types/${e}`)}],85702),e.i(88026),e.s([],56851)},14251,e=>{"use strict";var t=e.i(63461),a=e.i(96041);e.i(54466);var s=e.i(56590),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let r=(0,s.createSlot)(`Primitive.${i}`),n=a.forwardRef((e,a)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?r:i,{...n,ref:a})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{}),r=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var n=e.i(84505);function l({className:e,...a}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],14251)},7715,e=>{"use strict";var t=e.i(63461),a=e.i(84505);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>r])},49113,e=>{"use strict";var t=e.i(50404);e.s(["warehouseApi",0,{getMaterials:async(e={})=>t.api.get("/materials",e),getMaterialById:async e=>t.api.get(`/materials/${e}`),createMaterial:async e=>t.api.post("/materials",e),updateMaterial:async(e,a)=>t.api.put(`/materials/${e}`,a),deleteMaterial:async e=>t.api.delete(`/materials/${e}`),importMaterials:async e=>{let a=new FormData;return a.append("file",e),t.api.upload("/materials/import",a)},getTransferRequests:async(e={})=>t.api.get("/materials/transfer-requests",e),getTransferRequestById:async e=>t.api.get(`/materials/transfer-requests/${e}`),createTransferRequest:async e=>t.api.post("/materials/transfer-requests",e),updateTransferStatus:async(e,a)=>t.api.patch(`/materials/transfer-requests/${e}/status`,{status:a}),approveTransfer:async(e,a)=>t.api.post(`/materials/transfer-requests/${e}/approve`,{notes:a}),rejectTransfer:async(e,a)=>t.api.post(`/materials/transfer-requests/${e}/reject`,{notes:a}),completeTransfer:async e=>t.api.post(`/materials/transfer-requests/${e}/complete`,{}),getPendingApprovalTransfers:async(e={})=>t.api.get("/materials/transfer-requests/pending-approval",e),getWarehouses:async()=>t.api.get("/materials/warehouses"),getWarehouseById:async e=>t.api.get(`/materials/warehouses/${e}`),createWarehouse:async e=>t.api.post("/materials/warehouses",e),updateWarehouse:async(e,a)=>t.api.put(`/materials/warehouses/${e}`,a),getMaterialUnits:async()=>t.api.get("/materials/units"),createMaterialUnit:async e=>t.api.post("/materials/units",e),updateMaterialUnit:async(e,a)=>t.api.put(`/materials/units/${e}`,a),getLowStockMaterials:async()=>t.api.get("/materials/low-stock"),getStockReport:async e=>t.api.get("/materials/reports/stock",e),getPricingReport:async e=>t.api.get("/materials/reports/pricing",e),getTransfersReport:async e=>t.api.get("/materials/reports/transfers",e),getExpirationReport:async e=>t.api.get("/materials/reports/expiration",e),getUsageReport:async e=>t.api.get("/materials/reports/usage",e)}])},76071,e=>{"use strict";let t=(0,e.i(83775).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],76071)},71513,e=>{"use strict";var t=e.i(63461),a=e.i(84505);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function i({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function r({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function n({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function l({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function c({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>l,"TableHeader",()=>i,"TableRow",()=>n])},53502,e=>{"use strict";let t=(0,e.i(83775).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],53502)},89583,e=>{"use strict";var t=e.i(58721);e.s(["AlertTriangle",()=>t.default])},62620,e=>{"use strict";let t=(0,e.i(83775).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],62620)},41952,e=>{"use strict";let t=(0,e.i(83775).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],41952)},78066,e=>{"use strict";let t=(0,e.i(83775).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],78066)},27487,e=>{"use strict";let t=(0,e.i(83775).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>t],27487)},9118,e=>{"use strict";var t=e.i(63461),a=e.i(28790),s=e.i(84505);let i=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function r({className:e,variant:a,...r}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(i({variant:a}),e),...r})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}e.s(["Alert",()=>r,"AlertDescription",()=>l,"AlertTitle",()=>n])},46467,e=>{"use strict";var t=e.i(63461),a=e.i(96041),s=e.i(18587),i=e.i(35558),r=e.i(21734),n=e.i(7715),l=e.i(4770),c=e.i(34066),o=e.i(14251),d=e.i(21592),p=e.i(71513),u=e.i(9118),m=e.i(47135),h=e.i(76071),y=e.i(78066),g=e.i(27487),x=e.i(41952),f=e.i(62620),v=e.i(89583),b=e.i(25241),j=e.i(53502),T=e.i(62382);e.i(56851);var w=e.i(20234);function C(){let e=(0,r.useQueryClient)(),[C,$]=(0,a.useState)(null),[N,k]=(0,a.useState)([]),[M,S]=(0,a.useState)(null),[D,R]=(0,a.useState)(!1),A=(0,i.useMutation)({mutationFn:e=>w.fuelApi.importCsv(e),onSuccess:t=>{S(t),t.imported>0&&(m.toast.success(`${t.imported} tranzacții importate cu succes`),e.invalidateQueries({queryKey:["fuel"]})),t.errors.length>0&&m.toast.error(`${t.errors.length} erori la import`)},onError:e=>{m.toast.error(e.message||"Eroare la import")}}),F=(0,a.useCallback)(async e=>{let t=(await e.text()).split("\n").filter(e=>e.trim());if(t.length<2)return void m.toast.error("Fișierul nu conține date");let a=t[0].split(",").map(e=>e.trim().toLowerCase()),s=[];for(let e=1;e<Math.min(t.length,11);e++){let i=t[e].split(",").map(e=>e.trim().replace(/^"|"$/g,"")),r={rowNumber:e+1,isValid:!0,errors:[]};a.forEach((e,t)=>{let a=i[t];e.includes("vehicul")||e.includes("vehicle")||e.includes("nr_auto")?r.vehicleReg=a:e.includes("card")?r.cardNumber=a:e.includes("data")||e.includes("date")?r.transactionDate=a:e.includes("combustibil")||e.includes("fuel")||e.includes("tip")?r.fuelType=a:e.includes("cantitate")||e.includes("quantity")||e.includes("litri")?r.quantity=parseFloat(a)||0:e.includes("valoare")||e.includes("cost")||e.includes("total")?r.totalCost=parseFloat(a)||0:e.includes("km")||e.includes("odometer")?r.odometer=parseInt(a)||0:(e.includes("statie")||e.includes("station"))&&(r.station=a)}),r.vehicleReg||(r.isValid=!1,r.errors.push("Lipsește numărul de înmatriculare")),(!r.quantity||r.quantity<=0)&&(r.isValid=!1,r.errors.push("Cantitate invalidă")),s.push(r)}k(s)},[]),B=(0,a.useCallback)(e=>{if(!e)return;let t=[".xlsx",".xls",".csv"].some(t=>e.name.toLowerCase().endsWith(t));["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(e.type)||t?e.size>0xa00000?m.toast.error("Fișierul este prea mare. Dimensiunea maximă este 10MB."):($(e),S(null),k([]),e.name.toLowerCase().endsWith(".csv")&&F(e)):m.toast.error("Format de fișier invalid. Acceptăm doar fișiere Excel (.xlsx, .xls) sau CSV.")},[F]),O=(0,a.useCallback)(e=>{e.preventDefault(),R(!0)},[]),U=(0,a.useCallback)(e=>{e.preventDefault(),R(!1)},[]),V=(0,a.useCallback)(e=>{e.preventDefault(),R(!1),B(e.dataTransfer.files[0])},[B]),L=()=>{$(null),k([]),S(null)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsxs)(s.default,{href:"/fuel",children:[(0,t.jsx)(h.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Înapoi la Tranzacții"]})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Import Tranzacții Combustibil"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Importă tranzacții din fișiere Excel sau CSV"})]}),(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>{let e=new Blob(["\uFEFFnr_auto,card,data,tip_combustibil,cantitate,valoare,km,statie\nB123ABC,1234567890,2024-01-15,Motorină,50.5,350.00,125000,OMV Pipera"],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="template-import-combustibil.csv",t.click()},children:[(0,t.jsx)(j.Download,{className:"mr-2 h-4 w-4"}),"Descarcă Template"]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(T.FileText,{className:"h-5 w-5"}),"Instrucțiuni"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsx)("p",{children:"Fișierul de import trebuie să conțină următoarele coloane:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-slate-600 dark:text-slate-400",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"nr_auto"})," - Numărul de înmatriculare al vehiculului (obligatoriu)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"card"})," - Numărul cardului de combustibil"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"data"})," - Data tranzacției (format: YYYY-MM-DD)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"tip_combustibil"})," - Tipul de combustibil"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"cantitate"})," - Cantitatea în litri (obligatoriu)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"valoare"})," - Valoarea totală în RON"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"km"})," - Kilometrajul la alimentare"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"statie"})," - Numele stației"]})]}),(0,t.jsx)("p",{className:"mt-4 text-slate-500",children:"Formate acceptate: .xlsx, .xls, .csv | Dimensiune maximă: 10MB"})]})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Încarcă Fișier"})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${D?"border-primary bg-primary/5":"border-slate-200 dark:border-slate-700 hover:border-primary/50"}`,onDragOver:O,onDragLeave:U,onDrop:V,children:C?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)(g.FileSpreadsheet,{className:"h-12 w-12 text-green-600"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"font-medium",children:C.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:[(C.size/1024).toFixed(2)," KB"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:L,children:"Schimbă Fișierul"}),(0,t.jsxs)(l.Button,{onClick:()=>{C&&A.mutate(C)},disabled:A.isPending,children:[A.isPending&&(0,t.jsx)(b.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,t.jsx)(y.Upload,{className:"mr-2 h-4 w-4"}),"Importă"]})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(y.Upload,{className:"h-12 w-12 mx-auto text-slate-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Trage fișierul aici sau click pentru a selecta"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Acceptă fișiere Excel (.xlsx, .xls) sau CSV"})]}),(0,t.jsxs)(o.Label,{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,t.jsx)(c.Input,{id:"file-upload",type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:e=>B(e.target.files?.[0]||null)}),(0,t.jsx)(l.Button,{variant:"outline",asChild:!0,children:(0,t.jsx)("span",{children:"Selectează Fișier"})})]})]})})})]}),N.length>0&&!M&&(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Previzualizare Date"}),(0,t.jsxs)(n.CardDescription,{children:["Primele ",N.length," rânduri din fișier"]})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,t.jsxs)(p.Table,{children:[(0,t.jsx)(p.TableHeader,{children:(0,t.jsxs)(p.TableRow,{children:[(0,t.jsx)(p.TableHead,{className:"w-12",children:"#"}),(0,t.jsx)(p.TableHead,{children:"Vehicul"}),(0,t.jsx)(p.TableHead,{children:"Card"}),(0,t.jsx)(p.TableHead,{children:"Data"}),(0,t.jsx)(p.TableHead,{children:"Tip"}),(0,t.jsx)(p.TableHead,{className:"text-right",children:"Cantitate"}),(0,t.jsx)(p.TableHead,{className:"text-right",children:"Valoare"}),(0,t.jsx)(p.TableHead,{className:"text-right",children:"KM"}),(0,t.jsx)(p.TableHead,{children:"Stație"}),(0,t.jsx)(p.TableHead,{children:"Status"})]})}),(0,t.jsx)(p.TableBody,{children:N.map(e=>(0,t.jsxs)(p.TableRow,{className:e.isValid?"":"bg-red-50 dark:bg-red-950/20",children:[(0,t.jsx)(p.TableCell,{children:e.rowNumber}),(0,t.jsx)(p.TableCell,{className:"font-medium",children:e.vehicleReg||"-"}),(0,t.jsx)(p.TableCell,{children:e.cardNumber||"-"}),(0,t.jsx)(p.TableCell,{children:e.transactionDate||"-"}),(0,t.jsx)(p.TableCell,{children:e.fuelType||"-"}),(0,t.jsx)(p.TableCell,{className:"text-right",children:e.quantity?.toFixed(2)||"-"}),(0,t.jsx)(p.TableCell,{className:"text-right",children:e.totalCost?.toFixed(2)||"-"}),(0,t.jsx)(p.TableCell,{className:"text-right",children:e.odometer||"-"}),(0,t.jsx)(p.TableCell,{children:e.station||"-"}),(0,t.jsx)(p.TableCell,{children:e.isValid?(0,t.jsxs)(d.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[(0,t.jsx)(x.CheckCircle,{className:"h-3 w-3 mr-1"}),"Valid"]}):(0,t.jsxs)(d.Badge,{variant:"destructive",children:[(0,t.jsx)(f.XCircle,{className:"h-3 w-3 mr-1"}),"Invalid"]})})]},e.rowNumber))})]})})})]}),M&&(0,t.jsxs)("div",{className:"space-y-4",children:[M.imported>0&&(0,t.jsxs)(u.Alert,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/30",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(u.AlertTitle,{className:"text-green-800 dark:text-green-200",children:"Import Reușit"}),(0,t.jsxs)(u.AlertDescription,{className:"text-green-700 dark:text-green-300",children:[M.imported," tranzacții au fost importate cu succes."]})]}),M.errors.length>0&&(0,t.jsxs)(u.Alert,{variant:"destructive",children:[(0,t.jsx)(v.AlertTriangle,{className:"h-4 w-4"}),(0,t.jsx)(u.AlertTitle,{children:"Erori la Import"}),(0,t.jsx)(u.AlertDescription,{children:(0,t.jsxs)("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[M.errors.slice(0,10).map((e,a)=>(0,t.jsx)("li",{children:e},a)),M.errors.length>10&&(0,t.jsxs)("li",{className:"text-slate-500",children:["... și încă ",M.errors.length-10," erori"]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:L,children:"Import Nou"}),(0,t.jsx)(l.Button,{asChild:!0,children:(0,t.jsx)(s.default,{href:"/fuel",children:"Vezi Tranzacțiile"})})]})]})]})}e.s(["default",()=>C])}]);