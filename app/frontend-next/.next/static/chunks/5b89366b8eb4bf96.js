(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53502,e=>{"use strict";let a=(0,e.i(83775).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>a],53502)},91813,e=>{"use strict";let a=(0,e.i(83775).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],91813)},954,e=>{"use strict";let a=(0,e.i(83775).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>a],954)},89583,e=>{"use strict";var a=e.i(58721);e.s(["AlertTriangle",()=>a.default])},76071,e=>{"use strict";let a=(0,e.i(83775).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],76071)},14251,e=>{"use strict";var a=e.i(63461),t=e.i(96041);e.i(54466);var s=e.i(56590),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,l)=>{let i=(0,s.createSlot)(`Primitive.${l}`),r=t.forwardRef((e,t)=>{let{asChild:s,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(s?i:l,{...r,ref:t})});return r.displayName=`Primitive.${l}`,{...e,[l]:r}},{}),i=t.forwardRef((e,t)=>(0,a.jsx)(l.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var r=e.i(84505);function n({className:e,...t}){return(0,a.jsx)(i,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>n],14251)},63805,e=>{"use strict";var a=e.i(63461),t=e.i(96041),s=e.i(77361),l=e.i(80524),i=e.i(92988),r=e.i(9437),n=e.i(52146),c=e.i(89035),d=e.i(42969),o=e.i(92640),m="Tabs",[x,u]=(0,l.createContextScope)(m,[i.createRovingFocusGroupScope]),h=(0,i.createRovingFocusGroupScope)(),[p,j]=x(m),g=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:l,onValueChange:i,defaultValue:r,orientation:x="horizontal",dir:u,activationMode:h="automatic",...j}=e,g=(0,c.useDirection)(u),[f,v]=(0,d.useControllableState)({prop:l,onChange:i,defaultProp:r??"",caller:m});return(0,a.jsx)(p,{scope:s,baseId:(0,o.useId)(),value:f,onValueChange:v,orientation:x,dir:g,activationMode:h,children:(0,a.jsx)(n.Primitive.div,{dir:g,"data-orientation":x,...j,ref:t})})});g.displayName=m;var f="TabsList",v=t.forwardRef((e,t)=>{let{__scopeTabs:s,loop:l=!0,...r}=e,c=j(f,s),d=h(s);return(0,a.jsx)(i.Root,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:l,children:(0,a.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...r,ref:t})})});v.displayName=f;var y="TabsTrigger",b=t.forwardRef((e,t)=>{let{__scopeTabs:l,value:r,disabled:c=!1,...d}=e,o=j(y,l),m=h(l),x=w(o.baseId,r),u=k(o.baseId,r),p=r===o.value;return(0,a.jsx)(i.Item,{asChild:!0,...m,focusable:!c,active:p,children:(0,a.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:x,...d,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(r)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(r)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||c||!e||o.onValueChange(r)})})})});b.displayName=y;var N="TabsContent",C=t.forwardRef((e,s)=>{let{__scopeTabs:l,value:i,forceMount:c,children:d,...o}=e,m=j(N,l),x=w(m.baseId,i),u=k(m.baseId,i),h=i===m.value,p=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(r.Presence,{present:c||h,children:({present:t})=>(0,a.jsx)(n.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!t,id:u,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:t&&d})})});function w(e,a){return`${e}-trigger-${a}`}function k(e,a){return`${e}-content-${a}`}C.displayName=N;var D=e.i(84505);function T({className:e,...t}){return(0,a.jsx)(g,{"data-slot":"tabs",className:(0,D.cn)("flex flex-col gap-2",e),...t})}function A({className:e,...t}){return(0,a.jsx)(v,{"data-slot":"tabs-list",className:(0,D.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function S({className:e,...t}){return(0,a.jsx)(b,{"data-slot":"tabs-trigger",className:(0,D.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function M({className:e,...t}){return(0,a.jsx)(C,{"data-slot":"tabs-content",className:(0,D.cn)("flex-1 outline-none",e),...t})}e.s(["Tabs",()=>T,"TabsContent",()=>M,"TabsList",()=>A,"TabsTrigger",()=>S],63805)},85483,e=>{"use strict";let a=(0,e.i(83775).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],85483)},46992,e=>{"use strict";let a=(0,e.i(83775).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],46992)},62620,e=>{"use strict";let a=(0,e.i(83775).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],62620)},41952,e=>{"use strict";let a=(0,e.i(83775).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],41952)},6054,e=>{"use strict";let a=(0,e.i(83775).default)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);e.s(["Gauge",()=>a],6054)},78066,e=>{"use strict";let a=(0,e.i(83775).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>a],78066)},27487,e=>{"use strict";let a=(0,e.i(83775).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>a],27487)},93637,89355,e=>{"use strict";var a=e.i(83775);let t=(0,a.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>t],93637);let s=(0,a.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);e.s(["File",()=>s],89355)},92466,e=>{"use strict";var a=e.i(63461),t=e.i(18439),s=e.i(18587),l=e.i(4770),i=e.i(21592),r=e.i(7715),n=e.i(4946),c=e.i(46323),d=e.i(74533),o=e.i(76071),m=e.i(57617),x=e.i(9533),u=e.i(44444),h=e.i(85483),p=e.i(954),j=e.i(6054),g=e.i(46992),f=e.i(41952),v=e.i(62620),y=e.i(91813),b=e.i(89583);e.i(66237);var N=e.i(76255),C=e.i(96041),w=e.i(34066),k=e.i(14251),D=e.i(66225),T=e.i(63805),A=e.i(62382),S=e.i(78066),M=e.i(53502),F=e.i(47131),P=e.i(93637),z=e.i(89355),I=e.i(27487),H=e.i(25241),L=e.i(58401),R=e.i(21982),$=e.i(89690),B=e.i(35558),O=e.i(21734),q=e.i(77940);function K(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function V({workOrderId:e,title:t="Fișiere comandă de lucru",description:s="Documente și fotografii atașate acestei comenzi de lucru",readOnly:i=!1}){let d=(0,O.useQueryClient)(),[o,m]=(0,C.useState)(!1),[x,u]=(0,C.useState)("document"),[h,p]=(0,C.useState)(null),[j,g]=(0,C.useState)(null),[f,v]=(0,C.useState)(null),[y,N]=(0,C.useState)({name:"",description:""}),M="maintenance_work_order",{data:z,isLoading:I}=(0,$.useQuery)({queryKey:["documents",M,e],queryFn:()=>q.documentsApi.getDocuments(M,e),enabled:!!e}),{data:L,isLoading:R}=(0,$.useQuery)({queryKey:["photos",M,e],queryFn:()=>q.documentsApi.getPhotos(M,e),enabled:!!e}),V=(0,B.useMutation)({mutationFn:({file:e,data:a})=>q.documentsApi.uploadDocument(e,a),onSuccess:()=>{d.invalidateQueries({queryKey:["documents",M,e]}),W()}}),U=(0,B.useMutation)({mutationFn:({file:e,data:a})=>q.documentsApi.uploadPhoto(e,a),onSuccess:()=>{d.invalidateQueries({queryKey:["photos",M,e]}),W()}}),_=(0,B.useMutation)({mutationFn:e=>q.documentsApi.deleteDocument(e),onSuccess:()=>{d.invalidateQueries({queryKey:["documents",M,e]}),p(null)}}),Q=(0,B.useMutation)({mutationFn:e=>q.documentsApi.deletePhoto(e),onSuccess:()=>{d.invalidateQueries({queryKey:["photos",M,e]}),p(null)}}),W=()=>{m(!1),g(null),v(null),N({name:"",description:""})},G=async()=>{j&&y.name&&e&&("document"===x?await V.mutateAsync({file:j,data:{documentName:y.name,entityType:M,entityId:e,description:y.description||void 0}}):await U.mutateAsync({file:j,data:{photoName:y.name,entityType:M,entityId:e,description:y.description||void 0}}))},X=async()=>{h&&("document"===h.fileType?await _.mutateAsync(h.id):await Q.mutateAsync(h.id))},J=e=>{let a="document"===e.fileType?q.documentsApi.getDownloadUrl(e.id):q.documentsApi.getPhotoDownloadUrl(e.id);window.open(a,"_blank")},Y=e=>{u(e),m(!0)},Z=[...(z||[]).map(e=>({...e,fileType:"document"})),...(L||[]).map(e=>({...e,fileType:"photo"}))],ee=z||[],ea=L||[];return e?(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.FileText,{className:"h-5 w-5"}),t]}),(0,a.jsx)(r.CardDescription,{children:s})]}),!i&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>Y("document"),children:[(0,a.jsx)(F.Plus,{className:"h-4 w-4 mr-2"}),"Document"]}),(0,a.jsxs)(l.Button,{onClick:()=>Y("photo"),children:[(0,a.jsx)(F.Plus,{className:"h-4 w-4 mr-2"}),"Fotografie"]})]})]})}),(0,a.jsx)(r.CardContent,{children:I||R?(0,a.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,t)=>(0,a.jsx)(n.Skeleton,{className:"h-16 w-full"},t))}):0===Z.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(A.FileText,{className:"mx-auto h-12 w-12 text-slate-400"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Nu există fișiere"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:i?"Nu au fost încărcate fișiere pentru această comandă de lucru.":"Adaugă documente sau fotografii folosind butoanele de mai sus."})]}):(0,a.jsxs)(T.Tabs,{defaultValue:"all",className:"w-full",children:[(0,a.jsxs)(T.TabsList,{className:"mb-4",children:[(0,a.jsxs)(T.TabsTrigger,{value:"all",children:["Toate (",Z.length,")"]}),(0,a.jsxs)(T.TabsTrigger,{value:"documents",children:[(0,a.jsx)(A.FileText,{className:"h-4 w-4 mr-1"}),"Documente (",ee.length,")"]}),(0,a.jsxs)(T.TabsTrigger,{value:"photos",children:[(0,a.jsx)(P.ImageIcon,{className:"h-4 w-4 mr-1"}),"Fotografii (",ea.length,")"]})]}),(0,a.jsx)(T.TabsContent,{value:"all",children:(0,a.jsx)(E,{files:Z,onDownload:J,onDelete:e=>p(e),readOnly:i})}),(0,a.jsx)(T.TabsContent,{value:"documents",children:(0,a.jsx)(E,{files:ee.map(e=>({...e,fileType:"document"})),onDownload:J,onDelete:e=>p(e),readOnly:i})}),(0,a.jsx)(T.TabsContent,{value:"photos",children:(0,a.jsx)(E,{files:ea.map(e=>({...e,fileType:"photo"})),onDownload:J,onDelete:e=>p(e),readOnly:i})})]})}),(0,a.jsx)(D.Dialog,{open:o,onOpenChange:m,children:(0,a.jsxs)(D.DialogContent,{className:"sm:max-w-md",children:[(0,a.jsxs)(D.DialogHeader,{children:[(0,a.jsxs)(D.DialogTitle,{children:["Încarcă ","document"===x?"Document":"Fotografie"]}),(0,a.jsx)(D.DialogDescription,{children:"Selectează un fișier și completează informațiile."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"file",children:"Fișier"}),(0,a.jsx)(w.Input,{id:"file",type:"file",onChange:e=>{let a=e.target.files?.[0];if(a){if(g(a),a.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{v(e.target?.result)},e.readAsDataURL(a)}else v(null);y.name||N(e=>({...e,name:a.name.replace(/\.[^/.]+$/,"")}))}},accept:"photo"===x?"image/jpeg,image/png,image/gif,image/webp":".pdf,.doc,.docx,.xls,.xlsx,.csv,.txt,.jpg,.jpeg,.png,.gif"}),j&&(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[j.name," (",K(j.size),")"]}),f&&(0,a.jsx)("div",{className:"mt-2 relative w-full h-32 rounded-lg overflow-hidden border",children:(0,a.jsx)("img",{src:f,alt:"Preview",className:"w-full h-full object-contain"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"name",children:"Nume *"}),(0,a.jsx)(w.Input,{id:"name",value:y.name,onChange:e=>N(a=>({...a,name:e.target.value})),placeholder:`Ex: ${"document"===x?"Deviz reparații":"Piesă defectă"}`})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"upload-description",children:"Descriere"}),(0,a.jsx)(w.Input,{id:"upload-description",value:y.description,onChange:e=>N(a=>({...a,description:e.target.value})),placeholder:"Descriere opțională..."})]})]}),(0,a.jsxs)(D.DialogFooter,{children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:W,children:"Anulează"}),(0,a.jsxs)(l.Button,{onClick:G,disabled:!j||!y.name||V.isPending||U.isPending,children:[(V.isPending||U.isPending)&&(0,a.jsx)(H.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,a.jsx)(S.Upload,{className:"mr-2 h-4 w-4"}),"Încarcă"]})]})]})}),(0,a.jsx)(c.AlertDialog,{open:!!h,onOpenChange:()=>p(null),children:(0,a.jsxs)(c.AlertDialogContent,{children:[(0,a.jsxs)(c.AlertDialogHeader,{children:[(0,a.jsx)(c.AlertDialogTitle,{children:"Șterge fișierul"}),(0,a.jsxs)(c.AlertDialogDescription,{children:['Ești sigur că vrei să ștergi "',h?.fileType==="document"?h.documentName:h?.photoName,'"? Această acțiune nu poate fi anulată.']})]}),(0,a.jsxs)(c.AlertDialogFooter,{children:[(0,a.jsx)(c.AlertDialogCancel,{children:"Anulează"}),(0,a.jsxs)(c.AlertDialogAction,{onClick:X,className:"bg-red-600 hover:bg-red-700",children:[(_.isPending||Q.isPending)&&(0,a.jsx)(H.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Șterge"]})]})]})})]}):(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.FileText,{className:"h-5 w-5"}),t]}),(0,a.jsx)(r.CardDescription,{children:s})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-950/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(b.AlertTriangle,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Încărcarea fișierelor va fi disponibilă după crearea comenzii de lucru"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Poți adăuga documente și fotografii după ce comanda de lucru este salvată."})]})]})})})]})}function E({files:e,onDownload:t,onDelete:s,readOnly:r}){return 0===e.length?(0,a.jsx)("div",{className:"text-center py-6 text-slate-500",children:"Nu există fișiere în această categorie."}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>{var n;let c="photo"===e.fileType||(n=e.mimeType).startsWith("image/")?P.ImageIcon:n.includes("spreadsheet")||n.includes("excel")||"text/csv"===n?I.FileSpreadsheet:n.includes("pdf")?A.FileText:z.File,d="document"===e.fileType?e.documentName:e.photoName;return e.fileType,e.originalFileName,(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700",children:(0,a.jsx)(c,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100 truncate",children:d}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[(0,a.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:"photo"===e.fileType?"Fotografie":"Document"}),(0,a.jsx)("span",{children:K(e.fileSize)}),(0,a.jsx)("span",{children:(0,L.format)(new Date(e.createdAt),"dd MMM yyyy",{locale:R.ro})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>t(e),title:"Descarcă",children:(0,a.jsx)(M.Download,{className:"h-4 w-4"})}),!r&&(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>s(e),title:"Șterge",children:(0,a.jsx)(x.Trash2,{className:"h-4 w-4"})})]})]},`${e.fileType}-${e.id}`)})})}let U={pending:{label:"În așteptare",variant:"secondary",icon:g.Clock},scheduled:{label:"Programat",variant:"outline",icon:h.Calendar},in_progress:{label:"În lucru",variant:"default",icon:u.Wrench},completed:{label:"Finalizat",variant:"default",icon:f.CheckCircle},cancelled:{label:"Anulat",variant:"destructive",icon:v.XCircle}},_={1:{label:"Scăzută",color:"text-slate-500"},2:{label:"Normală",color:"text-blue-500"},3:{label:"Ridicată",color:"text-amber-500"},4:{label:"Urgentă",color:"text-red-500"}};function Q(){let e=(0,t.useParams)(),n=(0,t.useRouter)(),h=e.id?parseInt(e.id):null,{data:g,isLoading:f,isError:v}=(0,N.useMaintenanceWorkOrder)(h),C=(0,N.useDeleteMaintenanceWorkOrder)(),w=(0,N.useUpdateWorkOrderStatus)(),k=async()=>{h&&(await C.mutateAsync(h),n.push("/maintenance"))},D=async e=>{h&&await w.mutateAsync({id:h,status:e})};if(f)return(0,a.jsx)(G,{});if(v||!g)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(u.Wrench,{className:"mb-4 h-12 w-12 text-slate-400"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Comanda de lucru nu a fost găsită"}),(0,a.jsx)("p",{className:"mb-4 text-sm text-slate-500",children:"Este posibil ca comanda să fi fost ștearsă sau să nu aveți acces."}),(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>n.push("/maintenance"),children:[(0,a.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Înapoi la listă"]})]});let T=e=>e?(0,L.format)(new Date(e),"dd MMMM yyyy",{locale:R.ro}):"-",A=e=>e?(0,L.format)(new Date(e),"dd MMMM yyyy, HH:mm",{locale:R.ro}):"-",S=e=>null===e?"-":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON"}).format(e),M=U[g.status]||U.pending,F=M.icon,P=_[g.priority]||_[2];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>n.back(),children:(0,a.jsx)(o.ArrowLeft,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:g.workOrderNumber}),(0,a.jsxs)(i.Badge,{variant:M.variant,className:"gap-1",children:[(0,a.jsx)(F,{className:"h-3 w-3"}),M.label]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[g.maintenanceType?.name," - ",g.vehicle?.licensePlate]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.Select,{value:g.status,onValueChange:e=>D(e),children:[(0,a.jsx)(d.SelectTrigger,{className:"w-[160px]",children:(0,a.jsx)(d.SelectValue,{})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"pending",children:"În așteptare"}),(0,a.jsx)(d.SelectItem,{value:"scheduled",children:"Programat"}),(0,a.jsx)(d.SelectItem,{value:"in_progress",children:"În lucru"}),(0,a.jsx)(d.SelectItem,{value:"completed",children:"Finalizat"}),(0,a.jsx)(d.SelectItem,{value:"cancelled",children:"Anulat"})]})]}),(0,a.jsx)(l.Button,{variant:"outline",asChild:!0,children:(0,a.jsxs)(s.default,{href:`/maintenance/${g.id}/edit`,children:[(0,a.jsx)(m.Pencil,{className:"mr-2 h-4 w-4"}),"Editează"]})}),(0,a.jsxs)(c.AlertDialog,{children:[(0,a.jsx)(c.AlertDialogTrigger,{asChild:!0,children:(0,a.jsxs)(l.Button,{variant:"outline",className:"text-red-600 hover:text-red-700",children:[(0,a.jsx)(x.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})}),(0,a.jsxs)(c.AlertDialogContent,{children:[(0,a.jsxs)(c.AlertDialogHeader,{children:[(0,a.jsx)(c.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi această comandă?"}),(0,a.jsx)(c.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Comanda de lucru va fi ștearsă definitiv."})]}),(0,a.jsxs)(c.AlertDialogFooter,{children:[(0,a.jsx)(c.AlertDialogCancel,{children:"Anulează"}),(0,a.jsx)(c.AlertDialogAction,{onClick:k,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,a.jsx)(p.Car,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Vehicul"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:g.vehicle?.licensePlate})]})]})})}),(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,a.jsx)(b.AlertTriangle,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Prioritate"}),(0,a.jsx)("p",{className:`text-lg font-semibold ${P.color}`,children:P.label})]})]})})}),(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,a.jsx)(y.DollarSign,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Cost estimat"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:S(g.estimatedCost)})]})]})})}),(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-purple-100 p-3 dark:bg-purple-900/30",children:(0,a.jsx)(j.Gauge,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Kilometraj"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:g.odometer?`${g.odometer.toLocaleString("ro-RO")} km`:"-"})]})]})})})]}),(0,a.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Detalii comandă"})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsx)(W,{label:"Nr. comandă",value:g.workOrderNumber}),(0,a.jsx)(W,{label:"Tip mentenanță",value:g.maintenanceType?.name}),(0,a.jsx)(W,{label:"Categorie",value:g.maintenanceType?.category}),(0,a.jsx)(W,{label:"Prioritate",value:P.label}),(0,a.jsx)(W,{label:"Status",value:M.label})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Vehicul"})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Vehicul"}),(0,a.jsxs)(s.default,{href:`/vehicles/${g.vehicleId}`,className:"text-sm font-medium text-blue-600 hover:underline dark:text-blue-400",children:[g.vehicle?.licensePlate," (",g.vehicle?.vehicleCode,")"]})]}),(0,a.jsx)(W,{label:"Kilometraj la intervenție",value:g.odometer?`${g.odometer.toLocaleString("ro-RO")} km`:void 0})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Date"})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsx)(W,{label:"Data programată",value:T(g.scheduledDate)}),(0,a.jsx)(W,{label:"Data începerii",value:T(g.startDate)}),(0,a.jsx)(W,{label:"Data finalizării",value:T(g.completionDate)})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Costuri"})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsx)(W,{label:"Cost estimat",value:S(g.estimatedCost)}),(0,a.jsx)(W,{label:"Cost real",value:S(g.actualCost)}),(0,a.jsx)(W,{label:"Cost piese",value:S(g.partsCost)}),(0,a.jsx)(W,{label:"Cost manoperă",value:S(g.laborCost)})]})]})]}),g.description&&(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Descriere"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:g.description})})]}),g.diagnosis&&(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Diagnostic"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:g.diagnosis})})]}),g.workPerformed&&(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Lucrări efectuate"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:g.workPerformed})})]}),g.technicianNotes&&(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Notițe tehnician"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:g.technicianNotes})})]}),(0,a.jsx)(V,{workOrderId:g.id,title:"Fișiere comandă de lucru",description:"Documente și fotografii atașate acestei comenzi de lucru"}),(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Informații sistem"})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsx)(W,{label:"Creat la",value:A(g.createdAt)}),(0,a.jsx)(W,{label:"Ultima actualizare",value:A(g.updatedAt)})]})]})]})}function W({label:e,value:t}){return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:e}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t||"-"})]})}function G(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)(n.Skeleton,{className:"h-10 w-10"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Skeleton,{className:"h-8 w-48"}),(0,a.jsx)(n.Skeleton,{className:"h-4 w-32"})]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.Skeleton,{className:"h-12 w-12 rounded-lg"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Skeleton,{className:"h-4 w-20"}),(0,a.jsx)(n.Skeleton,{className:"h-6 w-24"})]})]})})},t))}),(0,a.jsx)("div",{className:"grid gap-4 lg:grid-cols-2",children:Array.from({length:4}).map((e,t)=>(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(n.Skeleton,{className:"h-6 w-40"})}),(0,a.jsx)(r.CardContent,{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(n.Skeleton,{className:"h-4 w-24"}),(0,a.jsx)(n.Skeleton,{className:"h-4 w-32"})]},t))})]},t))})]})}e.s(["default",()=>Q],92466)}]);