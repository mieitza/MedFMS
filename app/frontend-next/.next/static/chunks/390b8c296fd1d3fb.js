(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71513,e=>{"use strict";var a=e.i(63461),t=e.i(84505);function l({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...l})})}function s({className:e,...l}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...l})}function i({className:e,...l}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...l})}function r({className:e,...l}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...l})}function n({className:e,...l}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}function c({className:e,...l}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}e.s(["Table",()=>l,"TableBody",()=>i,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>r])},53502,e=>{"use strict";let a=(0,e.i(83775).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>a],53502)},91813,e=>{"use strict";let a=(0,e.i(83775).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],91813)},85483,e=>{"use strict";let a=(0,e.i(83775).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],85483)},94899,e=>{"use strict";let a=(0,e.i(83775).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],94899)},55608,e=>{"use strict";var a=e.i(99426);e.s(["X",()=>a.default])},99380,e=>{"use strict";let a=(0,e.i(83775).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],99380)},78066,e=>{"use strict";let a=(0,e.i(83775).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>a],78066)},57312,e=>{"use strict";let a=(0,e.i(83775).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>a],57312)},94849,e=>{"use strict";var a=e.i(63461),t=e.i(96041),l=e.i(18439),s=e.i(27413),i=e.i(4770),r=e.i(21592),n=e.i(87334),c=e.i(46323),d=e.i(74533),o=e.i(7715),x=e.i(34066),h=e.i(47131),m=e.i(50519),u=e.i(94899),p=e.i(57617),j=e.i(9533),g=e.i(99848),v=e.i(43013),N=e.i(55608),y=e.i(57312),b=e.i(78066),f=e.i(53502),C=e.i(99380),S=e.i(91813);let w=(0,e.i(83775).default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var k=e.i(85483);e.i(66237);var T=e.i(6961),D=e.i(97376),I=e.i(84505),M=e.i(58401),z=e.i(21982);function A(){let e=(0,l.useRouter)(),[A,V]=t.useState({page:1,pageSize:10}),[F,P]=t.useState(!1),[K,R]=t.useState(null),{data:B,isLoading:L}=(0,T.useFuelTransactions)(A),{data:O,isLoading:U}=(0,T.useFuelStats)(),{data:H}=(0,T.useFuelTypes)(),{data:$}=(0,T.useFuelStations)(),{data:q}=(0,D.useVehicles)({pageSize:1e3}),E=(0,T.useDeleteFuelTransaction)(),X=t.useMemo(()=>[{accessorKey:"transactionDate",header:({column:e})=>(0,a.jsxs)(i.Button,{variant:"ghost",size:"sm",className:"-ml-3 h-8",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Data",(0,a.jsx)(y.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let t=e.getValue("transactionDate");return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Calendar,{className:"h-4 w-4 text-slate-400"}),(0,a.jsx)("span",{children:(0,M.format)(new Date(t),"dd.MM.yyyy",{locale:z.ro})})]})}},{accessorKey:"vehicle",header:"Vehicul",cell:({row:e})=>{let t=e.original;return t.vehicle?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:t.vehicle.licensePlate}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:t.vehicle.vehicleCode})]}):"-"}},{accessorKey:"driver",header:"Șofer",cell:({row:e})=>{let a=e.original;return a.driver?`${a.driver.lastName} ${a.driver.firstName}`:"-"}},{accessorKey:"fuelType",header:"Combustibil",cell:({row:e})=>{let t=e.original;return t.fuelType?(0,a.jsx)(r.Badge,{variant:"outline",children:t.fuelType.name}):"-"}},{accessorKey:"quantity",header:"Cantitate",cell:({row:e})=>{let t=e.getValue("quantity");return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(w,{className:"h-4 w-4 text-blue-500"}),(0,a.jsxs)("span",{className:"font-medium",children:[t.toFixed(2)," L"]})]})}},{accessorKey:"pricePerUnit",header:"Preț/L",cell:({row:e})=>{let a=e.getValue("pricePerUnit");return a?`${a.toFixed(2)} RON`:"-"}},{accessorKey:"totalCost",header:"Total",cell:({row:e})=>{let t=e.getValue("totalCost");return t?(0,a.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,a.jsx)(S.DollarSign,{className:"h-4 w-4 text-green-500"}),t.toFixed(2)," RON"]}):"-"}},{accessorKey:"odometer",header:"Kilometraj",cell:({row:e})=>{let a=e.getValue("odometer");return a?`${a.toLocaleString("ro-RO")} km`:"-"}},{accessorKey:"fuelStation",header:"Stație",cell:({row:e})=>{let a=e.original;return a.fuelStation?.name||"-"}},{id:"actions",header:"",cell:({row:t})=>{let l=t.original;return(0,a.jsxs)(n.DropdownMenu,{children:[(0,a.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(m.MoreHorizontal,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Deschide meniu"})]})}),(0,a.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(n.DropdownMenuLabel,{children:"Acțiuni"}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>e.push(`/fuel/${l.id}`),children:[(0,a.jsx)(u.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizare"]}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>e.push(`/fuel/${l.id}/edit`),children:[(0,a.jsx)(p.Pencil,{className:"mr-2 h-4 w-4"}),"Editare"]}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>R(l.id),className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(j.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}}],[e]),_=(e,a)=>{V(t=>({...t,[e]:"all"===a?void 0:a,page:1}))},G=A.vehicleId||A.fuelTypeId||A.fuelStationId||A.dateFrom||A.dateTo,Q=async()=>{K&&(await E.mutateAsync(K),R(null))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Alimentări"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează tranzacțiile de combustibil"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(b.Upload,{className:"mr-2 h-4 w-4"}),"Import CSV"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(f.Download,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>P(!F),className:(0,I.cn)(G&&"border-blue-500 text-blue-600"),children:[(0,a.jsx)(v.Filter,{className:"mr-2 h-4 w-4"}),"Filtre"]}),(0,a.jsxs)(i.Button,{onClick:()=>e.push("/fuel/new"),children:[(0,a.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Alimentare nouă"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,a.jsx)(g.Fuel,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total tranzacții"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:U?"-":O?.totalTransactions||0})]})]})})}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-cyan-100 p-3 dark:bg-cyan-900/30",children:(0,a.jsx)(w,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Cantitate totală"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:U?"-":`${(O?.totalQuantity||0).toLocaleString("ro-RO")} L`})]})]})})}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-green-100 p-3 dark:bg-green-900/30",children:(0,a.jsx)(S.DollarSign,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Cost total"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:U?"-":`${(O?.totalCost||0).toLocaleString("ro-RO")} RON`})]})]})})}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,a.jsx)(C.TrendingUp,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Preț mediu/L"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:U?"-":`${(O?.averagePricePerLiter||0).toFixed(2)} RON`})]})]})})})]}),F&&(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.CardTitle,{className:"text-base",children:"Filtre"}),G&&(0,a.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{V({page:1,pageSize:A.pageSize})},children:[(0,a.jsx)(N.X,{className:"mr-2 h-4 w-4"}),"Resetează"]})]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Vehicul"}),(0,a.jsxs)(d.Select,{value:A.vehicleId?.toString()||"all",onValueChange:e=>_("vehicleId","all"===e?void 0:parseInt(e)),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Toate vehiculele"})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"all",children:"Toate vehiculele"}),q?.data.map(e=>(0,a.jsx)(d.SelectItem,{value:e.id.toString(),children:e.licensePlate},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tip combustibil"}),(0,a.jsxs)(d.Select,{value:A.fuelTypeId?.toString()||"all",onValueChange:e=>_("fuelTypeId","all"===e?void 0:parseInt(e)),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Toate tipurile"})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"all",children:"Toate tipurile"}),H?.map(e=>(0,a.jsx)(d.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stație"}),(0,a.jsxs)(d.Select,{value:A.fuelStationId?.toString()||"all",onValueChange:e=>_("fuelStationId","all"===e?void 0:parseInt(e)),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Toate stațiile"})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"all",children:"Toate stațiile"}),$?.map(e=>(0,a.jsx)(d.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"De la"}),(0,a.jsx)(x.Input,{type:"date",value:A.dateFrom||"",onChange:e=>_("dateFrom",e.target.value||void 0)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Până la"}),(0,a.jsx)(x.Input,{type:"date",value:A.dateTo||"",onChange:e=>_("dateTo",e.target.value||void 0)})]})]})})]}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsx)(s.DataTable,{columns:X,data:B?.data||[],loading:L,searchPlaceholder:"Caută după vehicul, șofer, factură...",serverSide:!0,totalItems:B?.pagination.totalItems,currentPage:A.page||1,pageSize:A.pageSize||10,onPageChange:e=>V(a=>({...a,page:e})),onPageSizeChange:e=>V(a=>({...a,pageSize:e,page:1})),onSearchChange:e=>V(a=>({...a,search:e,page:1})),onSortChange:(e,a)=>V(t=>({...t,sortBy:e,sortOrder:a}))})})}),(0,a.jsx)(c.AlertDialog,{open:!!K,onOpenChange:e=>!e&&R(null),children:(0,a.jsxs)(c.AlertDialogContent,{children:[(0,a.jsxs)(c.AlertDialogHeader,{children:[(0,a.jsx)(c.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi această alimentare?"}),(0,a.jsx)(c.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Tranzacția va fi ștearsă definitiv."})]}),(0,a.jsxs)(c.AlertDialogFooter,{children:[(0,a.jsx)(c.AlertDialogCancel,{children:"Anulează"}),(0,a.jsx)(c.AlertDialogAction,{onClick:Q,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}e.s(["default",()=>A],94849)}]);