(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71513,e=>{"use strict";var a=e.i(63461),s=e.i(84505);function t({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})})}function l({className:e,...t}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",e),...t})}function r({className:e,...t}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t})}function i({className:e,...t}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function n({className:e,...t}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function c({className:e,...t}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}e.s(["Table",()=>t,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>i])},53502,e=>{"use strict";let a=(0,e.i(83775).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>a],53502)},89583,e=>{"use strict";var a=e.i(58721);e.s(["AlertTriangle",()=>a.default])},94899,e=>{"use strict";let a=(0,e.i(83775).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],94899)},55608,e=>{"use strict";var a=e.i(99426);e.s(["X",()=>a.default])},37420,e=>{"use strict";let a=(0,e.i(83775).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>a],37420)},97213,e=>{"use strict";let a=(0,e.i(83775).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],97213)},57312,e=>{"use strict";let a=(0,e.i(83775).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>a],57312)},55366,e=>{"use strict";var a=e.i(66704),s=e.i(25542);function t(e,t,r){let[i,n]=(0,a.normalizeDates)(r?.in,e,t),c=l(i,n),d=Math.abs((0,s.differenceInCalendarDays)(i,n));i.setDate(i.getDate()-c*d);let o=Number(l(i,n)===-c),x=c*(d-o);return 0===x?0:x}function l(e,a){let s=e.getFullYear()-a.getFullYear()||e.getMonth()-a.getMonth()||e.getDate()-a.getDate()||e.getHours()-a.getHours()||e.getMinutes()-a.getMinutes()||e.getSeconds()-a.getSeconds()||e.getMilliseconds()-a.getMilliseconds();return s<0?-1:s>0?1:s}e.s(["differenceInDays",()=>t])},24455,e=>{"use strict";var a=e.i(63461),s=e.i(96041),t=e.i(18439),l=e.i(27413),r=e.i(4770),i=e.i(21592),n=e.i(87334),c=e.i(46323),d=e.i(74533),o=e.i(7715),x=e.i(47131),m=e.i(50519),h=e.i(94899),u=e.i(57617),g=e.i(9533),j=e.i(40498),p=e.i(43013),v=e.i(55608),b=e.i(57312),N=e.i(62382),f=e.i(37420),y=e.i(97213),w=e.i(89583);e.i(66237);var C=e.i(69632),D=e.i(84505),k=e.i(58401),S=e.i(55366);function T(){let e=(0,t.useRouter)(),[T,A]=s.useState({page:1,pageSize:10}),[M,I]=s.useState(!1),[z,B]=s.useState(null),{data:E,isLoading:P,isError:V}=(0,C.useDrivers)(T),{data:H}=(0,C.useExpiringLicenses)(30),K=(0,C.useDeleteDriver)(),F=s.useMemo(()=>[{id:"name",header:({column:e})=>(0,a.jsxs)(r.Button,{variant:"ghost",size:"sm",className:"-ml-3 h-8",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Nume",(0,a.jsx)(b.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:(0,a.jsx)(j.User,{className:"h-5 w-5 text-slate-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:[s.lastName," ",s.firstName]}),s.email&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[(0,a.jsx)(y.Mail,{className:"h-3 w-3"}),s.email]})]})]})}},{accessorKey:"licenseNumber",header:"Nr. Permis",cell:({row:e})=>(0,a.jsx)("div",{className:"font-mono text-sm",children:e.getValue("licenseNumber")})},{accessorKey:"licenseType",header:"Categorie",cell:({row:e})=>{let s=e.getValue("licenseType");return s?(0,a.jsx)(i.Badge,{variant:"outline",children:s}):"-"}},{accessorKey:"licenseExpiryDate",header:"Exp. Permis",cell:({row:e})=>{let s=e.getValue("licenseExpiryDate");if(!s)return"-";let t=new Date(s),l=(0,S.differenceInDays)(t,new Date),r=l<=30&&l>0,n=l<0;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,D.cn)(n&&"text-red-600",r&&"text-amber-600"),children:(0,k.format)(t,"dd.MM.yyyy")}),n&&(0,a.jsx)(i.Badge,{variant:"destructive",className:"text-xs",children:"Expirat"}),r&&(0,a.jsxs)(i.Badge,{variant:"outline",className:"border-amber-500 text-amber-600 text-xs",children:[l," zile"]})]})}},{accessorKey:"mobileNumber",header:"Telefon",cell:({row:e})=>{let s=e.getValue("mobileNumber");return s?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(f.Phone,{className:"h-3 w-3 text-slate-400"}),s]}):"-"}},{accessorKey:"department",header:"Departament",cell:({row:e})=>{let a=e.original;return a.department?.name||"-"}},{accessorKey:"city",header:"Oraș",cell:({row:e})=>{let a=e.original;return a.city?.name||"-"}},{accessorKey:"isActive",header:"Status",cell:({row:e})=>{let s=e.getValue("isActive");return(0,a.jsx)(i.Badge,{variant:s?"default":"secondary",children:s?"Activ":"Inactiv"})}},{id:"actions",header:"",cell:({row:s})=>{let t=s.original;return(0,a.jsxs)(n.DropdownMenu,{children:[(0,a.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(m.MoreHorizontal,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Deschide meniu"})]})}),(0,a.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(n.DropdownMenuLabel,{children:"Acțiuni"}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>e.push(`/drivers/${t.id}`),children:[(0,a.jsx)(h.Eye,{className:"mr-2 h-4 w-4"}),"Vizualizare"]}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>e.push(`/drivers/${t.id}/edit`),children:[(0,a.jsx)(u.Pencil,{className:"mr-2 h-4 w-4"}),"Editare"]}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>e.push(`/drivers/${t.id}/documents`),children:[(0,a.jsx)(N.FileText,{className:"mr-2 h-4 w-4"}),"Documente"]}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>B(t.id),className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(g.Trash2,{className:"mr-2 h-4 w-4"}),"Șterge"]})]})]})}}],[e]),U=(e,a)=>{A(s=>({...s,[e]:"all"===a?void 0:a,page:1}))},R=T.licenseType||void 0!==T.isActive||T.search,O=async()=>{z&&(await K.mutateAsync(z),B(null))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Șoferi"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Gestionează șoferii flotei"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>I(!M),className:(0,D.cn)(R&&"border-blue-500 text-blue-600"),children:[(0,a.jsx)(p.Filter,{className:"mr-2 h-4 w-4"}),"Filtre",R&&(0,a.jsx)(i.Badge,{variant:"secondary",className:"ml-2 h-5 px-1.5",children:[T.licenseType,void 0!==T.isActive?"1":null,T.search].filter(Boolean).length})]}),(0,a.jsxs)(r.Button,{onClick:()=>e.push("/drivers/new"),children:[(0,a.jsx)(x.Plus,{className:"mr-2 h-4 w-4"}),"Șofer nou"]})]})]}),M&&(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.CardTitle,{className:"text-base",children:"Filtre"}),R&&(0,a.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{A({page:1,pageSize:T.pageSize})},children:[(0,a.jsx)(v.X,{className:"mr-2 h-4 w-4"}),"Resetează"]})]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Categorie permis"}),(0,a.jsxs)(d.Select,{value:T.licenseType||"all",onValueChange:e=>U("licenseType","all"===e?void 0:e),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Toate categoriile"})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"all",children:"Toate categoriile"}),(0,a.jsx)(d.SelectItem,{value:"B",children:"B"}),(0,a.jsx)(d.SelectItem,{value:"C",children:"C"}),(0,a.jsx)(d.SelectItem,{value:"CE",children:"CE"}),(0,a.jsx)(d.SelectItem,{value:"D",children:"D"}),(0,a.jsx)(d.SelectItem,{value:"DE",children:"DE"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status"}),(0,a.jsxs)(d.Select,{value:T.isActive?.toString()||"all",onValueChange:e=>U("isActive","all"===e?void 0:"true"===e),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Toate"})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"all",children:"Toate"}),(0,a.jsx)(d.SelectItem,{value:"true",children:"Activi"}),(0,a.jsx)(d.SelectItem,{value:"false",children:"Inactivi"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30",children:(0,a.jsx)(j.User,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total șoferi"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:P?"-":E?.pagination.totalItems||0})]})]})})}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30",children:(0,a.jsx)(w.AlertTriangle,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Permise expiră în 30 zile"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:H?.length||0})]})]})})})]}),H&&H.length>0&&(0,a.jsxs)(o.Card,{className:"border-amber-200 bg-amber-50 dark:border-amber-900/50 dark:bg-amber-900/20",children:[(0,a.jsx)(o.CardHeader,{className:"pb-2",children:(0,a.jsxs)(o.CardTitle,{className:"flex items-center gap-2 text-amber-800 dark:text-amber-200",children:[(0,a.jsx)(w.AlertTriangle,{className:"h-5 w-5"}),"Atenție: Permise de conducere expiră curând"]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[H.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-white/50 px-3 py-2 dark:bg-slate-900/50",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.lastName," ",e.firstName]}),(0,a.jsxs)("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:["Expiră: ",e.licenseExpiryDate&&(0,k.format)(new Date(e.licenseExpiryDate),"dd.MM.yyyy")]})]},e.id)),H.length>5&&(0,a.jsxs)("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["... și încă ",H.length-5," șoferi"]})]})})]}),(0,a.jsx)(o.Card,{children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsx)(l.DataTable,{columns:F,data:E?.data||[],loading:P,searchPlaceholder:"Caută după nume, permis, telefon...",serverSide:!0,totalItems:E?.pagination.totalItems,currentPage:T.page||1,pageSize:T.pageSize||10,onPageChange:e=>A(a=>({...a,page:e})),onPageSizeChange:e=>A(a=>({...a,pageSize:e,page:1})),onSearchChange:e=>A(a=>({...a,search:e,page:1})),onSortChange:(e,a)=>A(s=>({...s,sortBy:e,sortOrder:a}))})})}),(0,a.jsx)(c.AlertDialog,{open:!!z,onOpenChange:e=>!e&&B(null),children:(0,a.jsxs)(c.AlertDialogContent,{children:[(0,a.jsxs)(c.AlertDialogHeader,{children:[(0,a.jsx)(c.AlertDialogTitle,{children:"Ești sigur că vrei să ștergi acest șofer?"}),(0,a.jsx)(c.AlertDialogDescription,{children:"Această acțiune nu poate fi anulată. Șoferul va fi marcat ca inactiv și nu va mai apărea în listele active."})]}),(0,a.jsxs)(c.AlertDialogFooter,{children:[(0,a.jsx)(c.AlertDialogCancel,{children:"Anulează"}),(0,a.jsx)(c.AlertDialogAction,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Șterge"})]})]})})]})}e.s(["default",()=>T])}]);