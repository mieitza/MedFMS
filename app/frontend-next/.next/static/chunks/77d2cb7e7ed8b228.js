(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9533,e=>{"use strict";let t=(0,e.i(83775).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],9533)},57177,e=>{"use strict";let t=(0,e.i(83775).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],57177)},76071,e=>{"use strict";let t=(0,e.i(83775).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],76071)},14251,e=>{"use strict";var t=e.i(63461),a=e.i(96041);e.i(54466);var r=e.i(56590),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,r.createSlot)(`Primitive.${i}`),l=a.forwardRef((e,a)=>{let{asChild:r,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:i,{...l,ref:a})});return l.displayName=`Primitive.${i}`,{...e,[i]:l}},{}),s=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=e.i(84505);function n({className:e,...a}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],14251)},62378,e=>{"use strict";var t=e.i(63461),a=e.i(84505);function r({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}e.s(["Textarea",()=>r])},14218,e=>{"use strict";var t=e.i(63461),a=e.i(18439),r=e.i(60945),i=e.i(58296),s=e.i(71396),l=e.i(4770),n=e.i(34066),o=e.i(62378),d=e.i(20749),c=e.i(74533),u=e.i(7715),m=e.i(76071),h=e.i(57177),x=e.i(25241),j=e.i(47131),p=e.i(9533);e.i(66237);var g=e.i(9170),v=e.i(97376);let b=s.z.object({sourceWarehouseId:s.z.coerce.number().optional().nullable(),destinationWarehouseId:s.z.coerce.number().optional().nullable(),destinationVehicleId:s.z.coerce.number().optional().nullable(),notes:s.z.string().optional().nullable(),items:s.z.array(s.z.object({materialId:s.z.coerce.number().min(1,"Materialul este obligatoriu"),quantity:s.z.coerce.number().min(.01,"Cantitatea trebuie să fie mai mare decât 0")})).min(1,"Trebuie să adăugați cel puțin un material")});function f(){let e=(0,a.useRouter)(),s=(0,g.useCreateTransferRequest)(),{data:f,isLoading:S}=(0,g.useWarehouses)(),{data:C,isLoading:F}=(0,g.useMaterials)({pageSize:1e3}),{data:y,isLoading:I}=(0,v.useVehicles)({pageSize:1e3}),z=C?.data||[],N=y?.data||[],w=(0,r.useForm)({resolver:(0,i.zodResolver)(b),defaultValues:{sourceWarehouseId:null,destinationWarehouseId:null,destinationVehicleId:null,notes:null,items:[{materialId:0,quantity:1}]}}),{fields:M,append:k,remove:V}=(0,r.useFieldArray)({control:w.control,name:"items"}),T=async t=>{await s.mutateAsync({sourceWarehouseId:t.sourceWarehouseId||null,destinationWarehouseId:t.destinationWarehouseId||null,destinationVehicleId:t.destinationVehicleId||null,notes:t.notes||null,items:t.items}),e.push("/warehouse?tab=transfers")},L=s.isPending;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,t.jsx)(m.ArrowLeft,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Cerere de transfer nouă"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Creează o cerere pentru transferul materialelor"})]})]}),(0,t.jsx)(d.Form,{...w,children:(0,t.jsxs)("form",{onSubmit:w.handleSubmit(T),className:"space-y-6",children:[(0,t.jsxs)(u.Card,{children:[(0,t.jsxs)(u.CardHeader,{children:[(0,t.jsx)(u.CardTitle,{children:"Detalii transfer"}),(0,t.jsx)(u.CardDescription,{children:"Specificați sursa și destinația transferului"})]}),(0,t.jsxs)(u.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsx)(d.FormField,{control:w.control,name:"sourceWarehouseId",render:({field:e})=>(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Depozit sursă"}),(0,t.jsxs)(c.Select,{onValueChange:t=>e.onChange("none"===t?null:parseInt(t)),value:e.value?.toString()||"none",disabled:S,children:[(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Selectează depozitul sursă"})})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"none",children:"Niciun depozit"}),f?.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,t.jsx)(d.FormMessage,{})]})}),(0,t.jsx)(d.FormField,{control:w.control,name:"destinationWarehouseId",render:({field:e})=>(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Depozit destinație"}),(0,t.jsxs)(c.Select,{onValueChange:t=>e.onChange("none"===t?null:parseInt(t)),value:e.value?.toString()||"none",disabled:S,children:[(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Selectează depozitul destinație"})})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"none",children:"Niciun depozit"}),f?.map(e=>(0,t.jsx)(c.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,t.jsx)(d.FormDescription,{children:"Sau selectați un vehicul mai jos"}),(0,t.jsx)(d.FormMessage,{})]})})]}),(0,t.jsx)(d.FormField,{control:w.control,name:"destinationVehicleId",render:({field:e})=>(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Vehicul destinație (alternativ)"}),(0,t.jsxs)(c.Select,{onValueChange:t=>e.onChange("none"===t?null:parseInt(t)),value:e.value?.toString()||"none",disabled:I,children:[(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Selectează vehiculul"})})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"none",children:"Niciun vehicul"}),N.map(e=>(0,t.jsxs)(c.SelectItem,{value:e.id.toString(),children:[e.licensePlate," - ",e.vehicleCode]},e.id))]})]}),(0,t.jsx)(d.FormDescription,{children:"Transfer către vehicul în loc de depozit"}),(0,t.jsx)(d.FormMessage,{})]})}),(0,t.jsx)(d.FormField,{control:w.control,name:"notes",render:({field:e})=>(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Notițe"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(o.Textarea,{placeholder:"Observații despre transfer...",className:"min-h-[80px]",...e,value:e.value??""})}),(0,t.jsx)(d.FormMessage,{})]})})]})]}),(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(u.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.CardTitle,{children:"Materiale de transferat"}),(0,t.jsx)(u.CardDescription,{children:"Adăugați materialele și cantitățile dorite"})]}),(0,t.jsxs)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>k({materialId:0,quantity:1}),children:[(0,t.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"Adaugă material"]})]})}),(0,t.jsxs)(u.CardContent,{className:"space-y-4",children:[M.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,t.jsx)(d.FormField,{control:w.control,name:`items.${a}.materialId`,render:({field:e})=>(0,t.jsxs)(d.FormItem,{className:"flex-1",children:[(0,t.jsx)(d.FormLabel,{children:"Material"}),(0,t.jsxs)(c.Select,{onValueChange:e.onChange,value:e.value?.toString()||"",disabled:F,children:[(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Selectează materialul"})})}),(0,t.jsx)(c.SelectContent,{children:z.map(e=>(0,t.jsxs)(c.SelectItem,{value:e.id.toString(),children:[e.materialCode," - ",e.name]},e.id))})]}),(0,t.jsx)(d.FormMessage,{})]})}),(0,t.jsx)(d.FormField,{control:w.control,name:`items.${a}.quantity`,render:({field:e})=>(0,t.jsxs)(d.FormItem,{className:"w-32",children:[(0,t.jsx)(d.FormLabel,{children:"Cantitate"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(n.Input,{type:"number",step:"0.01",min:"0.01",...e,onChange:t=>e.onChange(t.target.value?parseFloat(t.target.value):1)})}),(0,t.jsx)(d.FormMessage,{})]})}),M.length>1&&(0,t.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>V(a),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(p.Trash2,{className:"h-4 w-4"})})]},e.id)),w.formState.errors.items?.root&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:w.formState.errors.items.root.message})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>e.back(),children:"Anulează"}),(0,t.jsxs)(l.Button,{type:"submit",disabled:L,children:[L&&(0,t.jsx)(x.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,t.jsx)(h.Save,{className:"mr-2 h-4 w-4"}),"Creează cererea"]})]})]})})]})}e.s(["default",()=>f])}]);