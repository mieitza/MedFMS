(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14251,e=>{"use strict";var t=e.i(63461),a=e.i(96041);e.i(54466);var l=e.i(56590),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=(0,l.createSlot)(`Primitive.${s}`),r=a.forwardRef((e,a)=>{let{asChild:l,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?i:s,{...r,ref:a})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(s.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var r=e.i(84505);function n({className:e,...a}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],14251)},91813,e=>{"use strict";let t=(0,e.i(83775).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],91813)},954,e=>{"use strict";let t=(0,e.i(83775).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>t],954)},71513,e=>{"use strict";var t=e.i(63461),a=e.i(84505);function l({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...l})})}function s({className:e,...l}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...l})}function i({className:e,...l}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...l})}function r({className:e,...l}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...l})}function n({className:e,...l}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}function c({className:e,...l}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}e.s(["Table",()=>l,"TableBody",()=>i,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>r])},89583,e=>{"use strict";var t=e.i(58721);e.s(["AlertTriangle",()=>t.default])},85483,e=>{"use strict";let t=(0,e.i(83775).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],85483)},99380,e=>{"use strict";let t=(0,e.i(83775).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],99380)},3891,e=>{"use strict";let t=(0,e.i(83775).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>t],3891)},88620,e=>{"use strict";var t=e.i(63461),a=e.i(96041),l=e.i(18587),s=e.i(89690),i=e.i(7715),r=e.i(4946),n=e.i(21592),c=e.i(14251),d=e.i(34066),o=e.i(74533),x=e.i(71513),u=e.i(954),h=e.i(72493),m=e.i(99848),p=e.i(44444),g=e.i(69232),j=e.i(99380),b=e.i(3891),f=e.i(91813),v=e.i(89583),N=e.i(85483),y=e.i(29764);e.i(56851);var C=e.i(1975),w=e.i(88621),k=e.i(20234),S=e.i(26909);e.i(66237);var T=e.i(9170);let D=[{value:"7",label:"Ultimele 7 zile"},{value:"30",label:"Ultimele 30 zile"},{value:"90",label:"Ultimele 90 zile"},{value:"365",label:"Ultimul an"},{value:"custom",label:"Perioadă personalizată"}];function M({title:e,value:a,suffix:l="",icon:s,color:n,loading:c=!1,trend:d,trendLabel:o}){return(0,t.jsx)(i.Card,{children:(0,t.jsx)(i.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-full ${n}`,children:(0,t.jsx)(s,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:e}),c?(0,t.jsx)(r.Skeleton,{className:"h-8 w-24"}):(0,t.jsxs)("p",{className:"text-2xl font-bold",children:["number"==typeof a?a.toLocaleString("ro-RO",{maximumFractionDigits:2}):a,l&&(0,t.jsx)("span",{className:"text-sm font-normal text-slate-500 ml-1",children:l})]})]})]}),void 0!==d&&(0,t.jsxs)("div",{className:`flex items-center gap-1 text-sm ${d>=0?"text-green-600":"text-red-600"}`,children:[d>=0?(0,t.jsx)(j.TrendingUp,{className:"h-4 w-4"}):(0,t.jsx)(b.TrendingDown,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[Math.abs(d).toFixed(1),"%"]}),o&&(0,t.jsx)("span",{className:"text-slate-500 text-xs",children:o})]})]})})})}function P({value:e,max:a,color:l}){return(0,t.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-full rounded-full ${l}`,style:{width:`${Math.min(a>0?e/a*100:0,100)}%`}})})}function z({title:e,description:a,href:s,icon:i}){return(0,t.jsx)(l.default,{href:s,className:"block group",children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i,{className:"h-5 w-5 text-slate-500 group-hover:text-primary transition-colors"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium group-hover:text-primary transition-colors",children:e}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:a})]})]}),(0,t.jsx)(y.ChevronRight,{className:"h-5 w-5 text-slate-400 group-hover:text-primary transition-colors"})]})})}function F(){let[e,l]=(0,a.useState)("30"),[j,b]=(0,a.useState)(""),[y,F]=(0,a.useState)(""),A=(0,a.useMemo)(()=>{if("custom"===e&&j&&y)return{startDate:j,endDate:y};if("custom"!==e){let t=parseInt(e),a=new Date,l=new Date;return l.setDate(a.getDate()-t),{startDate:l.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]}}return{}},[e,j,y]),{data:L,isLoading:R}=(0,s.useQuery)({queryKey:["vehicles","overview"],queryFn:()=>C.vehiclesApi.getAll({pageSize:1})}),{data:q,isLoading:H}=(0,s.useQuery)({queryKey:["drivers","overview"],queryFn:()=>w.driversApi.getAll({pageSize:1})}),{data:O,isLoading:U}=(0,s.useQuery)({queryKey:["fuel","overview",A],queryFn:()=>k.fuelApi.getAll({dateFrom:A.startDate,dateTo:A.endDate,pageSize:1e4}),enabled:!!A.startDate&&!!A.endDate}),{data:I,isLoading:B}=(0,s.useQuery)({queryKey:["maintenance","overview",A],queryFn:()=>S.maintenanceApi.getAll({dateFrom:A.startDate,dateTo:A.endDate,pageSize:1e3}),enabled:!!A.startDate&&!!A.endDate}),{data:K,isLoading:V}=(0,T.useLowStockMaterials)(),$=(0,a.useMemo)(()=>{let e=O?.data||[],t=e.reduce((e,t)=>e+(parseFloat(String(t.totalCost))||0),0),a=e.reduce((e,t)=>e+(parseFloat(String(t.quantity))||0),0);return{totalCost:t,totalQuantity:a,avgPricePerLiter:a>0?t/a:0,count:e.length}},[O]),Q=(0,a.useMemo)(()=>{let e=I?.data||[],t=e.filter(e=>"pending"===e.status).length,a=e.filter(e=>"in_progress"===e.status).length,l=e.filter(e=>"completed"===e.status).length,s=e.reduce((e,t)=>e+(parseFloat(String(t.actualCost))||0),0);return{total:e.length,pending:t,inProgress:a,completed:l,totalCost:s}},[I]),_=(0,a.useMemo)(()=>{let e=O?.data||[],t={};return e.forEach(e=>{let a=e.vehicle?.licensePlate||"Unknown";t[a]||(t[a]={licensePlate:a,totalCost:0,quantity:0}),t[a].totalCost+=parseFloat(String(e.totalCost))||0,t[a].quantity+=parseFloat(String(e.quantity))||0}),Object.values(t).sort((e,t)=>t.totalCost-e.totalCost).slice(0,5)},[O]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Rapoarte și Analize"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Prezentare generală a performanței flotei"})]})}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{className:"text-base",children:"Perioada de Analiză"})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Perioadă"}),(0,t.jsxs)(o.Select,{value:e,onValueChange:l,children:[(0,t.jsx)(o.SelectTrigger,{className:"w-[200px]",children:(0,t.jsx)(o.SelectValue,{placeholder:"Selectează perioada"})}),(0,t.jsx)(o.SelectContent,{children:D.map(e=>(0,t.jsx)(o.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),"custom"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"De la"}),(0,t.jsx)(d.Input,{type:"date",value:j,onChange:e=>b(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Până la"}),(0,t.jsx)(d.Input,{type:"date",value:y,onChange:e=>F(e.target.value)})]})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(M,{title:"Total Vehicule",value:L?.pagination.totalItems||0,icon:u.Car,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-600",loading:R}),(0,t.jsx)(M,{title:"Total Șoferi",value:q?.pagination.totalItems||0,icon:h.Users,color:"bg-green-100 dark:bg-green-900/30 text-green-600",loading:H}),(0,t.jsx)(M,{title:"Cost Combustibil",value:$.totalCost,suffix:"RON",icon:m.Fuel,color:"bg-amber-100 dark:bg-amber-900/30 text-amber-600",loading:U}),(0,t.jsx)(M,{title:"Comenzi Mentenanță",value:Q.total,icon:p.Wrench,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-600",loading:B})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(M,{title:"Combustibil Consumat",value:$.totalQuantity,suffix:"L",icon:m.Fuel,color:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600",loading:U}),(0,t.jsx)(M,{title:"Preț Mediu/L",value:$.avgPricePerLiter,suffix:"RON",icon:f.DollarSign,color:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600",loading:U}),(0,t.jsx)(M,{title:"Mentenanță În Așteptare",value:Q.pending,icon:v.AlertTriangle,color:"bg-orange-100 dark:bg-orange-900/30 text-orange-600",loading:B}),(0,t.jsx)(M,{title:"Stoc Critic",value:K?.length||0,icon:g.Package,color:"bg-red-100 dark:bg-red-900/30 text-red-600",loading:V})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Top Vehicule după Cost Combustibil"}),(0,t.jsx)(i.CardDescription,{children:"Vehiculele cu cel mai mare consum în perioada selectată"})]}),(0,t.jsx)(i.CardContent,{children:U?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"})]}):_.length>0?(0,t.jsx)("div",{className:"space-y-4",children:_.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Badge,{variant:"outline",className:"w-6 h-6 p-0 justify-center",children:a+1}),(0,t.jsx)("span",{className:"font-medium",children:e.licensePlate})]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e.totalCost.toFixed(2)," RON"]})]}),(0,t.jsx)(P,{value:e.totalCost,max:_[0]?.totalCost||1,color:"bg-blue-600"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:[e.quantity.toFixed(2)," L"]})]},e.licensePlate))}):(0,t.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există date pentru perioada selectată"})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Status Mentenanță"}),(0,t.jsx)(i.CardDescription,{children:"Distribuția comenzilor de lucru"})]}),(0,t.jsx)(i.CardContent,{children:B?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),(0,t.jsx)("span",{children:"În Așteptare"})]}),(0,t.jsx)("span",{className:"font-bold",children:Q.pending})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("span",{children:"În Progres"})]}),(0,t.jsx)("span",{className:"font-bold",children:Q.inProgress})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{children:"Finalizate"})]}),(0,t.jsx)("span",{className:"font-bold",children:Q.completed})]}),(0,t.jsx)("div",{className:"pt-2 border-t",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Cost Total Mentenanță"}),(0,t.jsxs)("span",{className:"font-bold",children:[Q.totalCost.toFixed(2)," RON"]})]})})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Materiale Stoc Critic"}),(0,t.jsx)(i.CardDescription,{children:"Materialele care necesită reaprovizionare"})]}),(0,t.jsx)(i.CardContent,{children:V?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"}),(0,t.jsx)(r.Skeleton,{className:"h-8 w-full"})]}):K&&K.length>0?(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableHead,{children:"Material"}),(0,t.jsx)(x.TableHead,{className:"text-right",children:"Stoc"}),(0,t.jsx)(x.TableHead,{className:"text-right",children:"Critic"})]})}),(0,t.jsx)(x.TableBody,{children:K.slice(0,5).map(e=>(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.materialCode})]})}),(0,t.jsx)(x.TableCell,{className:"text-right",children:(0,t.jsx)(n.Badge,{variant:0===e.currentStock?"destructive":"secondary",children:e.currentStock})}),(0,t.jsx)(x.TableCell,{className:"text-right text-slate-500",children:e.criticalLevel})]},e.materialCode))})]}):(0,t.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nu există materiale sub nivel critic"})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Rapoarte Detaliate"}),(0,t.jsx)(i.CardDescription,{children:"Accesează rapoarte specifice pentru analize aprofundate"})]}),(0,t.jsxs)(i.CardContent,{className:"space-y-2",children:[(0,t.jsx)(z,{title:"Rapoarte Combustibil",description:"Analiză detaliată a consumului și costurilor",href:"/fuel/reports",icon:m.Fuel}),(0,t.jsx)(z,{title:"Rapoarte Depozit",description:"Stocuri, prețuri, transferuri și expirări",href:"/warehouse/reports",icon:g.Package}),(0,t.jsx)(z,{title:"Alimentări Duminică",description:"Raport alimentări efectuate duminica",href:"/fuel/reports/sunday-fueling",icon:N.Calendar}),(0,t.jsx)(z,{title:"Raport Zilnic Vehicule",description:"Consum zilnic pe fiecare vehicul",href:"/fuel/reports/daily-vehicle",icon:u.Car})]})]})]})]})}e.s(["default",()=>F])}]);