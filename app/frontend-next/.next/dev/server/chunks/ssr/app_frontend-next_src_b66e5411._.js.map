{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mihai/dev/GitHub/MedFMS/app/frontend-next/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/mihai/dev/GitHub/MedFMS/app/frontend-next/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,oJAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/mihai/dev/GitHub/MedFMS/app/frontend-next/src/lib/api/chat.ts"],"sourcesContent":["import { api } from './client';\n\nexport interface ChatMessage {\n  role: 'user' | 'assistant';\n  content: string;\n}\n\nexport interface ChatResponse {\n  content: string;\n  toolsUsed: string[];\n}\n\nexport interface ChatHealthResponse {\n  available: boolean;\n  provider: string;\n  model: string;\n  error?: string;\n}\n\nexport interface ChatConfigResponse {\n  provider: string;\n  model: string;\n  baseUrl: string;\n}\n\nexport interface ChatTool {\n  name: string;\n  description: string;\n  parameters: {\n    type: 'object';\n    properties: Record<string, {\n      type: string;\n      description: string;\n      enum?: string[];\n    }>;\n    required?: string[];\n  };\n}\n\nexport interface StreamEvent {\n  type: 'tool_start' | 'tool_end' | 'content' | 'done' | 'error';\n  content?: string;\n  tools?: string[];\n  error?: string;\n}\n\nexport const chatApi = {\n  // Check LLM service health\n  getHealth: async (): Promise<ChatHealthResponse> => {\n    return api.get<ChatHealthResponse>('/chat/health');\n  },\n\n  // Get LLM configuration (admin only)\n  getConfig: async (): Promise<ChatConfigResponse> => {\n    return api.get<ChatConfigResponse>('/chat/config');\n  },\n\n  // Send chat message (non-streaming)\n  sendMessage: async (messages: ChatMessage[]): Promise<ChatResponse> => {\n    return api.post<ChatResponse>('/chat', { messages, stream: false });\n  },\n\n  // Get available tools\n  getTools: async (): Promise<ChatTool[]> => {\n    return api.get<ChatTool[]>('/chat/tools');\n  },\n\n  // Test a specific tool (admin only)\n  testTool: async (name: string, args: Record<string, unknown>): Promise<unknown> => {\n    return api.post<unknown>(`/chat/tools/${name}/test`, args);\n  },\n\n  // Stream chat message\n  streamMessage: async (\n    messages: ChatMessage[],\n    onEvent: (event: StreamEvent) => void,\n    onError: (error: Error) => void\n  ): Promise<void> => {\n    const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api';\n    const token = typeof window !== 'undefined' ? localStorage.getItem('auth_token') : null;\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify({ messages, stream: true }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: { message: 'Unknown error' } }));\n        throw new Error(errorData.error?.message || `HTTP error ${response.status}`);\n      }\n\n      const reader = response.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (!line.startsWith('data: ')) continue;\n          const data = line.slice(6);\n\n          try {\n            const event = JSON.parse(data) as StreamEvent;\n            onEvent(event);\n          } catch {\n            // Skip invalid JSON\n          }\n        }\n      }\n    } catch (error) {\n      onError(error instanceof Error ? error : new Error('Unknown error'));\n    }\n  },\n};\n"],"names":[],"mappings":";;;;AAAA;;AA8CO,MAAM,UAAU;IACrB,2BAA2B;IAC3B,WAAW;QACT,OAAO,6JAAG,CAAC,GAAG,CAAqB;IACrC;IAEA,qCAAqC;IACrC,WAAW;QACT,OAAO,6JAAG,CAAC,GAAG,CAAqB;IACrC;IAEA,oCAAoC;IACpC,aAAa,OAAO;QAClB,OAAO,6JAAG,CAAC,IAAI,CAAe,SAAS;YAAE;YAAU,QAAQ;QAAM;IACnE;IAEA,sBAAsB;IACtB,UAAU;QACR,OAAO,6JAAG,CAAC,GAAG,CAAa;IAC7B;IAEA,oCAAoC;IACpC,UAAU,OAAO,MAAc;QAC7B,OAAO,6JAAG,CAAC,IAAI,CAAU,CAAC,YAAY,EAAE,KAAK,KAAK,CAAC,EAAE;IACvD;IAEA,sBAAsB;IACtB,eAAe,OACb,UACA,SACA;QAEA,MAAM,eAAe,iEAAmC;QACxD,MAAM,QAAQ,sCAAgC,0BAAqC;QAEnF,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,KAAK,CAAC,EAAE;gBACnD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,GAAI,sCAAQ,0BAAuC,CAAC,CAAC;gBACvD;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU,QAAQ;gBAAK;YAChD;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;wBAAE,OAAO;4BAAE,SAAS;wBAAgB;oBAAE,CAAC;gBAC5F,MAAM,IAAI,MAAM,UAAU,KAAK,EAAE,WAAW,CAAC,WAAW,EAAE,SAAS,MAAM,EAAE;YAC7E;YAEA,MAAM,SAAS,SAAS,IAAI,EAAE;YAC9B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;YAE7B,MAAM,UAAU,IAAI;YACpB,IAAI,SAAS;YAEb,MAAO,KAAM;gBACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,IAAI;gBACzC,IAAI,MAAM;gBAEV,UAAU,QAAQ,MAAM,CAAC,OAAO;oBAAE,QAAQ;gBAAK;gBAC/C,MAAM,QAAQ,OAAO,KAAK,CAAC;gBAC3B,SAAS,MAAM,GAAG,MAAM;gBAExB,KAAK,MAAM,QAAQ,MAAO;oBACxB,IAAI,CAAC,KAAK,UAAU,CAAC,WAAW;oBAChC,MAAM,OAAO,KAAK,KAAK,CAAC;oBAExB,IAAI;wBACF,MAAM,QAAQ,KAAK,KAAK,CAAC;wBACzB,QAAQ;oBACV,EAAE,OAAM;oBACN,oBAAoB;oBACtB;gBACF;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,iBAAiB,QAAQ,QAAQ,IAAI,MAAM;QACrD;IACF;AACF"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/mihai/dev/GitHub/MedFMS/app/frontend-next/src/app/%28dashboard%29/assistant/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport {\n  Bot,\n  User,\n  Send,\n  Loader2,\n  Sparkles,\n  AlertCircle,\n  Wrench,\n  Trash2,\n  Info,\n  Settings,\n  Maximize2,\n  Copy,\n  Check,\n  X,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { useAuthStore } from '@/lib/stores/auth-store';\nimport { chatApi, type ChatMessage, type StreamEvent } from '@/lib/api/chat';\nimport { cn } from '@/lib/utils';\n\ninterface Message extends ChatMessage {\n  id: string;\n  isLoading?: boolean;\n  toolsUsed?: string[];\n}\n\n// Enhanced Markdown renderer for chat messages\nfunction formatMessage(content: string, fullMarkdown: boolean = false): string {\n  let formatted = content;\n\n  // Escape HTML to prevent XSS (but preserve our own tags)\n  formatted = formatted\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  // Code blocks (```language\\ncode\\n```)\n  formatted = formatted.replace(\n    /```(\\w*)\\n([\\s\\S]*?)```/g,\n    (_, lang, code) => {\n      const langLabel = lang ? `<span class=\"text-xs text-slate-400 absolute top-2 right-2\">${lang}</span>` : '';\n      return `<div class=\"relative my-3\"><pre class=\"bg-slate-900 text-slate-100 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto text-sm font-mono\">${langLabel}<code>${code.trim()}</code></pre></div>`;\n    }\n  );\n\n  // Inline code (`code`)\n  formatted = formatted.replace(\n    /`([^`]+)`/g,\n    '<code class=\"bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded text-sm font-mono\">$1</code>'\n  );\n\n  // Headers (## Header)\n  if (fullMarkdown) {\n    formatted = formatted.replace(/^### (.+)$/gm, '<h3 class=\"text-lg font-semibold mt-4 mb-2\">$1</h3>');\n    formatted = formatted.replace(/^## (.+)$/gm, '<h2 class=\"text-xl font-semibold mt-4 mb-2\">$1</h2>');\n    formatted = formatted.replace(/^# (.+)$/gm, '<h1 class=\"text-2xl font-bold mt-4 mb-2\">$1</h1>');\n  }\n\n  // Bold text (**text**)\n  formatted = formatted.replace(/\\*\\*([^*]+)\\*\\*/g, '<strong>$1</strong>');\n\n  // Italic text (*text* or _text_)\n  formatted = formatted.replace(/\\*([^*]+)\\*/g, '<em>$1</em>');\n  formatted = formatted.replace(/_([^_]+)_/g, '<em>$1</em>');\n\n  // Links [text](url)\n  formatted = formatted.replace(\n    /\\[([^\\]]+)\\]\\(([^)]+)\\)/g,\n    '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-blue-600 dark:text-blue-400 hover:underline\">$1</a>'\n  );\n\n  // Numbered lists (1. item)\n  formatted = formatted.replace(/^(\\d+)\\. (.+)$/gm, '<li class=\"ml-4\" value=\"$1\">$2</li>');\n  formatted = formatted.replace(\n    /(<li class=\"ml-4\" value=\"\\d+\">[^<]+<\\/li>\\n?)+/g,\n    '<ol class=\"list-decimal pl-4 space-y-1 my-2\">$&</ol>'\n  );\n\n  // Unordered lists (- item or * item)\n  formatted = formatted.replace(/^[-*] (.+)$/gm, '<li class=\"ml-4\">$1</li>');\n  formatted = formatted.replace(\n    /(<li class=\"ml-4\">[^<]+<\\/li>\\n?)+/g,\n    '<ul class=\"list-disc pl-4 space-y-1 my-2\">$&</ul>'\n  );\n\n  // Horizontal rule (---)\n  formatted = formatted.replace(/^---$/gm, '<hr class=\"my-4 border-slate-300 dark:border-slate-600\" />');\n\n  // Blockquotes (> text)\n  formatted = formatted.replace(\n    /^&gt; (.+)$/gm,\n    '<blockquote class=\"border-l-4 border-slate-300 dark:border-slate-600 pl-4 italic text-slate-600 dark:text-slate-400 my-2\">$1</blockquote>'\n  );\n\n  // Tables (basic support)\n  formatted = formatted.replace(\n    /^\\|(.+)\\|$/gm,\n    (match, content) => {\n      const cells = content.split('|').map((cell: string) => cell.trim());\n      const isHeader = cells.some((cell: string) => cell.match(/^-+$/));\n      if (isHeader) {\n        return ''; // Skip separator row\n      }\n      const cellElements = cells.map((cell: string) => `<td class=\"border border-slate-300 dark:border-slate-600 px-3 py-2\">${cell}</td>`).join('');\n      return `<tr>${cellElements}</tr>`;\n    }\n  );\n  // Wrap table rows\n  formatted = formatted.replace(\n    /(<tr>.*<\\/tr>\\n?)+/g,\n    '<table class=\"border-collapse border border-slate-300 dark:border-slate-600 my-3 w-full\">$&</table>'\n  );\n\n  // Paragraphs - convert double line breaks to paragraph breaks\n  formatted = formatted.replace(/\\n\\n/g, '</p><p class=\"my-2\">');\n\n  // Single line breaks\n  formatted = formatted.replace(/\\n/g, '<br/>');\n\n  // Wrap in paragraph if not already wrapped\n  if (!formatted.startsWith('<')) {\n    formatted = `<p class=\"my-2\">${formatted}</p>`;\n  }\n\n  return formatted;\n}\n\n// Message component\nfunction ChatMessageBubble({\n  message,\n  onExpand\n}: {\n  message: Message;\n  onExpand?: (message: Message) => void;\n}) {\n  const isUser = message.role === 'user';\n  const canExpand = !isUser && !message.isLoading && message.content.length > 0;\n\n  return (\n    <div className={cn('flex gap-3', isUser ? 'flex-row-reverse' : 'flex-row')}>\n      <div\n        className={cn(\n          'flex h-8 w-8 shrink-0 items-center justify-center rounded-full',\n          isUser\n            ? 'bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400'\n            : 'bg-gradient-to-br from-purple-500 to-pink-500 text-white'\n        )}\n      >\n        {isUser ? <User className=\"h-4 w-4\" /> : <Bot className=\"h-4 w-4\" />}\n      </div>\n      <div className={cn('flex flex-col gap-1', isUser ? 'items-end' : 'items-start')}>\n        {message.toolsUsed && message.toolsUsed.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mb-1\">\n            {message.toolsUsed.map((tool) => (\n              <Badge key={tool} variant=\"outline\" className=\"text-xs py-0 px-1.5\">\n                <Wrench className=\"h-3 w-3 mr-1\" />\n                {tool.replace(/_/g, ' ')}\n              </Badge>\n            ))}\n          </div>\n        )}\n        <div className=\"group relative\">\n          <div\n            className={cn(\n              'rounded-2xl px-4 py-2 max-w-[85%]',\n              isUser\n                ? 'bg-blue-600 text-white'\n                : 'bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-slate-100',\n              canExpand && 'cursor-pointer hover:ring-2 hover:ring-purple-300 dark:hover:ring-purple-600 transition-all'\n            )}\n            onClick={() => canExpand && onExpand?.(message)}\n          >\n            {message.isLoading ? (\n              <div className=\"flex items-center gap-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                <span className=\"text-sm\">Se procesează...</span>\n              </div>\n            ) : (\n              <div\n                className=\"text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none\"\n                dangerouslySetInnerHTML={{ __html: formatMessage(message.content) }}\n              />\n            )}\n          </div>\n          {canExpand && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"absolute -top-2 -right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity bg-white dark:bg-slate-700 shadow-sm border\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onExpand?.(message);\n              }}\n            >\n              <Maximize2 className=\"h-3 w-3\" />\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Suggested queries\nconst SUGGESTED_QUERIES = [\n  'Câte vehicule avem în flotă?',\n  'Care sunt primele 5 vehicule cu consum mare?',\n  'Ce mentenanțe sunt programate?',\n  'Statistici combustibil luna aceasta',\n  'Lista șoferilor activi',\n];\n\nexport default function AssistantPage() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentTools, setCurrentTools] = useState<string[]>([]);\n  const [selectedMessage, setSelectedMessage] = useState<Message | null>(null);\n  const [isPanelOpen, setIsPanelOpen] = useState(false);\n  const [isCopied, setIsCopied] = useState(false);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const user = useAuthStore((state) => state.user);\n  const isAdmin = user?.role === 'admin';\n\n  const handleExpandMessage = (message: Message) => {\n    setSelectedMessage(message);\n    setIsPanelOpen(true);\n    setIsCopied(false);\n  };\n\n  const handleClosePanel = () => {\n    setIsPanelOpen(false);\n  };\n\n  const handleCopyMessage = async () => {\n    if (selectedMessage) {\n      try {\n        await navigator.clipboard.writeText(selectedMessage.content);\n        setIsCopied(true);\n        setTimeout(() => setIsCopied(false), 2000);\n      } catch (err) {\n        console.error('Failed to copy:', err);\n      }\n    }\n  };\n\n  // Check LLM health\n  const { data: health, isLoading: healthLoading } = useQuery({\n    queryKey: ['chat', 'health'],\n    queryFn: () => chatApi.getHealth(),\n    refetchInterval: 30000, // Check every 30 seconds\n  });\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    if (scrollAreaRef.current) {\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 200)}px`;\n    }\n  }, [input]);\n\n  const generateId = () => `msg-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n  const handleSendMessage = useCallback(async (messageText?: string) => {\n    const text = messageText || input.trim();\n    if (!text || isLoading) return;\n\n    const userMessage: Message = {\n      id: generateId(),\n      role: 'user',\n      content: text,\n    };\n\n    const assistantMessage: Message = {\n      id: generateId(),\n      role: 'assistant',\n      content: '',\n      isLoading: true,\n    };\n\n    setMessages((prev) => [...prev, userMessage, assistantMessage]);\n    setInput('');\n    setIsLoading(true);\n    setCurrentTools([]);\n\n    // Build conversation history for API\n    const conversationHistory: ChatMessage[] = [\n      ...messages.map((m) => ({ role: m.role, content: m.content })),\n      { role: 'user' as const, content: text },\n    ];\n\n    let fullContent = '';\n    let toolsUsed: string[] = [];\n\n    try {\n      await chatApi.streamMessage(\n        conversationHistory,\n        (event: StreamEvent) => {\n          switch (event.type) {\n            case 'tool_start':\n              if (event.tools) {\n                setCurrentTools(event.tools);\n                toolsUsed = event.tools;\n              }\n              break;\n            case 'tool_end':\n              setCurrentTools([]);\n              break;\n            case 'content':\n              if (event.content) {\n                fullContent += event.content;\n                setMessages((prev) =>\n                  prev.map((m) =>\n                    m.id === assistantMessage.id\n                      ? { ...m, content: fullContent, isLoading: false, toolsUsed }\n                      : m\n                  )\n                );\n              }\n              break;\n            case 'done':\n              setMessages((prev) =>\n                prev.map((m) =>\n                  m.id === assistantMessage.id\n                    ? { ...m, content: fullContent || 'Nu am putut genera un răspuns.', isLoading: false, toolsUsed }\n                    : m\n                )\n              );\n              break;\n            case 'error':\n              setMessages((prev) =>\n                prev.map((m) =>\n                  m.id === assistantMessage.id\n                    ? { ...m, content: `Eroare: ${event.error || 'Necunoscută'}`, isLoading: false }\n                    : m\n                )\n              );\n              break;\n          }\n        },\n        (error: Error) => {\n          setMessages((prev) =>\n            prev.map((m) =>\n              m.id === assistantMessage.id\n                ? { ...m, content: `Eroare: ${error.message}`, isLoading: false }\n                : m\n            )\n          );\n        }\n      );\n    } catch (error) {\n      setMessages((prev) =>\n        prev.map((m) =>\n          m.id === assistantMessage.id\n            ? { ...m, content: `Eroare: ${error instanceof Error ? error.message : 'Necunoscută'}`, isLoading: false }\n            : m\n        )\n      );\n    } finally {\n      setIsLoading(false);\n      setCurrentTools([]);\n    }\n  }, [input, isLoading, messages]);\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const clearConversation = () => {\n    setMessages([]);\n    setInput('');\n  };\n\n  return (\n    <div className=\"flex flex-col h-[calc(100vh-6rem)]\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between pb-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\n            <Sparkles className=\"h-6 w-6 text-purple-500\" />\n            Asistent AI\n          </h1>\n          <p className=\"text-slate-500 dark:text-slate-400\">\n            Întreabă-mă orice despre flotă, combustibil sau mentenanță\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {healthLoading ? (\n            <Skeleton className=\"h-6 w-24\" />\n          ) : health?.available ? (\n            <Badge variant=\"outline\" className=\"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-950 dark:text-emerald-400 dark:border-emerald-800\">\n              <span className=\"w-2 h-2 rounded-full bg-emerald-500 mr-2 animate-pulse\" />\n              {health.model}\n            </Badge>\n          ) : (\n            <Badge variant=\"destructive\">\n              <AlertCircle className=\"h-3 w-3 mr-1\" />\n              Indisponibil\n            </Badge>\n          )}\n          {messages.length > 0 && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={clearConversation}>\n              <Trash2 className=\"h-4 w-4 mr-1\" />\n              Șterge\n            </Button>\n          )}\n          {isAdmin && (\n            <Link href=\"/assistant/settings\">\n              <Button variant=\"outline\" size=\"sm\">\n                <Settings className=\"h-4 w-4 mr-1\" />\n                Setări\n              </Button>\n            </Link>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Area with Side Panel */}\n      <div className=\"flex-1 flex gap-4 min-h-0\">\n        {/* Chat Area */}\n        <Card className={cn(\n          \"flex-1 flex flex-col min-h-0 transition-all duration-300\",\n          isPanelOpen ? \"w-1/2\" : \"w-full\"\n        )}>\n          <div className=\"flex-1 overflow-auto p-4\" ref={scrollAreaRef}>\n            {messages.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                <div className=\"rounded-full bg-gradient-to-br from-purple-500 to-pink-500 p-4 mb-4\">\n                  <Bot className=\"h-8 w-8 text-white\" />\n                </div>\n                <h3 className=\"text-lg font-semibold mb-2\">Bine ai venit!</h3>\n                <p className=\"text-slate-500 dark:text-slate-400 max-w-md mb-6\">\n                  Sunt asistentul tău pentru managementul flotei. Pot să te ajut cu informații despre vehicule,\n                  consum de combustibil, mentenanță și multe altele.\n                </p>\n                <div className=\"grid gap-2 sm:grid-cols-2 max-w-lg\">\n                  {SUGGESTED_QUERIES.map((query) => (\n                    <Button\n                      key={query}\n                      variant=\"outline\"\n                      className=\"justify-start text-left h-auto py-2 px-3 text-sm\"\n                      onClick={() => handleSendMessage(query)}\n                      disabled={isLoading || !health?.available}\n                    >\n                      <Sparkles className=\"h-3 w-3 mr-2 text-purple-500 shrink-0\" />\n                      <span className=\"truncate\">{query}</span>\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {messages.map((message) => (\n                  <ChatMessageBubble\n                    key={message.id}\n                    message={message}\n                    onExpand={handleExpandMessage}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Tools indicator */}\n          {currentTools.length > 0 && (\n            <div className=\"px-4 py-2 border-t bg-slate-50 dark:bg-slate-900\">\n              <div className=\"flex items-center gap-2 text-sm text-slate-500\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                <span>Se execută:</span>\n                {currentTools.map((tool) => (\n                  <Badge key={tool} variant=\"secondary\" className=\"text-xs\">\n                    {tool.replace(/_/g, ' ')}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Input area */}\n          <div className=\"p-4 border-t\">\n            {!health?.available && !healthLoading && (\n              <div className=\"mb-3 p-3 rounded-lg bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800\">\n                <div className=\"flex items-start gap-2\">\n                  <AlertCircle className=\"h-4 w-4 text-amber-500 mt-0.5\" />\n                  <div className=\"text-sm\">\n                    <p className=\"font-medium text-amber-700 dark:text-amber-400\">Serviciul LLM nu este disponibil</p>\n                    <p className=\"text-amber-600 dark:text-amber-500\">\n                      {health?.error || 'Verifică configurația serverului'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n            <div className=\"flex gap-2\">\n              <Textarea\n                ref={textareaRef}\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Scrie un mesaj... (Enter pentru a trimite, Shift+Enter pentru linie nouă)\"\n                className=\"min-h-[44px] max-h-[200px] resize-none\"\n                disabled={isLoading || !health?.available}\n                rows={1}\n              />\n              <Button\n                onClick={() => handleSendMessage()}\n                disabled={!input.trim() || isLoading || !health?.available}\n                className=\"shrink-0\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                ) : (\n                  <Send className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            <p className=\"text-xs text-slate-400 mt-2 flex items-center gap-1\">\n              <Info className=\"h-3 w-3\" />\n              Asistentul poate face greșeli. Verifică informațiile importante.\n            </p>\n          </div>\n        </Card>\n\n        {/* Collapsible Right Side Panel */}\n        <div\n          className={cn(\n            \"transition-all duration-300 ease-in-out overflow-hidden\",\n            isPanelOpen ? \"w-1/2 opacity-100\" : \"w-0 opacity-0\"\n          )}\n        >\n          {isPanelOpen && selectedMessage && (\n            <Card className=\"h-full flex flex-col\">\n              {/* Panel Header */}\n              <div className=\"flex items-center justify-between p-4 border-b bg-slate-50 dark:bg-slate-900\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-pink-500 text-white\">\n                    <Bot className=\"h-5 w-5\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">Răspuns Asistent</h3>\n                    {selectedMessage.toolsUsed && selectedMessage.toolsUsed.length > 0 && (\n                      <div className=\"flex flex-wrap gap-1 mt-1\">\n                        {selectedMessage.toolsUsed.map((tool) => (\n                          <Badge key={tool} variant=\"outline\" className=\"text-xs py-0 px-1.5\">\n                            <Wrench className=\"h-3 w-3 mr-1\" />\n                            {tool.replace(/_/g, ' ')}\n                          </Badge>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={handleCopyMessage}\n                  >\n                    {isCopied ? (\n                      <>\n                        <Check className=\"h-4 w-4 mr-1 text-emerald-500\" />\n                        Copiat\n                      </>\n                    ) : (\n                      <>\n                        <Copy className=\"h-4 w-4 mr-1\" />\n                        Copiază\n                      </>\n                    )}\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={handleClosePanel}\n                    className=\"h-8 w-8\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              {/* Panel Content */}\n              <div className=\"flex-1 overflow-auto p-4\">\n                <div\n                  className=\"prose prose-sm dark:prose-invert max-w-none leading-relaxed\"\n                  dangerouslySetInnerHTML={{ __html: formatMessage(selectedMessage.content, true) }}\n                />\n              </div>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}